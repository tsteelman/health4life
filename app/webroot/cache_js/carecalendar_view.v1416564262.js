var i18n=$.extend({},i18n||{},{xgcalendar:{dateformat:{fulldaykey:"MMddyyyy",fulldayshow:"L d yyyy",fulldayvalue:"M/d/yyyy",Md:"W M/d",Md3:"L d",separator:"/",year_index:2,month_index:0,day_index:1,day:"d",sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat",jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"},no_implemented:"No implemented yet",to_date_view:"Click to the view of current date",i_undefined:"Undefined",
allday_event:"All day event",repeat_event:"Repeat event",time:"Time",event:"Event",reminder:"Reminder",location:"Location",participant:"Participant",get_data_exception:"Exception when getting data",new_event:"New event",confirm_delete_event:"Do you confirm to delete this event? ",confrim_delete_event_or_all:"Do you want to all repeat events or only this event? \r\nClick [OK] to delete only this event, click [Cancel] delete all events",delete_event_message:"Do you want to delete the reminder ?",data_format_error:"Data format error! ",
invalid_title:"Event title can not be blank or contains ($<>)",view_no_ready:"View is not ready",example:"e.g., meeting at room 107",content:"What",create_event:"Create event",update_detail:"Edit details",click_to_detail:"View details",i_delete:"Delete",day_plural:"days",others:"Others",item:"",task:"Task",medication:"Medication"}}),i18n=$.extend({},i18n||{},{datepicker:{dateformat:{fulldayvalue:"M/d/yyyy",separator:"/",year_index:2,month_index:0,day_index:1,sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",
thu:"Thu",fri:"Fri",sat:"Sat",jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec",postfix:""},ok:" Ok ",cancel:"Cancel",today:"Today",prev_month_title:"prev month",next_month_title:"next month"}});
(function(a){a.fn.DhoverClass=function(o){return a(this).hover(function(){a(this).addClass(o)},function(){a(this).removeClass(o)})};a.fn.dropdown=function(o){var l=a.extend({vinputid:null,cssClass:"bbit-dropdown",containerCssClass:"dropdowncontainer",dropwidth:!1,dropheight:"auto",autoheight:!0,selectedchange:!1,items:[],selecteditem:!1,parse:{name:"list",render:function(i){var d=this.target,h=a("<ul/>");this.items&&0<this.items.length&&a.each(this.items,function(){var i=this,l=a("<div/>").html(i.text),
o=a("<li/>").DhoverClass("hover").append(l).click(function(){d.SelectedChanged(i)});i.classes&&""!=i.classes&&l.addClass(i.classes);h.append(o)});i.append(h)},items:[],setValue:function(){},target:null}},o),t=a(this),h;l.vinputid&&(h=a("#"+l.vinputid));l.selecteditem&&(t.val(l.selecteditem.text),h&&l.selecteditem.value&&h.val(l.selecteditem.value));t.css({height:18,"padding-top":"1px","padding-bottom":"1px"}).addClass(l.cssClass).DhoverClass("hover");l.dropwidth||(l.dropwidth=t.outerWidth());var i=
a("<div/>").addClass(l.containerCssClass).css({position:"absolute","z-index":"999",width:l.dropwidth,display:"none",border:"solid 1px #555",background:"#fff"}).click(function(a){a.stopPropagation()}).appendTo(a("body"));l.autoheight?i.css("max-height",l.dropheight):i.css("height",l.dropheight);a.browser.msie&&6>=parseFloat(a.browser.version)&&(o=a("<div/>").css({position:"absolute","z-index":"-2",overflow:"hidden",height:"100%",width:"100%"}),o.append(a('<iframe style="position:absolute;z-index:-1;width:100%;height:100%;top:0;left:0;scrolling:no;" frameborder="0" src="about:blank"></iframe>')),
i.append(o));t.click(function(){if(i.attr("isinited")!="true"){l.parse.items=l.items;l.selecteditem&&l.parse.setValue.call(i,l.selecteditem);l.parse.render(i);i.attr("isinited","true")}var h=l.dropwidth,d=l.dropheight,J=t.offset(),w=t.outerHeight(),w={left:J.left,top:J.top+w-1},o=document.documentElement.clientWidth,Z=document.documentElement.clientHeight;if(w.left+h>=o)w.left=o-h-2;if(w.top+d>=Z&&o>w.top)w.top=J.top-d-2;i.css(w);i.show();a.browser.msie&&parseFloat(a.browser.version)<=6&&i.height()>
l.dropheight&&i.height(l.dropheight);a(document).one("click",function(){i.hide()});h=l.dropheight;a("."+l.containerCssClass+" ul").slimScroll({color:"#BBDAEC",railColor:"#EBF5F7",size:"5px",height:h+"px",railOpacity:0.1,railVisible:true});return false});t.SelectedChanged=function(a){var d=true;l.selectedchange&&(d=l.selectedchange.apply(t,[a]));if(d!=false){t.val(a.text);h&&a.value&&h.val(a.value)}i.hide()};t.Cancel=function(){i.hide()};return l.parse.target=t}})(jQuery);
(function(a){var o=[i18n.xgcalendar.dateformat.sun,i18n.xgcalendar.dateformat.mon,i18n.xgcalendar.dateformat.tue,i18n.xgcalendar.dateformat.wed,i18n.xgcalendar.dateformat.thu,i18n.xgcalendar.dateformat.fri,i18n.xgcalendar.dateformat.sat],l=[i18n.xgcalendar.dateformat.jan,i18n.xgcalendar.dateformat.feb,i18n.xgcalendar.dateformat.mar,i18n.xgcalendar.dateformat.apr,i18n.xgcalendar.dateformat.may,i18n.xgcalendar.dateformat.jun,i18n.xgcalendar.dateformat.jul,i18n.xgcalendar.dateformat.aug,i18n.xgcalendar.dateformat.sep,
i18n.xgcalendar.dateformat.oct,i18n.xgcalendar.dateformat.nov,i18n.xgcalendar.dateformat.dec];if(!t||"function"!=typeof t)var t=function(a){var i={},i=a.constructor==Object?new a.constructor:new a.constructor(a.valueOf()),h;for(h in a)i[h]!=a[h]&&(i[h]="object"==typeof a[h]?t(a[h]):a[h]);i.toString=a.toString;i.valueOf=a.valueOf;return i};if(!h||"function"!=typeof h)var h=function(a){var i={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"H+":this.getHours(),"m+":this.getMinutes(),
"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),w:"0123456".indexOf(this.getDay()),W:o[this.getDay()],L:l[this.getMonth()]};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var h in i)RegExp("("+h+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?i[h]:("00"+i[h]).substr((""+i[h]).length)));return a};if(!i||"function"!=typeof A)var i=function(a,i,h){var i=parseInt(i),o;"string"==typeof h&&(o=h.split(/\D/),eval("var date = new Date("+
o.join(",")+")"));"object"==typeof h&&(o=new Date(h.toString()));switch(a){case "y":o.setFullYear(o.getFullYear()+i);break;case "m":o.setMonth(o.getMonth()+i);break;case "d":o.setDate(o.getDate()+i);break;case "w":o.setDate(o.getDate()+7*i);break;case "h":o.setHours(o.getHours()+i);break;case "n":o.setMinutes(o.getMinutes()+i);break;case "s":o.setSeconds(o.getSeconds()+i);break;case "l":o.setMilliseconds(o.getMilliseconds()+i)}return o};if(!A||"function"!=typeof A)var A=function(a,i,h){switch(a){case "d":case "w":i=
new Date(i.getFullYear(),i.getMonth(),i.getDate());h=new Date(h.getFullYear(),h.getMonth(),h.getDate());break;case "h":i=new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours());h=new Date(h.getFullYear(),h.getMonth(),h.getDate(),h.getHours());break;case "n":i=new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes());h=new Date(h.getFullYear(),h.getMonth(),h.getDate(),h.getHours(),h.getMinutes());break;case "s":i=new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),
i.getMinutes(),i.getSeconds()),h=new Date(h.getFullYear(),h.getMonth(),h.getDate(),h.getHours(),h.getMinutes(),h.getSeconds())}var o=i.getTime(),l=h.getTime(),t=NaN;switch(a){case "y":t=h.getFullYear()-i.getFullYear();break;case "m":t=12*(h.getFullYear()-i.getFullYear())+h.getMonth()-i.getMonth();break;case "d":t=Math.floor(l/864E5)-Math.floor(o/864E5);break;case "w":t=Math.floor((l+3456E5)/6048E5)-Math.floor((o+3456E5)/6048E5);break;case "h":t=Math.floor(l/36E5)-Math.floor(o/36E5);break;case "n":t=
Math.floor(l/6E4)-Math.floor(o/6E4);break;case "s":t=Math.floor(l/1E3)-Math.floor(o/1E3);break;case "l":t=l-o}return t};void 0==a.fn.noSelect&&(a.fn.noSelect=function(d){return(prevent=null==d?!0:d)?this.each(function(){a.browser.msie||a.browser.safari?a(this).bind("selectstart",function(){return!1}):a.browser.mozilla?(a(this).css("MozUserSelect","none"),a("body").trigger("focus")):a.browser.opera?a(this).bind("mousedown",function(){return!1}):a(this).attr("unselectable","on")}):this.each(function(){a.browser.msie||
a.browser.safari?a(this).unbind("selectstart"):a.browser.mozilla?a(this).css("MozUserSelect","inherit"):a.browser.opera?a(this).unbind("mousedown"):a(this).removeAttr("unselectable","on")})});a.fn.bcalendar=function(d){function l(a,c){var k=d.loadDateR.length;c||(c=a);if(k==0)d.loadDateR.push({startdate:a,enddate:c});else{for(var e=0;e<k;e++){var f=d.loadDateR[e],g=A("d",a,f.startdate);if(g==0||g==1){if(f.enddate<c)f.enddate=c;break}else if(g>1){g=A("d",c,f.startdate);if(g>1)d.loadDateR.splice(0,
0,{startdate:a,enddate:c});else{f.startdate=a;if(f.enddate<c)f.enddate=c}break}else{g=A("d",c,f.startdate);if(f.enddate<c)if(g<1){f.enddate=c;break}else e==k-1&&d.loadDateR.push({startdate:a,enddate:c})}}k=d.loadDateR.length;if(k>1)for(e=0;e<k-1;){f=d.loadDateR[e];g=d.loadDateR[e+1];if(A("d",g.startdate,f.enddate)<=1){f.startdate=g.startdate>f.startdate?f.startdate:g.startdate;f.enddate=g.enddate>f.enddate?g.enddate:f.enddate;d.loadDateR.splice(e+1,1);k--}else e++}}}function w(){var m=new Date(d.showday.getFullYear(),
d.showday.getMonth(),d.showday.getDate()),c=d.eventItems,k={view:d.view,weekstartday:d.weekstartday,theme:d.theme};if(d.view=="day"||d.view=="week"){var e=a("#dvtec");if(e.length>0)d.scoll=e.attr("scrollTop")}switch(d.view){case "day":oa(m,1,c,k);break;case "week":oa(m,7,c,k);break;case "month":e=[];e.push("<div id='cal-month-cc' class='cc'><div id='cal-month-cc-header'><div class='cc-close' id='cal-month-closebtn'></div><div id='cal-month-cc-title' class='cc-title'></div></div><div id='cal-month-cc-body' class='cc-body'><div id='cal-month-cc-content' class='st-contents'><table class='st-grid' cellSpacing='0' cellPadding='0'><tbody></tbody></table></div></div></div>");
e.push('<div id="mvcontainer" class="mv-container">');e.push('<table id="mvweek" class="mv-daynames-table" cellSpacing="0" cellPadding="0"><tbody><tr>');for(var f=k.weekstartday,g=0;g<7;f++,g++){f>6&&(f=0);e.push('<th class="mv-dayname" title="',o[f],'">',o[f],"")}e.push("</tr></tbody></table>");e.push("</div>");f=d.height-21;e.push('<div id="mvEventContainer" class="mv-event-container" style="height:',f,"px;",'">');var q=k.weekstartday,g=f,f=new Date(m.getFullYear(),m.getMonth(),1),r=q-f.getDay(),
k=m.getMonth();r>0&&(r=r-7);var n=i("d",r,f),s=i("d",34,n),f=5;if(s.getFullYear()==m.getFullYear()&&s.getMonth()==m.getMonth()&&s.getDate()<xa[k]){s=i("d",7,s);f=6}d.vstart=n;d.vend=s;d.datestrshow=R(n,s);g=(g-18*f)/f;m=parseInt(g/21);g%21>15&&m++;for(var g=100/f,r=[],j={},B=c.length,l=0;l<B;l++){var p=c[l][2],C=c[l][3],x=A("d",p,C),u={};u.event=c[l];u.day=p.getDate();u.year=p.getFullYear();u.month=p.getMonth()+1;u.allday=c[l][4]==1;u.crossday=c[l][5]==1;u.reevent=c[l][6]==1;u.daystr=u.year+"/"+u.month+
"/"+u.day;u.st={};u.st.hour=p.getHours();u.st.minute=p.getMinutes();u.st.p=u.st.hour*60+u.st.minute;u.et={};u.et.hour=C.getHours();u.et.minute=C.getMinutes();u.et.p=u.et.hour*60+u.et.minute;if(x>0){p<n&&(p=n);C>s&&(C=s);x=q-p.getDay();x>0&&(x=x-7);for(x=i("d",x,p);x<=C;p=x=i("d",7,x)){var w=t(u),y=h.call(p,i18n.xgcalendar.dateformat.fulldaykey),D=A("d",x,C);j[y]==null&&(j[y]=[]);w.colSpan=D>=7?7-A("d",x,p):A("d",p,C)+1;j[y].push(w)}}else{y=h.call(c[l][2],i18n.xgcalendar.dateformat.fulldaykey);j[y]==
null&&(j[y]=[]);u.colSpan=1;j[y].push(u)}}c=[];q=[];for(s=0;s<f;s++){l=0;r[s]=b=[];for(B=0;B<7;B++){p=i("d",s*7+B,n);q[s*7+B]=p;p=h.call(p,i18n.xgcalendar.dateformat.fulldaykey);b[B]=j[p];b[B]&&b[B].length>0&&(l=l+b[B].length)}c[s]=l}ga.data("mvdata",r);for(s=0;s<f;s++){e.push("<div id='mvrow_",s,"' style=\"HEIGHT:",g,"%; TOP:",g*s,'%"  class="month-row">');e.push('<table class="st-bg-table" cellSpacing="0" cellPadding="0"><tbody><tr>');l=c[s];for(B=0;B<7;B++){n=q[s*7+B];e.push("<td abbr='",h.call(n,
i18n.xgcalendar.dateformat.fulldayvalue),"' ch='qkadd' axis='00:00' title=''");h.call(n,"yyyyMMdd")==h.call(G(),"yyyyMMdd")?e.push(' class="st-bg st-bg-today">'):e.push(' class="st-bg">');e.push("&nbsp;</td>")}e.push("</tr></tbody></table>");e.push('<table class="st-grid" cellpadding="0" cellspacing="0"><tbody>');e.push("<tr>");for(B=0;B<7;B++){j={titleClass:"",dayshow:""};n=q[s*7+B];if(h.call(n,"yyyyMMdd")==h.call(G(),"yyyyMMdd"))j.titleClass=" st-dtitle-today";if(n.getMonth()!=k)j.titleClass=" st-dtitle-nonmonth";
j.title=h.call(n,i18n.xgcalendar.dateformat.fulldayshow);j.dayshow=n.getDate()==1?n.getMonth==0?h.call(n,i18n.xgcalendar.dateformat.fulldayshow):h.call(n,i18n.xgcalendar.dateformat.Md3):n.getDate();j.abbr=h.call(n,i18n.xgcalendar.dateformat.fulldayvalue);e.push(L("<td class=\"st-dtitle${titleClass}\" ch='qkadd' abbr='${abbr}' axis='00:00' title=\"${title}\"><span class='monthdayshow'>${dayshow}</span></a></td>",j))}e.push("</tr>");for(var n=e,j=r[s],B=l,l=m,z=q[s*7],p=[],C=[],u=[],x=[],w=j.length,
D=y=0;D<w;D++){p.push(0);C.push(0);u.push(0);x.push(i("d",D,z))}for(D=0;D<w;D++){var v=j[D]?j[D].length:0;C[D]=C[D]+v;for(var F=0;F<v;F++)if((z=j[D][F])&&z.colSpan>1)for(var H=1;H<z.colSpan;H++)C[D+H]++}for(D=0;D<l&&y<B;D++){n.push("<tr>");for(v=0;v<w;){var z=j[v]?j[v][p[v]]:void 0,F={"class":"",axis:"",ch:"",title:"",abbr:"",html:"",otherAttr:"",click:"javascript:void(0);"},E=["st-c"];if(z){p[v]=p[v]+1;H=false;u[v]+1==C[v]&&z.colSpan==1&&(H=true);if(!H&&D==l-1&&u[v]<C[v]){y++;a.extend(F,{axis:v,
ch:"more",abbr:h.call(x[v],i18n.xgcalendar.dateformat.fulldayvalue),html:i18n.xgcalendar.others+(C[v]-u[v])+i18n.xgcalendar.item,click:"javascript:alert('more event');"});E.push("st-more st-moreul");v++}else{F.html=ha(z,x[v],w-v);F.ch="show";if(z.colSpan>1){F.otherAttr=" colSpan='"+z.colSpan+"'";for(H=0;H<z.colSpan;H++)u[v+H]=u[v+H]+1;v=v+z.colSpan}else{u[v]=u[v]+1;v++}y++}}else{if(D==l-1&&u[v]<C[v]&&C[v]>0){a.extend(F,{axis:v,ch:"more",abbr:h.call(x[v],i18n.xgcalendar.dateformat.fulldayvalue),html:i18n.xgcalendar.others+
(C[v]-u[v])+i18n.xgcalendar.item,click:"javascript:alert('more event');"});E.push("st-more st-moreul")}else{a.extend(F,{html:"&nbsp;",ch:"qkadd",axis:"00:00",abbr:h.call(x[v],i18n.xgcalendar.dateformat.fulldayvalue),title:""});E.push("st-s")}v++}F.cssclass=E.join(" ");n.push(L("<td class='${cssclass}' axis='${axis}' ch='${ch}' abbr='${abbr}' title='${title}' ${otherAttr}>${html}</td>",F))}n.push("</tr>")}e.push("</tbody></table>");e.push("</div>")}e.push("</div>");I.html(e.join(""));a("#cal-month-closebtn").click(Z);
break;default:alert(i18n.xgcalendar.no_implement)}var J=d.view;if(J=="week"||J=="day"){a("div.chip",I).each(function(){var c=a(this);c.click(aa);if(c.hasClass("drag")){c.mousedown(function(a){M.call(this,"dw3",a);return false});c.find("div.resizer").mousedown(function(c){M.call(a(this).parent().parent(),"dw4",c);return false})}else c.mousedown(ia)});a("div.rb-o",I).each(function(){var c=a(this);c.click(aa);c.hasClass("drag")&&J=="week"?c.mousedown(function(c){M.call(this,"dw5",c);return false}):c.mousedown(ia)});
if(d.readonly==false){a("td.tg-col",I).each(function(){d.calendarType!=4&&a(this).mousedown(function(c){M.call(this,"dw1",c);return false})});a("#weekViewAllDaywk").mousedown(function(c){M.call(this,"dw2",c);return false})}J=="week"&&a("#dvwkcontaienr th.gcweekname").each(function(){a(this).click(pa)})}else{J="month";a("div.rb-o",I).each(function(){var c=a(this);c.click(aa);c.hasClass("drag")?c.mousedown(function(c){M.call(this,"m2",c);return false}):c.mousedown(ia)});a("td.st-more",I).each(function(){a(this).click(function(){var c=
a(this).parent().parent().parent().parent()[0],m=a(this),e=c.id.split("_")[1],f=a(c),c=m.position(),g=f.position(),f=(m.width()+2)*1.5,g=g.top+15,k=c.left,d=this.abbr.split("/"),q=new Date(d[2],parseInt(d[0]-1),d[1]),d=a("#cal-month-cc"),j=a("#cal-month-cc-content table tbody");a("#cal-month-cc-title").html(h.call(q,i18n.xgcalendar.dateformat.Md3)+" "+o[q.getDay()]);j.empty();for(var i=a("#gridEvent").data("mvdata"),e=i[e],i=parseInt(this.axis),r=[],n=0;n<=i;n++)for(var l=e[n]?e[n].length:0,s=0;s<
l;s++){var p=e[n][s];if(p&&p.colSpan+n-1>=i){r.push("<tr><td class='st-c'>");r.push(ha(p,q,1));r.push("</td></tr>")}}j.html(r.join(""));j.find("div.rb-o").each(function(){a(this).click(aa)});i=e=null;q=d.height();j=document.documentElement.clientHeight;k+f>=document.documentElement.clientWidth&&(k=c.left-(m.width()+2)*0.5);g+q>=j&&(g=j-q-2);d.css({left:k,top:g,"z-index":180,width:f,visibility:"visible"});a(document).one("click",Z);return false}).mousedown(function(){return false})});d.readonly==false&&
a("#mvEventContainer").mousedown(function(c){M.call(this,"m1",c);return false})}e=d.view;if(e=="day"||e=="week"){k=a("#dvwkcontaienr");e=a("#dvtec");if(k.length==0||e.length==0)alert(i18n.xgcalendar.view_no_ready);else{k=k.height()+2;e.height(d.height-8-k);if(typeof d.scoll=="undefined"){f=G();k=f.getHours();f=f.getMinutes();m=K(k,f);f=e.attr("clientHeight");m=m-0.5*f;g=e.attr("scrollHeight");m<0&&(m=0);m>g-f&&(m=g-f-10*(23-k));e.attr("scrollTop",m)}else e.attr("scrollTop",d.scoll)}}}function oa(a,
c,k,e){var f=[];if(c==1){e=h.call(a,i18n.xgcalendar.dateformat.Md);f.push({display:e,date:a,day:a.getDate(),year:a.getFullYear(),month:a.getMonth()+1});d.datestrshow=R(f[0].date);d.vstart=f[0].date;d.vend=f[0].date}else{var g=0;if(c==7){g=e.weekstartday-a.getDay();g>0&&(g=g-7)}for(var q=g,r=0;r<c;q=q+1,r++){g=i("d",q,a);e=h.call(g,i18n.xgcalendar.dateformat.Md);f.push({display:e,date:g,day:g.getDate(),year:g.getFullYear(),month:g.getMonth()+1})}d.vstart=f[0].date;d.vend=f[c-1].date;d.datestrshow=
R(f[0].date,f[c-1].date)}c=[];a=[];e=f.length;q=k.length;r=[];for(g=0;g<q;g++){var n=k[g][2],s=k[g][3],j={};j.event=k[g];j.day=n.getDate();j.year=n.getFullYear();j.month=n.getMonth()+1;j.allday=k[g][4]==1;j.crossday=k[g][5]==1;j.reevent=k[g][6]==1;j.daystr=[j.year,j.month,j.day].join("/");j.st={};j.st.hour=n.getHours();j.st.minute=n.getMinutes();j.st.p=j.st.hour*60+j.st.minute;j.et={};j.et.hour=s.getHours();j.et.minute=s.getMinutes();j.et.p=j.et.hour*60+j.et.minute;r.push(j)}for(q=k=0;q<e;q++){n=
f[q];a[q]=[];c[q]=[];n.daystr=n.year+"/"+n.month+"/"+n.day;for(g=0;g<r.length;g++)if(!r[g].crossday&&!r[g].allday)n.daystr==r[g].daystr&&a[q].push(r[g]);else if(n.daystr==r[g].daystr){c[q].push(r[g]);k++}else if(q==0&&n.date>=r[g].event[2]&&n.date<=r[g].event[3]){c[q].push(r[g]);k++}}r=f[e-1].date;for(q=0;q<e;q++){j=c[q];if(j.length>0)for(g=0;g<j.length;g++){n=A("d",r,j[g].event[3])>0?r:j[g].event[3];j[g].colSpan=A("d",f[q].date,n)+1}}for(q=0;q<e;q++){j=a[q];if(j.length>0){for(var r=[],n=[],l=[],
o=j.length,p,g=0;g<o;++g){var t=j[g],x=t.st.p;for(p=0;n[p]>x;)p++;t.PO=p;t.ne=[];n[p]=t.et.p||1440;r[p]=t;l[p]||(l[p]=[]);l[p].push(t);if(p!=0){t.pe=[r[p-1]];r[p-1].ne.push(t)}for(p=p+1;n[p]<=x;)p++;if(r[p]){s=r[p];t.ne.push(s);s.pe.push(t)}t.width=1/(t.PO+1);t.left=1-t.width}s=Array.prototype.concat.apply([],l);for(n=g=s.length;n--;){j=1;x=0;r=s[n];for(l=r.ne.length;l--;){p=r.ne[l];x=Math.max(x,p.VL);j=Math.min(j,p.left)}r.VL=x+1;r.width=j/(r.PO+1);r.left=j-r.width}for(n=0;n<g;n++){r=s[n];r.left=
0;if(r.pe)for(l=r.pe.length;l--;){j=r.pe[l];r.left=Math.max(r.left,j.left+j.width)}j=(1-r.left)/r.VL;r.width=Math.max(r.width,j);r.aQ=Math.min(1-r.left,r.width+0.7*j)}a[q]=s}}g=k;e=[];e.push('<div id="dvwkcontaienr" class="wktopcontainer">');e.push('<table class="wk-top" border="0" cellpadding="0" cellspacing="0">');e.push("<tr>",'<th width="60" rowspan="3">&nbsp;</th>');for(k=0;k<f.length;k++){if(f.length==1)n=r=q="";else{q="";r=i18n.xgcalendar.to_date_view;n="wk-daylink"}e.push("<th abbr='",h.call(f[k].date,
i18n.xgcalendar.dateformat.fulldayvalue),"' class='gcweekname' scope=\"col\"><div title='",r,"' ",q," class='wk-dayname'><span class='",n,"'>",f[k].display,"</span></div></th>")}e.push('<th width="16" rowspan="3">&nbsp;</th>');e.push("</tr>");e.push("<tr>");e.push('<td class="wk-allday"');f.length>1&&e.push(" colSpan='",f.length,"'");e.push('><div id="weekViewAllDaywk" ><table class="st-grid" cellpadding="0" cellspacing="0"><tbody>');if(g==0){e.push("<tr>");for(k=0;k<f.length;k++)e.push('<td class="st-c st-s"',
" ch='qkadd' abbr='",h.call(f[k].date,"yyyy-M-d"),"' axis='00:00'>&nbsp;</td>")}else{k=c.length;q=0;r=[];for(n=0;n<k;n++)r.push(0);for(n=0;q<g;n++){e.push("<tr>");for(s=0;s<k;){j=c[s][r[s]];e.push("<td class='st-c");if(j){r[s]=r[s]+1;e.push("'");l=ha(j,f[s].date,k-s);if(j.colSpan>1){e.push(" colSpan='",j.colSpan,"'");s=s+j.colSpan}else s++;e.push(" ch='show'>",l);q++}else{e.push(" st-s' ch='qkadd' abbr='",h.call(f[s].date,i18n.xgcalendar.dateformat.fulldayvalue),"' axis='00:00'>&nbsp;");s++}e.push("</td>")}e.push("</tr>")}e.push("<tr>");
for(s=0;s<k;s++)e.push("<td class='st-c st-s' ch='qkadd' abbr='",h.call(f[s].date,i18n.xgcalendar.dateformat.fulldayvalue),"' axis='00:00'>&nbsp;</td>")}e.push("</tr>");e.push("</tbody></table></div></td></tr>");e.push("<tr>");e.push('<td style="height: 5px;"');f.length>1&&e.push(" colSpan='",f.length,"'");e.push("></td>");e.push("</tr>");e.push("</table>");e.push("</div>");e.push('<div id="dvtec"  class="scolltimeevent"><table style="table-layout: fixed;',jQuery.browser.msie?"":"width:100%",'" cellspacing="0" cellpadding="0"><tbody><tr><td>');
e.push('<table style="height: 1008px" id="tgTable" class="tg-timedevents" cellspacing="0" cellpadding="0"><tbody>');e.push("<tr>");e.push("<td style='width:60px;'></td>");e.push("<td");f.length>1&&e.push(" colSpan='",f.length,"'");e.push('><div id="tgspanningwrapper" class="tg-spanningwrapper"><div style="font-size: 20px" class="tg-hourmarkers">');for(c=0;c<24;c++)e.push('<div class="tg-dualmarker"></div>');e.push("</div></div></td></tr>");e.push("<tr>");e.push('<td style="width: 60px" class="tg-times">');
g=G();c=g.getHours();g=g.getMinutes();g=K(c,g)-4;e.push('<div id="tgnowptr" class="tg-nowptr" style="left:0px;top:',g,'px"></div>');k="";for(c=0;c<24;c++){k=ya(c);e.push('<div style="height: 41px" class="tg-time">',k,"</div>")}e.push("</td>");k=f.length;for(c=0;c<k;c++){e.push("<td class=\"tg-col\" ch='qkadd' abbr='",h.call(f[c].date,i18n.xgcalendar.dateformat.fulldayvalue),"'>");q=G();(q=h.call(f[c].date,"yyyyMMdd")==h.call(q,"yyyyMMdd"))&&e.push('<div style="margin-bottom: -1008px; height:1008px" class="tg-today">&nbsp;</div>');
e.push('<div  style="margin-bottom: -1008px; height: 1008px" id=\'tgCol',c,'\' class="tg-col-eventwrapper">');r=e;n=a[c];for(s=0;s<n.length;s++){p=n[s].event[7]&&n[s].event[7]>=0?Q(n[s].event[7]):Q();j=n[s];l=s;p={bdcolor:p[0],bgcolor2:p[0],bgcolor1:p[2],width:"100%",icon:"",title:"",data:""};p.starttime=y(E(j.st.hour)+":"+E(j.st.minute));p.endtime=y(E(j.et.hour)+":"+E(j.et.minute));p.content=j.event[1];p.title=qa(j.event);p.data=j.event.join("$");x=[];x.push('<I class="cic cic-tmr">&nbsp;</I>');
j.reevent&&x.push('<I class="cic cic-spcl">&nbsp;</I>');p.icon=j.event[13]!=5?x.join(""):"";x=K(j.st.hour,j.st.minute);o=K(j.et.hour,j.et.minute);p.top=x+"px";p.left=j.left*100+"%";p.width=j.aQ*100+"%";p.height=o-x-4;p.i=l;if(d.enableDrag&&j.event[8]==1){p.drag="drag";p.redisplay="block"}else{p.drag="";p.redisplay="none"}j=L(ra,p);r.push(j)}e.push("</div>");e.push('<div class="tg-col-overlaywrapper" id=\'tgOver',c,"'>");q&&e.push('<div id="tgnowmarker" class="tg-hourmarker tg-nowmarker" style="left:0px;top:',
g+4,'px"></div>');e.push("</div>");e.push("</td>")}e.push("</tr>");e.push("</tbody></table></td></tr></tbody></table></div>");I.html(e.join(""))}function Z(){a("#cal-month-cc").css("visibility","hidden")}function G(){var m=parseFloat(a("#user_timezone_offset").val()),c=new Date,c=c.getTime()+c.getTimezoneOffset()*6E4;return new Date(c+36E5*m)}function qa(a){var c,k,e;c=a[4]!=1;e=a[1];var f=S(a[2],null,c,true);c=S(a[3],a[2],c,true);h.call(a[2],f);h.call(a[3],c);c=a[2].toDateString();k=y(a[2].getHours()+
":"+a[2].getMinutes());var g=a[3].toDateString(),d=y(a[3].getHours()+":"+a[3].getMinutes()),f="",f=c==g?c+" "+k+" - "+d:c+" "+k+" - "+g+" "+d;c=a[9]!=void 0&&a[9]!=""?a[9]:i18n.xgcalendar.i_undefined;k=a[10]!=void 0&&a[10]!=""?a[10]:"";g=[];a[4]==1?g.push("["+i18n.xgcalendar.allday_event+"]","\r\n"):a[5]==1&&g.push("["+i18n.xgcalendar.repeat_event+"]","\r\n");if(a[13]==1||a[13]==2){g.push(i18n.xgcalendar.time+":",f,"\r\n",i18n.xgcalendar.event+":",e,"\r\n",i18n.xgcalendar.location+":",c);k!=""&&g.push("\r\n",
i18n.xgcalendar.participant+":",k)}else a[13]==5?g.push(i18n.xgcalendar.time+":",f,"\r\n",i18n.xgcalendar.task+":",e):a[13]==4?g.push(i18n.xgcalendar.time+":",f,"\r\n",i18n.xgcalendar.reminder+":",e):a[13]==7?g.push(i18n.xgcalendar.time+":",f,"\r\n",i18n.xgcalendar.medication+":",e):g.push(i18n.xgcalendar.time+":",f,"\r\n",i18n.xgcalendar.event+":",e);return g.join("")}function ha(a,c,k){var e={color:(a.event[7]&&a.event[7]>=0?Q(a.event[7]):Q())[2],title:"",extendClass:"",extendHTML:"",data:""};e.title=
qa(a.event);e.id="bbit_cal_event_"+a.event[0];e.eclass=d.enableDrag&&a.event[8]==1?"drag":"cal_"+a.event[0];e.data=a.event.join("$");if(a.event[13]!=5)var f='<I class="cic cic-tmr">&nbsp;</I>',g='<I class="cic cic-rcr">&nbsp;</I>';else g=f="";var q=[],i=a.event[2]<c,c=A("d",c,a.event[3])>=k;if(i||c){if(i){q.push('<div class="st-ad-ml"></div>');e.extendClass="st-ad-mpad "}c&&q.push('<div class="st-ad-mr"></div>');e.extendHTML=q.join("")}q=!a.allday&&!i?y(E(a.st.hour)+":"+E(a.st.minute))+" "+a.event[1]:
a.event[1];i=[];i.push(L('<span style="cursor: pointer">${content}</span>',{content:q}));i.push(f);a.reevent&&i.push(g);e.content=i.join("");return L(za,e)}function T(){if(d.isloading)return true;if(d.url&&d.url!=""){d.isloading=true;if(d.onBeforeRequestData&&a.isFunction(d.onBeforeRequestData))d.onBeforeRequestData(1);var m=parseFloat(a("#user_timezone_offset").val()),c='{"assignedToFilter": "'+d.assignedToFilter+'","needTypeFilter": "'+d.needTypeFilter+'","statusFilter": "'+d.statusFilter+'"}',
m=[{name:"showdate",value:h.call(d.showday,i18n.xgcalendar.dateformat.fulldayvalue)},{name:"viewtype",value:d.view},{name:"calendartype",value:d.calendarType},{name:"filtertype",value:c},{name:"teamid",value:d.teamId},{name:"timezone",value:m}];if(d.extParam)for(c=0;c<d.extParam.length;c++)m[m.length]=d.extParam[c];a.ajax({type:d.method,url:d.url,data:m,dataType:"json",dataFilter:function(a){return a},success:function(c){if(c!=null&&c.error!=null){if(d.onRequestDataError)d.onRequestDataError(1,c)}else{c.start=
ba(c.start);c.end=ba(c.end);a.each(c.events,function(a,c){c[2]=ba(c[2]);c[3]=ba(c[3])});var m;m=c.issort==false?c.events&&c.events.length>0?c.events.sort(function(a,c){return a[2]>c[2]?-1:1}):[]:c.events;d.eventItems=m;w();l(c.start,c.end)}if(d.onAfterRequestData&&a.isFunction(d.onAfterRequestData))d.onAfterRequestData(1);d.isloading=false},error:function(c){try{if(d.onRequestDataError)d.onRequestDataError(1,c);else alert(i18n.xgcalendar.get_data_exception);if(d.onAfterRequestData&&a.isFunction(d.onAfterRequestData))d.onAfterRequestData(1);
d.isloading=false}catch(m){}}})}else alert("url"+i18n.xgcalendar.i_undefined)}function pa(){var m=a(this).attr("abbr");d.showday=ja(m+" 00:00");d.view="day";a("#txtdatetimeshow").text(R(d.showday));a("#caltoolbar div.fcurrent").each(function(){a(this).removeClass("fcurrent")});w();a("#showdaybtn").addClass("fcurrent");if(d.onweekormonthtoday)d.onweekormonthtoday(d);return false}function ba(a){return new Date(Date.parse(a))}function K(a,c){return a*42+parseInt(c/60*42)}function ca(a,c){var d=a/42,
e=parseInt(d),d=d-e>=0.5?30:0,f=c/42,g=parseInt(f);return{sh:e,sm:d,eh:g,em:f-g>=0.5?30:0,h:c-a}}function sa(a,c,d){var e=Math.min(a,c),a=Math.max(a,c),f=(e-d)/42,c=parseInt(f),f=f-c>=0.5?30:0,d=(a-d)/42,g=parseInt(d);return{sh:c,sm:f,eh:g,em:d-g>=0.5?30:0,h:a-e}}function E(a){return a<10?"0"+a:""+a}function Q(a){function c(a,c){return"#"+"666666888888aaaaaabbbbbbdddddda32929cc3333d96666e69999f0c2c2b1365fdd4477e67399eea2bbf5c7d67a367a994499b373b3cca2cce1c7e15229a36633cc8c66d9b399e6d1c2f029527a336699668cb399b3ccc2d1e12952a33366cc668cd999b3e6c2d1f01b887a22aa9959bfb391d5ccbde6e128754e32926265ad8999c9b1c2dfd00d78131096184cb05288cb8cb8e0ba52880066aa008cbf40b3d580d1e6b388880eaaaa11bfbf4dd5d588e6e6b8ab8b00d6ae00e0c240ebd780f3e7b3be6d00ee8800f2a640f7c480fadcb3b1440edd5511e6804deeaa88f5ccb8865a5aa87070be9494d4b8b8e5d4d47057708c6d8ca992a9c6b6c6ddd3dd4e5d6c6274878997a5b1bac3d0d6db5a69867083a894a2beb8c1d4d4dae54a716c5c8d8785aaa5aec6c3cedddb6e6e41898951a7a77dc4c4a8dcdccb8d6f47b08b59c4a883d8c5ace7dccef98e1bfa962bfbaf5dfcbf7efbb76ec4608cc96c95db9eb9e0aac2e4b7cb9e8039be9c4bccb170d9c596e7dabbbc2d0eee4420f26c4ff6947efac8bec0600fee8125f3a564f7c193fadcc3".substring(a*
30+c*6,a*30+(c+1)*6)}a=a!=null&&a!=void 0?a:d.theme;return[c(a,0),c(a,1),c(a,2),c(a,3)]}function L(a,c){return a.replace(/\$\{([\w]+)\}/g,function(a,m){var f=c[m];return typeof f!="undefined"?f:a})}function ya(a){if(a==0)return"12:00 am";if(a<12)return a<10?"0"+a+":00 am":a+":00 am";if(a>=12){a=a-12==0?12:a-12;return a<10?"0"+a+":00 pm":a+":00 pm"}}function S(a,c,d,e){var f=G(),f=d!=void 0?a.getFullYear()!=f.getFullYear():true,g=true,q=true,d=d||false,e=e||false;if(c){f=c.getFullYear()!=a.getFullYear();
c.getFullYear()==a.getFullYear()&&(a.getMonth()==c.getMonth()&&a.getDate()==c.getDate())&&(f=g=q=e=false)}a=[];f?a.push(i18n.xgcalendar.dateformat.fulldayshow):g?a.push(i18n.xgcalendar.dateformat.Md3):q&&a.push(i18n.xgcalendar.dateformat.day);a.push(e?" (W)":"",d?" HH:mm":"");return a.join("")}function R(a,c,d,e){if(c){var f=h.call(a,S(a,null,d,e)),a=h.call(c,S(c,a,d,e));return[f,a].join(a!=""?" - ":"")}return h.call(a,S(a,null,d))}function da(){var a;a=d.vstart;var c=d.vend,k=d.loadDateR.length;
if(k==0)a=false;else{for(var e=false,f=false,g=0;g<k;g++){var f=e=false,q=d.loadDateR[g];a>=q.startdate&&a<=q.enddate&&(e=true);if(h.call(a,"yyyyMMdd")==h.call(q.startdate,"yyyyMMdd")||h.call(a,"yyyyMMdd")==h.call(q.enddate,"yyyyMMdd"))e=true;if(c){c>=q.startdate&&c<=q.enddate&&(f=true);if(h.call(c,"yyyyMMdd")==h.call(q.startdate,"yyyyMMdd")||h.call(c,"yyyyMMdd")==h.call(q.enddate,"yyyyMMdd"))f=true}else f=true;if(e&&f)break}a=e&&f}a||T()}function N(a,c,d,e,f,g,q,i,h){h=h!=void 0&&h>=0?Q(h):Q();return L(ra,
{bdcolor:h[0],bgcolor2:h[0],bgcolor1:h[2],data:"",starttime:[E(a),E(c)].join(":"),endtime:[E(d),E(e)].join(":"),content:g?g:i18n.xgcalendar.new_event,title:g?g:i18n.xgcalendar.new_event,icon:'<I class="cic cic-tmr">&nbsp;</I>',top:"0px",left:"",width:q?q:"100%",height:f-4,i:"-1",drag:"drag-chip",redisplay:i?"block":"none"})}function U(a){a=a.find("div.dhdV");if(a.length==1){a=a.text().split("$");if(a.length>6){var c=[];c.push(a[0],a[1],new Date(a[2]),new Date(a[3]),parseInt(a[4]),parseInt(a[5]),parseInt(a[6]),
a[7]!=void 0?parseInt(a[7]):-1,a[8]!=void 0?parseInt(a[8]):0,a[9],a[10],a[11],a[12],a[13],a[14],a[15],a[16],a[17],a[18],a[19],a[20],a[21],a[22],a[23],a[24]);a=c}else a=null;return a}return null}function ta(m){console.log("delete called");O();var c=parseInt(a("#new_event_category").val());console.log("del_event_category ",c);var k="";c==1?k=a("#event_id").val():c==3&&(k=a("#AppoinmentFormId").val());var m=[{name:"calendarId",value:k},{name:"type",value:m}],e=ka(k,true);d.onBeforeRequestData&&d.onBeforeRequestData(3);
a.post(d.quickDeleteUrl,m,function(c){if(c)if(c.IsSuccess){e=null;d.onAfterRequestData&&d.onAfterRequestData(3);a("#new_event_category").val(1)}else{a("#new_event_category").val(1);d.onRequestDataError&&d.onRequestDataError(3,c);la(e);w();d.onAfterRequestData&&d.onAfterRequestData(3)}},"json");w()}function aa(m,c){var k="";c==void 0&&(c=U(a(this)));if(c!=null)if(d.quickDeleteUrl!=""&&c[8]==1&&d.readonly!=true){O();switch(d.view){case "day":k=a(m.target).parents(".chip").length>0?a(m.target).parents(".chip"):
a(m.target).parents(".rb-o").length>0?a(m.target).parents(".rb-o"):a(m.target).parents(".chip");break;case "week":k=a(m.target).parents(".chip").length>0?a(m.target).parents(".chip"):a(m.target).parents(".rb-o").length>0?a(m.target).parents(".rb-o"):a(m.target).parents(".chip");break;case "month":k=a(m.target).parents(".rb-o");break;default:k=a(m.target).parents(".chip")}var e=a("#bbit-cs-buddle");e.css("visibility")=="hidden"&&e.show();var f=m.pageX,g=m.pageY,q=f-110,i=document.documentElement.clientWidth,
n=document.documentElement.clientHeight,l=false;if(q<=0||g-217<=0||q+300>i){(f-150<=0?10:f-150)+300>=i&&(q=i-410);l=true}l?a("#prong1").hide():a("#prong1").show();f=[];g=A("d",c[2],c[3])!=0;f.push(h.call(c[2],i18n.xgcalendar.dateformat.Md3)," (",o[c[2].getDay()],")");c[4]!=1&&f.push(",",h.call(c[2],"HH:mm"));if(g){f.push(" - ",h.call(c[3],i18n.xgcalendar.dateformat.Md3)," (",o[c[3].getDay()],")");c[4]!=1&&f.push(",",h.call(c[3],"HH:mm"))}a("#bbit-cs-buddle_wraper #bbit-cs-buddle-timeshow").html(f.join(""));
f=f.slice(0);f[5]=y(f[5]);if(f.length==13)f[12]=y(f[12]);else if(c[13]=="5"){g=y(h.call(c[3],"HH:mm"));f.push(" - ",g)}a("#bbit-cs-buddle_wraper #bbit-cs-buddle-timeshow_12").html(f.join(""));a("#bbit-cs-buddle_wraper #bbit-cs-what").attr("title",i18n.xgcalendar.click_to_detail);a("#bbit-cs-buddle_wraper #bbit-cs-delete").text(i18n.xgcalendar.i_delete);a("#bbit-cs-buddle_wraper #bbit-cs-editLink").text(i18n.xgcalendar.update_detail);a("#bbit-cs-buddle_wraper #event_location").text(c[9]);a("#bbit-cs-buddle_wraper #event_description").text(c[12]);
a("#bbit-cs-buddle_wraper #bbit-cs-what").text(c[1]);a("#bbit-cs-buddle_wraper #bbit-cs-id").val(c[0]);a("#bbit-cs-buddle_wraper #event_name_container").attr("javascript:void(0);");a("#bbit-cs-buddle_wraper .view_more_button").attr("href","/event/details/index/"+c[0]);a("#bbit-cs-buddle_wraper #medication_data_container").hide();if(c[6]=="0"){a("#bbit-cs-buddle_wraper .event_repeat_mode").hide();a("#bbit-cs-buddle_wraper .event_repeat_mode.oneday_mode").show()}else if(c[6]=="1"){a("#bbit-cs-buddle_wraper .event_repeat_mode").hide();
a("#bbit-cs-buddle_wraper .event_repeat_mode.repeat_mode").show()}if(c[13]=="4"){a("#bbit-cs-buddle_wraper .event_repeat_mode").hide();a("#bbit-cs-buddle_wraper #event_location_container").hide();a("#bbit-cs-buddle_wraper .event_repeat_mode.reminder_mode").show();a("#bbit-cs-buddle_wraper .event_repeat_mode.reminder_mode .event_type_txt").hide();c[6]=="1"?a("#bbit-cs-buddle_wraper .event_repeat_mode.reminder_mode .event_type_txt.repeat_mode_txt").show():a("#bbit-cs-buddle_wraper .event_repeat_mode.reminder_mode .event_type_txt.oneday_mode_txt").show();
a("#bbit-cs-buddle_wraper #team_task_details").hide();a("#bbit-cs-buddle_wraper #event_description").show();a("#bbit-cs-buddle_wraper #event_name_container").attr("href",c[19])}else if(c[13]=="5"){a("#bbit-cs-buddle_wraper #event_location_container").hide();a("#bbit-cs-buddle_wraper .event_repeat_mode").hide();a("#bbit-cs-buddle_wraper .carecalendar_mode").show();a("#bbit-cs-buddle_wraper .view_more_button").attr("href",c[19]);a("#bbit-cs-buddle_wraper #event_description").hide();a("#bbit-cs-buddle_wraper #details_popup_team_name").text(c[22]);
a("#bbit-cs-buddle_wraper #details_popup_team_name").attr("href","/myteam/"+c[23]);a("#bbit-cs-buddle_wraper #event_name_container").attr("href",c[19]);a("#bbit-cs-buddle_wraper #details_popup_status").text(c[21]);if(c[16]==0||c[16]==3)a("#bbit-cs-buddle_wraper #details_popup_assigned_to").parent().parent().hide();else{a("#bbit-cs-buddle_wraper #details_popup_assigned_to").parent().parent().show();a("#bbit-cs-buddle_wraper #details_popup_assigned_to").text(c[15]);a("#bbit-cs-buddle_wraper #details_popup_assigned_to").attr("href",
"/profile/"+c[15])}a("#bbit-cs-buddle_wraper #details_popup_task_type").text(c[17]);a("#bbit-cs-buddle_wraper #details_popup_task_icon").removeAttr("class");a("#bbit-cs-buddle_wraper #details_popup_task_icon").addClass("task_type");a("#bbit-cs-buddle_wraper #details_popup_task_icon").addClass("task_"+c[17].toLowerCase().replace(/\s/g,"_"));a("#bbit-cs-buddle_wraper #details_popup_created_by").text(c[20]);a("#bbit-cs-buddle_wraper #details_popup_created_by").attr("href","/profile/"+c[20]);a("#bbit-cs-buddle_wraper #team_task_details").show()}else if(c[13]==
"6"){a("#bbit-cs-buddle_wraper .event_repeat_mode").hide();a("#bbit-cs-buddle_wraper #event_location_container").hide();a("#bbit-cs-buddle_wraper .event_repeat_mode.appointment").show();a("#bbit-cs-buddle_wraper #medication_data_container").show();a("#bbit-cs-buddle_wraper .event_repeat_mode.appointment .event_type_txt").hide();c[6]=="1"?a("#bbit-cs-buddle_wraper .event_repeat_mode.appointment .event_type_txt.repeat_mode_txt").show():a("#bbit-cs-buddle_wraper .event_repeat_mode.appointment .event_type_txt.oneday_mode_txt").show();
a("#bbit-cs-buddle_wraper #team_task_details").hide();a("#bbit-cs-buddle_wraper #event_description").show();a("#bbit-cs-buddle_wraper #event_name_container").attr("href",c[19]);a("#bbit-cs-buddle_wraper .view_more_button").attr("href","/scheduler")}else if(c[13]=="7"){f=JSON.parse(c[24]);a("#bbit-cs-buddle_wraper .event_repeat_mode").hide();a("#bbit-cs-buddle_wraper #event_location_container").hide();a("#bbit-cs-buddle_wraper .event_repeat_mode.medication_mode").show();a("#bbit-cs-buddle_wraper #medication_data_container").show();
a("#bbit-cs-buddle_wraper #med_details").html(f.dosage_text);a("#bbit-cs-buddle_wraper #med_rep_details").html(f.timing_text);a("#bbit-cs-buddle_wraper #team_task_details").hide();a("#bbit-cs-buddle_wraper #event_description").show();a("#bbit-cs-buddle_wraper #event_name_container").attr("href",c[19]);a("#bbit-cs-buddle_wraper .view_more_button").attr("href","/scheduler")}else{a("#bbit-cs-buddle_wraper #event_description").show();a("#bbit-cs-buddle_wraper #team_task_details").hide();a("#bbit-cs-buddle_wraper #event_name_container").attr("href",
"/event/details/index/"+c[0]);a("#bbit-cs-buddle_wraper #event_location_container").show()}e.data("cdata",c);e.css({visibility:"visible"});a(k).popover({placement:"auto",trigger:"manual",title:"",animation:false,delay:{show:"0",hide:"0"},html:true,content:function(){return a("#bbit-cs-buddle_wraper").html()},template:'<div class="popover"><div class="arrow"></div><div class="popover-content"></div></div>',container:"#calendar_body_wraper"});a(k).on("hidden.bs.popover",function(){});a(k).on("show.bs.popover",
function(){});a(k).on("shown.bs.popover",function(){a(".edit_reminder_button").bind("click",function(){ea(c[2],c[3],0,null,c);d.EditCmdhandler?d.EditCmdhandler&&a.isFunction(d.EditCmdhandler)&&d.EditCmdhandler.call(this,a(".popover #bbit-cs-buddle").data("cdata")):alert("EditCmdhandler"+i18n.xgcalendar.i_undefined);a("#bbit-cs-buddle").css("visibility","hidden");return false})});a(document).mouseup(function(c){var e=a(".popover"),f=a(".bubble-closebutton");!e.is(c.target)&&e.has(c.target).length===
0?O():f.is(c.target)&&O()});a(k).popover("show")}else d.ViewCmdhandler?d.ViewCmdhandler&&a.isFunction(d.ViewCmdhandler)&&d.ViewCmdhandler.call(this,c):alert("ViewCmdhandler"+i18n.xgcalendar.i_undefined);else alert(i18n.xgcalendar.data_format_error);return false}function ma(m,c,k){if(d.quickUpdateUrl!=""&&m[8]==1&&d.readonly!=true){if(d.isloading)return false;d.isloading=true;var e=m[0],f=m[2],g=m[3],m=parseFloat(a("#user_timezone_offset").val()),m=[{name:"calendarId",value:e},{name:"CalendarStartTime",
value:h.call(c,i18n.xgcalendar.dateformat.fulldayvalue+" HH:mm")},{name:"CalendarEndTime",value:h.call(k,i18n.xgcalendar.dateformat.fulldayvalue+" HH:mm")},{name:"timezone",value:m}],i;if(d.quickUpdateHandler&&a.isFunction(d.quickUpdateHandler))d.quickUpdateHandler.call(this,m);else{d.onBeforeRequestData&&d.onBeforeRequestData(4);a.post(d.quickUpdateUrl,m,function(a){if(a){if(a.IsSuccess==true)d.isloading=false;else{d.onRequestDataError&&d.onRequestDataError(4,a);d.isloading=false;i=ka(e,true);i[2]=
f;i[3]=g;la(i);w();i=null}d.onAfterRequestData&&d.onAfterRequestData(4)}},"json");if(i=ka(e,true)){i[2]=c;i[3]=k}la(i);w()}}}function ea(m,c,k,e,f){if(!(!d.quickAddHandler&&d.quickAddUrl==""||d.readonly)){if(a("#bbit-cal-buddle").css("visibility")=="hidden"){a("#bbit-cal-editLink").text(i18n.xgcalendar.update_detail);a("#bbit-cal-quickAddBTN").val(i18n.xgcalendar.create_event);a("#cb_example").text(i18n.xgcalendar.example);a("#cb_key_content").text(i18n.xgcalendar.content);a("#cb_key_time").text(i18n.xgcalendar.time);
e=false;if(typeof f!="undefined")if(f[13]==4){a("#new_event_category").val(1);a('.select-event-type a[href="#add_calendar_event_form"]').tab("show");a("#add_type_event_2_wraper").hide();a("#add_type_event_3_wraper").hide();e=true;a(".cerateReminderDialog .modal-title.outer-pop-up").html("Edit Reminder");a("#event_id").val(f[0]);a("#Subject").val(f[1]);a("#Description").val(f[12]);var g=f[2].getMonth()+1,g=new Date(g+"/"+f[2].getDate()+"/"+f[2].getFullYear());a("#stpartdate").datepicker("setDate",
g);a("#stparttime").val(y(f[2].getHours()+":"+f[2].getMinutes()));a("#stparttime24").val(f[2].getHours()+":"+f[2].getMinutes());a("#etparttime").val(y(f[3].getHours()+":"+f[3].getMinutes()));a("#etparttime24").val(f[3].getHours()+":"+f[3].getMinutes());a("#CalendarForm .repeat_radio").prop("checked",false);if(f[6]!=1){a("#CalendarForm #no_repeat_chk").prop("checked",true);a("#CalendarForm #repeat_event_fields").addClass("hide");a("#CalendarForm #EventEndDate").attr("disabled","disabled")}else{extra_data=
JSON.parse(f[24]);a("#CalendarForm #stpartdate").datepicker("setDate",new Date(extra_data.start_date));a("#CalendarForm #repeat_chk").prop("checked",true);a("#CalendarForm #repeat_event_fields").removeClass("hide");a("#CalendarForm #EventRepeatMode").val(extra_data.repeat_mode);a("#CalendarForm #EventRepeatInterval").val(extra_data.repeat_interval);a("#CalendarForm #interval_type").text(extra_data.interval_text);a("#CalendarForm .repeat_end_type_chk").prop("checked",false);if(extra_data.repeat_end_type==
3){a("#CalendarForm #end_on_chk").prop("checked",true);a("#CalendarForm #EventEndDate").removeAttr("disabled");if(a("#CalendarForm #EventEndDate").hasClass("hasDatepicker")){a("#CalendarForm #EventEndDate").datepicker("option","minDate",new Date(a("#stpartdate").val()));a("#CalendarForm #EventEndDate").datepicker("setDate",new Date(extra_data.end_date))}else a("#CalendarForm #EventEndDate").datepicker({minDate:new Date(a("#stpartdate").val()),defaultDate:new Date(extra_data.end_date)})}else{a("#CalendarForm #never_end_chk").prop("checked",
true);a("#CalendarForm #EventEndDate").attr("disabled","disabled")}}}else{if(f[13]==6){a("#new_event_category").val(3);e=true;a('.select-event-type a[href="#add_appoinment_form"]').tab("show");a("#add_type_event_2_wraper").hide();a("#add_type_event_1_wraper").hide();a("#add_type_event_2_wraper").hide();a(".cerateReminderDialog .modal-title.outer-pop-up").html("Edit Appointment");a("#AppoinmentFormId").val(f[0]);a("#doctor_name").val(f[1]);a("#appoinment_reason").val(f[12]);g=f[2].getMonth()+1;a("#appoinment_date").val(g+
"/"+f[2].getDate()+"/"+f[2].getFullYear());a("#appoinment_time").val(y(f[2].getHours()+":"+f[2].getMinutes()));if(f[6]!=1){a("#AppoinmentForm #appt_no_repeat_chk").prop("checked",true);a("#AppoinmentForm #appt_repeat_event_fields").addClass("hide");a("#AppoinmentForm #ApptEndDate").attr("disabled","disabled")}else{extra_data=JSON.parse(f[24]);a("#AppoinmentForm #appoinment_date").datepicker("setDate",new Date(extra_data.start_date));a("#AppoinmentForm #appt_repeat_chk").prop("checked",true);a("#AppoinmentForm #appt_repeat_event_fields").removeClass("hide");
a("#AppoinmentForm #ApptRepeatMode").val(extra_data.repeat_mode);a("#AppoinmentForm #ApptRepeatInterval").val(extra_data.repeat_interval);a("#AppoinmentForm #appt_interval_type").text(extra_data.interval_text);a("#AppoinmentForm .appt_repeat_end_type_chk").prop("checked",false);if(extra_data.repeat_end_type==3){a("#AppoinmentForm #appt_end_on_chk").prop("checked",true);a("#AppoinmentForm #ApptEndDate").removeAttr("disabled");if(a("#AppoinmentForm #ApptEndDate").hasClass("hasDatepicker")){a("#AppoinmentForm #ApptEndDate").datepicker("option",
"minDate",new Date(a("#appoinment_date").val()));a("#AppoinmentForm #ApptEndDate").datepicker("setDate",new Date(extra_data.end_date))}else a("#AppoinmentForm #ApptEndDate").datepicker({minDate:new Date(a("#appoinment_date").val()),defaultDate:new Date(extra_data.end_date)});console.log("end on date type")}else{extra_data.repeat_end_type==1?console.log("no end type"):console.log("default type");a("#AppoinmentForm #appt_never_end_chk").prop("checked",true);a("#AppoinmentForm #ApptEndDate").attr("disabled",
"disabled")}}}}else{a("#add_type_event_1_wraper").show();a("#add_type_event_2_wraper").show();a("#add_type_event_3_wraper").show();a('.select-event-type a[href="#add_calendar_event_form"]').tab("show");a(".cerateReminderDialog .modal-title.outer-pop-up").html("Add New Calendar Entry");a("#event_id").val("");a("#Subject").val("");a("#Description").val("");a("#AppoinmentFormId").val("");a("#doctor_name").val("");a("#Description").val("");g=m.getMonth()+1;a("#stpartdate").val(g+"/"+m.getDate()+"/"+m.getFullYear());
a("#stparttime").val(y(m.getHours()+":"+m.getMinutes()));a("#stparttime24").val(m.getHours()+":"+m.getMinutes());a("#etparttime").val(y(c.getHours()+":"+c.getMinutes()));a("#etparttime24").val(c.getHours()+":"+c.getMinutes());if(d.view=="month"){a("#stparttime").val("12:00 am");a("#stparttime24").val("00:00");a("#etparttime").val("12:30 pm");a("#etparttime24").val("23:30")}}e==false&&a("#delete_event_button").hide();e==true&&a("#delete_event_button").show();a("#create_calendar_reminder_dialog").modal("show");
a("#create_calendar_reminder_dialog").on("shown.bs.modal",function(){O()});a("#create_calendar_reminder_dialog").on("show.bs.modal",function(){O();a(".form-group, .form-group-col").removeClass("error");a(".help-block").remove();a("#event_type_popover").appendTo("body");a("#event_type_popover").css("z-index","1550");a("#Subject").focus();a("#subject_error_message").hide();a("#time_error_message").hide();a("#cal-month-cc").css("visibility","hidden");O()});a(".cancel_modal_btn").click(function(){a(".drag-chip").remove()});
a("#create_calendar_reminder_dialog").on("hidden.bs.modal",function(){a(".drag-chip").remove();a(".datepicker").datepicker()&&a(".datepicker").datepicker("hide");a("#online_event_fields, #onsite_event_fields").addClass("hide");a("#repeat_event_fields, #appt_repeat_event_fields").addClass("hide");a("#CalendarForm")[0].reset();a("#AppoinmentForm")[0].reset();a("#eventForm")[0].reset();a(".help-block").remove()});a("#bbit-cal-quickAddBTN");a("#bbit-cal-editLink");a("#bubbleClose1, #bubbleClose2").click(function(){a(".rb-o").popover("hide");
a("#bbit-cal-buddle").css("visibility","hidden");fa()})}f=R(m,c,!k,true);a("#bbit-cal-buddle-timeshow").html(f);f=a("#bbit-cal-what").val("");a("#bbit-cal-allday").val(k?"1":"0");a("#bbit-cal-start").val(h.call(m,i18n.xgcalendar.dateformat.fulldayvalue+" HH:mm"));a("#bbit-cal-end").val(h.call(c,i18n.xgcalendar.dateformat.fulldayvalue+" HH:mm"));f.blur().focus();initDefaultVariables();return false}}function O(){a(".rb-o").each(function(){a(this).popover("destroy")});a(".popover").remove();a("#bbit-cs-buddle").css("visibility",
"hidden");a(".rb-o").each(function(){a(this).attr("title",a(this).data("original-title"))})}function y(a){var c=[],c=a.split(":"),a=parseInt(c[0]),c=c[1],d=0,e="am";if(a==0)d=12;else if(a<12){d=a<10?"0"+a:a;e="am"}else if(a>=12){d=a-12==0?12:a-12;e="pm";d=d<10?"0"+d:d}c=="0"&&(c="00");return d+":"+c+" "+e}function V(a){var a=a.split(" "),c=a[0].split(":"),d=parseInt(c[0]),c=parseInt(c[1]);a[1]=="am"?d==12&&(d=0):a[1]=="pm"&&(d==12?d=12:d<12&&(d=d+12));return d+":"+c}function ja(a){var a=a.split(" "),
c=a[0].split(i18n.xgcalendar.dateformat.separator),d=a[1].split(":"),a=c[i18n.xgcalendar.dateformat.year_index],e=c[i18n.xgcalendar.dateformat.month_index].indexOf("0")==0?c[i18n.xgcalendar.dateformat.month_index].substr(1,1):c[i18n.xgcalendar.dateformat.month_index],c=c[i18n.xgcalendar.dateformat.day_index].indexOf("0")==0?c[i18n.xgcalendar.dateformat.day_index].substr(1,1):c[i18n.xgcalendar.dateformat.day_index],f=d[0].indexOf("0")==0?d[0].substr(1,1):d[0],d=d[1].indexOf("0")==0?d[1].substr(1,1):
d[1];return new Date(a,parseInt(e)-1,c,f,d)}function ka(m,c){if(d.eventItems&&d.eventItems.length>0){for(var k=d.eventItems.length,e=-1,f=0;f<k;f++)if(d.eventItems[f][0]==m){e=f;break}if(e>=0){k=d.eventItems[e];if(c){e=a.grep(d.eventItems,function(a){return a[0]!=m});d.eventItems=e}return k}}return null}function la(a,c){var k=0;if(c)k=1;else if(d.eventItems&&d.eventItems.length>0){var e=d.eventItems.length,f=a[2],g=f.getTime()-d.eventItems[0][2].getTime(),i=d.eventItems[e-1][2].getTime()-f.getTime();
if(g<0||g-i<0)for(g=0;g<e;g++){if(d.eventItems[g][2]>=f){c=g;break}}else if(i<0)c=e;else for(g=e-1;g>=0;g--)if(d.eventItems[g][2]<f){c=g+1;break}}else c=0;d.eventItems&&d.eventItems.length>0?c==d.eventItems.length?d.eventItems.push(a):d.eventItems.splice(c,k,a):d.eventItems=[a];return c}function ia(){return false}function fa(){if(W){W();W=null}}function M(m,c){var k=a(this);fa();switch(m){case "dw1":z={type:1,target:k,sx:c.pageX,sy:c.pageY};break;case "dw2":var e=k.width(),f=k.height(),g=k.offset(),
i=g.left,g=g.top,h=d.view=="day"?1:7,n=e%h,e=parseInt(e/h);n>h/2+1&&e++;for(var n=[],l=[],j=0;j<h;j++)n.push({s:j*e+i,e:(j+1)*e+i});l.push({s:g,e:g+f});z={type:2,target:k,sx:c.pageX,sy:c.pageY,pw:e,xa:n,ya:l,h:f};break;case "dw3":var i=k.parent().attr("id").replace("tgCol",""),f=k.parent(),g=f.offset(),e=f.width()+10,f=k.height(),o=U(k);z={type:4,target:k,sx:c.pageX,sy:c.pageY,pXMin:g.left,pXMax:g.left+e,pw:e,h:f,cdi:parseInt(i),fdi:parseInt(i),data:o};break;case "dw4":f=k.height();o=U(k);z={type:5,
target:k,sx:c.pageX,sy:c.pageY,h:f,data:o};break;case "dw5":o=a("#weekViewAllDaywk");e=o.width();f=o.height();g=o.offset();o=k.offset();i=g.left;g=g.top;h=7;n=e%h;e=parseInt(e/h);n>h/2+1&&e++;for(var n=[],l=[],t=0,j=0;j<h;j++){n.push({s:j*e+i,e:(j+1)*e+i});o.left>=n[j].s&&o.left<n[j].e&&(t=j)}i={x:t,y:0,di:t};l.push({s:g,e:g+f});o=U(k);g=A("d",o[2],o[3])+1;z={type:6,target:k,sx:c.pageX,sy:c.pageY,data:o,xa:n,ya:l,fdi:i,h:f,dp:g,pw:e};break;case "m1":e=k.width();g=k.offset();i=g.left;g=g.top;h=7;t=
k.children().length;n=e%h;e=parseInt(e/h);n>h/2+1&&e++;f=a("#mvrow_0").height();n=[];for(j=0;j<h;j++)n.push({s:j*e+i,e:(j+1)*e+i});n=[];l=[];for(j=0;j<h;j++)n.push({s:j*e+i,e:(j+1)*e+i});for(j=0;j<t;j++)l.push({s:j*f+g,e:(j+1)*f+g});z={type:3,target:k,sx:c.pageX,sy:c.pageY,pw:e,xa:n,ya:l,h:f};break;case "m2":n=a("#mvrow_0");f=a("#mvrow_1");e=n.width();g=n.offset();f=f.offset();o=k.offset();f=f.top-g.top;i=g.left;g=g.top;h=7;t=n.parent().children().length;n=e%h;e=parseInt(e/h);n>h/2+1&&e++;for(var n=
[],l=[],p=0,w=0,j=0;j<h;j++){n.push({s:j*e+i,e:(j+1)*e+i});o.left>=n[j].s&&o.left<n[j].e&&(p=j)}for(j=0;j<t;j++){l.push({s:j*f+g,e:(j+1)*f+g});o.top>=l[j].s&&o.top<l[j].e&&(w=j)}i={x:p,y:w,di:w*7+p};o=U(k);g=A("d",o[2],o[3])+1;z={type:7,target:k,sx:c.pageX,sy:c.pageY,data:o,xa:n,ya:l,fdi:i,h:f,dp:g,pw:e}}a("body").noSelect()}function ua(m){if(z){var c=z;switch(c.type){case 1:var k=G(),e=k.getTime();tp=c.target.offset().top;if(!c.cpwrap){var m=sa(c.sy,c.sy+42,tp),k=K(m.sh,m.sm),f=null,f=N(m.sh,m.sm,
m.eh,m.em,m.h);c.cpwrap=a("<div class='ca-evpi drag-chip-wrapper' style='top:"+k+"px'/>").html(f);a(c.target).find("div.tg-col-overlaywrapper").append(c.cpwrap);c.cgh=m}m=c.cpwrap.offset();m.left=m.left+30;c.cpwrap.attr("id",e);k=ja(c.target.attr("abbr")+" "+c.cgh.sh+":"+c.cgh.sm);f=ja(c.target.attr("abbr")+" "+c.cgh.eh+":"+c.cgh.em);W=function(){a("#"+e).remove();a("#bbit-cal-buddle").css("visibility","hidden")};d.calendarType==3&&ea(k,f,false,m);break;case 2:case 3:var f=m.srcElement||m.target,
k=G(),g=k.getTime();if(!c.lasso){if(a(f).hasClass("monthdayshow")){pa.call(a(f).parent()[0],m);break}c.fdi=c.sdi=P(c.xa,c.ya,c.sx,c.sy);c.lasso=a("<div style='z-index: 10; display: block' class='drag-lasso-container'/>");a(document.body).append(c.lasso);X(c.lasso,c.sdi,c.fdi,c.xa,c.ya,c.h)}c.lasso.attr("id",g);k=Math.min(c.fdi.di,c.sdi.di);c=Math.max(c.fdi.di,c.sdi.di);f=d.vstart;k=i("d",k,f);f=i("d",c,f);W=function(){a("#"+g).remove()};d.calendarType==3&&ea(k,f,true,{left:m.pageX,top:m.pageY});break;
case 4:if(c.cpwrap){k=i("d",c.cdi,d.vstart);f=i("d",c.cdi,d.vstart);m=ca(c.ny,c.ny+c.h);k.setHours(m.sh,m.sm);f.setHours(m.eh,m.em);if(k.getTime()==c.data[2].getTime()&&f.getTime()==c.data[3].getTime()){c.cpwrap.remove();c.target.show()}else ma(c.data,k,f)}break;case 5:if(c.cpwrap){k=new Date(c.data[2].toString());f=new Date(c.data[3].toString());m=ca(c.top,c.top+nh);k.setHours(m.sh,m.sm);f.setHours(m.eh,m.em);if(k.getTime()==c.data[2].getTime()&&f.getTime()==c.data[3].getTime()){c.cpwrap.remove();
c.target.show()}else ma(c.data,k,f)}break;case 6:case 7:if(c.lasso){c.cpwrap.remove();c.lasso.remove();k=new Date(c.data[2].toString());f=new Date(c.data[3].toString());m=i("d",c.cdi.di,d.vstart);m=A("d",k,m);k=i("d",m,k);f=i("d",m,f);(k.getTime()!=c.data[2].getTime()||f.getTime()!=c.data[3].getTime())&&ma(c.data,k,f)}}c=z=null;a("body").noSelect(false);return false}}function P(a,c,d,e){var f=0,g=0,i=0,h=0;if(a&&a.length!=0){i=a.length;if(d>=a[i-1].e)g=i-1;else for(h=0;h<i;h++)if(d>a[h].s&&d<=a[h].e){g=
h;break}}if(c&&c.length!=0){h=c.length;if(e>=c[h-1].e)f=h-1;else for(a=0;a<h;a++)if(e>c[a].s&&e<=c[a].e){f=a;break}}return{x:g,y:f,di:f*i+g}}function X(a,c,d,e,f,g){var i=c.di>d.di?c.di-d.di:d.di-c.di;i++;for(var h=c.di>d.di?d:c,c=e.length>0?e.length:1,d=f.length>0?f.length:1,n=[],l=e[0].e-e[0].s,j=h.x,h=h.y,o=Math.min(document.documentElement.clientWidth,e[c-1].e)-2;h<d&&i>0;){for(var t=e[j].s,p=j+i>c?c-j:i,j=l*p;t+j>=o;)j--;n.push(L(Aa,{left:t,top:f[h].s,height:g,width:j}));j=0;i=i-p;h++}a.html(n.join(""))}
function va(a,c,d,e){var f=c.pageX-6,c=c.pageY-4,g=a.width(),i=d[0].s+6,h=e[0].s+4,d=d[d.length-1].e-g-2,e=e[e.length-1].e-21-2;f>d&&(f=d);f<=i&&(f=i+1);c<=h&&(c=h+1);c>e&&(c=e);a.css({left:f,top:c})}var na={view:"week",weekstartday:1,theme:0,height:false,url:"",eventItems:[],method:"POST",showday:G(),onBeforeRequestData:false,onAfterRequestData:false,onRequestDataError:false,onWeekOrMonthToDay:false,quickAddHandler:false,quickAddUrl:"",quickUpdateUrl:"",quickDeleteUrl:"",autoload:false,readonly:false,
extParam:[],enableDrag:true,datestrshow:null,loadDateR:[],calendarType:3,filterType:0,statusFilter:null,needTypeFilter:null,assignedToFilter:null,teamId:0},ga=a("#gridEvent");ga.length==0&&(ga=a("<div id='gridEvent' style='display:none;'></div>").appendTo(document.body));var I=a(this),d=a.extend(na,d);if(d.quickUpdateUrl==null||d.quickUpdateUrl=="")d.enableDrag=false;var ra='<DIV style="WIDTH:${width};top:${top};left:${left};" title="${title}" class="chip chip${i} ${drag}"><div class="dhdV" style="display:none">${data}</div><DIV style="BORDER-BOTTOM-COLOR:${bdcolor}" class=ct>&nbsp;</DIV><DL style="BORDER-BOTTOM-COLOR:${bdcolor}; BACKGROUND-COLOR:${bgcolor1};BORDER-TOP-COLOR: ${bdcolor}; HEIGHT: ${height}px; BORDER-RIGHT-COLOR:${bdcolor}; BORDER-LEFT-COLOR:${bdcolor}"><DT style="BACKGROUND-COLOR:${bgcolor2};font-size: 10px !important;">${starttime} - ${endtime} ${icon}</DT><DD><SPAN>${content}</SPAN></DD><DIV class=\'resizer\' style=\'display:${redisplay}\'><DIV class=rszr_icon>&nbsp;</DIV></DIV></DL><DIV style="BORDER-BOTTOM-COLOR:${bdcolor}; BACKGROUND-COLOR:${bgcolor1}; BORDER-TOP-COLOR: ${bdcolor}; BORDER-RIGHT-COLOR: ${bdcolor}; BORDER-LEFT-COLOR:${bdcolor}" class=cb1>&nbsp;</DIV><DIV style="BORDER-BOTTOM-COLOR:${bdcolor}; BORDER-TOP-COLOR:${bdcolor}; BORDER-RIGHT-COLOR:${bdcolor}; BORDER-LEFT-COLOR:${bdcolor}" class=cb2>&nbsp;</DIV></DIV>',
za='<div class="rb-o ${eclass}" id="${id}" title="${title}" style="color:${color};"><div class="dhdV" style="display:none">${data}</div><div class="${extendClass} rb-m" style="background-color:${color}">${extendHTML}<div class="rb-i">${content}</div></div></div>',xa=[31,28,31,30,31,30,31,31,30,31,30,31],Aa="",z,W;I.empty();if(!d.height)d.height=document.documentElement.clientHeight;I.css("overflow-y","visible").height(d.height-8);if(d.url&&d.autoload){if(a("#showDate").val()){d.view="day";var na=
d,Y=a("#showDate").val();parseFloat(a("#user_timezone_offset").val());var wa=new Date,Y=Y.split("-");wa.setFullYear(Y[0],Y[1]-1,Y[2]);na.showday=wa}T()}else{w();l(d.vstart,d.vend)}a(".close_modal_buttons").click(function(){a("#new_event_category").val(1)});a("#save_event_button").click(function(){var m=Ladda.create(this);m.start();var c=parseInt(a("#new_event_category").val());if(d.isloading){m.stop();return false}d.isloading=true;if(c==1){a("#event_id").val();a("#Subject").val();a("#stpartdate").val();
var i=V(a("#stparttime").val()),e;e=V(a("#etparttime").val());if(i&&i){i=i.split(":");e=e.split(":");i=i[0]+"."+i[1];e=e[0]+"."+e[1];i=parseFloat(i);e=parseFloat(e);e=e>i?true:false}else e=false;a("#Description").val();if(a("#CalendarForm").valid()){if(e==false){a("#time_error_message").html("Please enter a valid time.");a("#time_error_message").addClass("error").show();a("#Subject").focus();d.isloading=false;m.stop();return false}a("#time_error_message").hide()}else{d.isloading=false;m.stop();return false}}e=
null;switch(c){case 1:e=a("#CalendarForm").serializeObject();e["data[CalendarForm][stparttime]"]=V(a("#stparttime").val());e["data[CalendarForm][etparttime]"]=V(a("#etparttime").val());e.event_category=c;break;case 2:e=a("#eventForm").serializeObject();typeof e["data[Event][zip]"]!="undefined"&&handleCountryZipValidation(a("#EventCountry"));if(a("#eventForm").valid()){i=a("#invite_friends_form_calendar").serializeObject();e=a.extend(e,i);e.event_category=c;typeof e["data[Event][guest_can_invite]"]==
"undefined"&&(e["data[Event][guest_can_invite]"]=0)}else{d.isloading=false;m.stop();return false}break;case 3:if(a("#AppoinmentForm").valid()){e=a("#AppoinmentForm").serializeObject();e.event_category=c;e["data[AppoinmentForm][appoinment_time]"]=V(e["data[AppoinmentForm][appoinment_time]"])}else{d.isloading=false;m.stop();return false}}if(d.extParam)for(c=0;c<d.extParam.length;c++)e[e.length]=d.extParam[c];if(d.quickAddHandler&&a.isFunction(d.quickAddHandler)){d.quickAddHandler.call(this,e);fa()}else{d.onBeforeRequestData&&
d.onBeforeRequestData(2);a.post(d.quickAddUrl,e,function(c){if(c)if(c.IsSuccess==true){m.stop();d.isloading=false;a("#new_event_category").val(1);a("#eventForm")[0].reset();a("#online_event_fields, #onsite_event_fields").addClass("hide");a("#EventName").val("");a("#create_calendar_reminder_dialog").modal("hide");w();T()}else{a("#new_event_category").val(1);bootbox.alert("Some error occured. Please try again.",function(){location.reload()});a("#calendar_date_div").addClass("error");a("#CalendarAddEventsForm_date_em_").removeClass("displayNone");
a("#CalendarAddEventsForm_date_em_").html("Please provide correct data.");d.isloading=false}},"json");fa();w();T()}});a("#delete_event_button").click(function(){a("#create_calendar_reminder_dialog").modal("hide");bootbox.confirm(i18n.xgcalendar.delete_event_message,function(i){if(i){i=a("#bbit-cal-buddle").data("cdata");d.DeleteCmdhandler&&a.isFunction(d.DeleteCmdhandler)?d.DeleteCmdhandler.call(this,i,ta):ta(0)}})});a("#createPersonalRemiderBtn").click(function(){var a=G(),a=roundTime(a);ea(a,a,
1,null)});a(document).mousemove(function(d){if(z){if(d.pageX<0||d.pageY<0||d.pageX>document.documentElement.clientWidth||d.pageY>=document.documentElement.clientHeight){ua(d);return false}var c=z;switch(c.type){case 1:var i=c.sy,e=d.pageY,f=e-i;if(f>11||f<-11||c.cpwrap){f==0&&(f=21);var g=f%21;if(g!=0){f=g>0?f+21-g:f-21-g;e=c.sy+f;f<0&&(i=i+21)}if(!c.tp)c.tp=a(c.target).offset().top;var d=sa(i,e,c.tp),h=K(d.sh,d.sm);if(c.cpwrap){if(c.cgh.sh!=d.sh||c.cgh.eh!=d.eh||c.cgh.sm!=d.sm||c.cgh.em!=d.em){g=
N(d.sh,d.sm,d.eh,d.em,d.h);c.cpwrap.css("top",h+"px").html(g)}}else{g=N(d.sh,d.sm,d.eh,d.em,d.h);g=a("<div class='ca-evpi drag-chip-wrapper' style='top:"+h+"px'/>").html(g);a(c.target).find("div.tg-col-overlaywrapper").append(g);c.cpwrap=g}c.cgh=d}break;case 2:var l=c.sx,h=d.pageX,n=h-l;if(n>5||n<-5||c.lasso){if(!c.lasso){c.lasso=a("<div style='z-index: 10; display: block' class='drag-lasso-container'/>");a(document.body).append(c.lasso)}if(!c.sdi)c.sdi=P(c.xa,c.ya,l,c.sy);g=P(c.xa,c.ya,h,d.pageY);
(!c.fdi||c.fdi.di!=g.di)&&X(c.lasso,c.sdi,g,c.xa,c.ya,c.h);c.fdi=g}break;case 3:l=c.sx;h=d.pageX;i=c.sy;e=d.pageY;n=h-l;f=e-i;if(n>5||n<-5||f<-5||f>5||c.lasso){if(!c.lasso){c.lasso=a("<div style='z-index: 10; display: block' class='drag-lasso-container'/>");a(document.body).append(c.lasso)}if(!c.sdi)c.sdi=P(c.xa,c.ya,l,i);g=P(c.xa,c.ya,h,e);(!c.fdi||c.fdi.di!=g.di)&&X(c.lasso,c.sdi,g,c.xa,c.ya,c.h);c.fdi=g}break;case 4:g=c.data;if(g!=null&&g[8]==1){l=c.sx;h=d.pageX;i=c.sy;e=d.pageY;n=h-l;f=e-i;if(n>
5||n<-5||f>5||f<-5||c.cpwrap){if(c.cpwrap){d=0;h<c.pXMin?d=-1:h>c.pXMax&&(d=1);if(d!=0){c.cdi=c.cdi+d;h=a("#tgOver"+c.cdi);if(h.length==1){c.pXMin=c.pXMin+c.pw*d;c.pXMax=c.pXMax+c.pw*d;h.append(c.cpwrap)}else c.cdi=c.cdi-d}h=c.top+f;d=h%21;d!=0&&(h=h-d);if(c.ny!=h){d=ca(h,h+c.h);g=N(d.sh,d.sm,d.eh,d.em,d.h,g[1],false,false,g[7]);c.cpwrap.css("top",h+"px").html(g)}}else{d={sh:g[2].getHours(),sm:g[2].getMinutes(),eh:g[3].getHours(),em:g[3].getMinutes(),h:c.h};c.target.hide();h=K(d.sh,d.sm);c.top=h;
g=N(d.sh,d.sm,d.eh,d.em,d.h,g[1],false,false,g[7]);g=a("<div class='ca-evpi drag-chip-wrapper' style='top:"+h+"px'/>").html(g);d=c.target.parent().attr("id").replace("tgCol","#tgOver");a(d).append(g);c.cpwrap=g}c.ny=h}}break;case 5:g=c.data;if(g!=null&&g[8]==1){i=c.sy;e=d.pageY;f=e-i;if(f!=0||c.cpwrap)if(c.cpwrap){nh=c.h+f;h=nh%21;nh=h>1?nh-h+21:nh-h;if(c.nh!=nh){K(g[2].getHours(),g[2].getMinutes());d=ca(c.top,c.top+nh);g=N(d.sh,d.sm,d.eh,d.em,d.h,g[1],"100%",true,g[7]);c.cpwrap.html(g)}c.nh=nh}else{d=
{sh:g[2].getHours(),sm:g[2].getMinutes(),eh:g[3].getHours(),em:g[3].getMinutes(),h:c.h};c.target.hide();h=K(d.sh,d.sm);c.top=h;g=N(d.sh,d.sm,d.eh,d.em,d.h,g[1],"100%",true,g[7]);g=a("<div class='ca-evpi drag-chip-wrapper' style='top:"+h+"px'/>").html(g);d=c.target.parent().attr("id").replace("tgCol","#tgOver");a(d).append(g);c.cpwrap=g}}break;case 6:l=c.sx;h=d.pageX;n=h-l;if(n>5||n<-5||c.lasso){if(!c.lasso){g=c.dp>1?(c.pw-4)*1.5:c.pw-4;f=c.target.clone();c.dp>1&&f.find("div.rb-i>span").prepend("("+
c.dp+" "+i18n.xgcalendar.day_plural+")&nbsp;");g=a("<div class='drag-event st-contents' style='width:"+g+"px'/>").append(f).appendTo(document.body);c.cpwrap=g;c.lasso=a("<div style='z-index: 10; display: block' class='drag-lasso-container'/>");a(document.body).append(c.lasso)}va(c.cpwrap,d,c.xa,c.ya);g=P(c.xa,c.ya,h,d.pageY);(!c.cdi||c.cdi.di!=g.di)&&X(c.lasso,g,{x:g.x,y:g.y,di:g.di+c.dp-1},c.xa,c.ya,c.h);c.cdi=g}break;case 7:l=c.sx;i=c.sy;h=d.pageX;e=d.pageY;n=h-l;f=e-i;if(n>5||n<-5||f>5||f<-5||
c.lasso){if(!c.lasso){g=c.dp>1?(c.pw-4)*1.5:c.pw-4;f=c.target.clone();c.dp>1&&f.find("div.rb-i>span").prepend("("+c.dp+" "+i18n.xgcalendar.day_plural+")&nbsp;");g=a("<div class='drag-event st-contents' style='width:"+g+"px'/>").append(f).appendTo(document.body);c.cpwrap=g;c.lasso=a("<div style='z-index: 10; display: block' class='drag-lasso-container'/>");a(document.body).append(c.lasso)}va(c.cpwrap,d,c.xa,c.ya);g=P(c.xa,c.ya,h,d.pageY);(!c.cdi||c.cdi.di!=g.di)&&X(c.lasso,g,{x:g.x,y:g.y,di:g.di+c.dp-
1},c.xa,c.ya,c.h);c.cdi=g}}}return false}).mouseup(ua);this[0].bcal={sv:function(a){if(a!=d.view){I.empty();d.view=a;w();da()}},rf:function(){T()},gt:function(a){a||(a=G());d.showday=a;w();da()},pv:function(){switch(d.view){case "day":d.showday=i("d",-1,d.showday);break;case "week":d.showday=i("w",-1,d.showday);break;case "month":d.showday=i("m",-1,d.showday)}w();da()},nt:function(){switch(d.view){case "day":d.showday=i("d",1,d.showday);break;case "week":d.showday=i("w",1,d.showday);break;case "month":var a=
d.showday.getDate();d.showday=i("m",1,d.showday);var c=d.showday.getDate();if(a!=c)d.showday=i("d",0-c,d.showday)}w();da()},go:function(){return d},so:function(i){d=a.extend(d,i)}};return this};a.fn.swtichView=function(a){return this.each(function(){this.bcal&&this.bcal.sv(a)})};a.fn.reload=function(){return this.each(function(){this.bcal&&this.bcal.rf()})};a.fn.gotoDate=function(a){return this.each(function(){this.bcal&&this.bcal.gt(a)})};a.fn.previousRange=function(){return this.each(function(){this.bcal&&
this.bcal.pv()})};a.fn.nextRange=function(){return this.each(function(){this.bcal&&this.bcal.nt()})};a.fn.BcalGetOp=function(){return this[0].bcal?this[0].bcal.go():null};a.fn.BcalSetOp=function(a){if(this[0].bcal)return this[0].bcal.so(a)};a.fn.serializeObject=function(){var d={},i=this.serializeArray();a.each(i,function(){if(d[this.name]){d[this.name].push||(d[this.name]=[d[this.name]]);d[this.name].push(this.value||"")}else d[this.name]=this.value||""});return d}})(jQuery);
function roundTime(a){30>a.getMinutes?a.setMinutes(30):(a.setMinutes(0),a.setHours(a.getHours()+1));return a}var CALENDAR_TYPE_ALL=1,CALENDAR_TYPE_ORDINARY_EVENTS=2,CALENDAR_TYPE_ORDINARY_AND_REMINDER_EVENTS=3,CALENDAR_TYPE_CARECALENDAR_EVENTS=4;
$(document).ready(function(){var a=parseInt($("#calendarType").val()),o=parseInt($("#teamId").val()),l="week";4==a&&(l="month");var o={view:l,theme:3,calendarType:a,teamId:o,filterType:0,assignedToFilter:null,needTypeFilter:null,statusFilter:null,EditCmdhandler:function(){},ViewCmdhandler:function(a){var h="";$.each(a,function(a,i){h+="["+a+"]: "+i+"\n"});alert(h)},onWeekOrMonthToDay:function(a){a&&a.datestrshow&&$("#txtdatetimeshow").text(a.datestrshow);$("#caltoolbar div.fcurrent").each(function(){$(this).removeClass("fcurrent")});
$("#showdaybtn").addClass("fcurrent")},onBeforeRequestData:function(){$("#errorpannel").hide();$("#loadingpannel").show();$("#refresh_img_container").hide()},onAfterRequestData:function(a){switch(a){case 1:$("#loadingpannel").hide();$("#refresh_img_container").show();break;case 2:case 3:case 4:$("#loadingpannel").show(),$("#refresh_img_container").hide(),window.setTimeout(function(){$("#loadingpannel").hide();$("#refresh_img_container").show()},2E3)}h&&h.datestrshow&&$("#txtdatetimeshow").text(h.datestrshow)},
onRequestDataError:function(){$("#errorpannel").show()},autoload:!0,enableDrag:!1,datestrshow:null,url:"/calendar/calendar/ajaxCalendar?method=list",quickAddUrl:"/calendar/calendar/ajaxCalendar?method=add",quickUpdateUrl:"/calendar/calendar/ajaxCalendar?method=update",quickDeleteUrl:"/calendar/calendar/ajaxCalendar?method=remove"},t=$("#calhead"),l=document.documentElement.clientHeight,t=t.height()+2;o.height=l-t;o.eventItems=[];var h=$("#gridcontainer").bcalendar(o).BcalGetOp();h&&h.datestrshow&&
$("#txtdatetimeshow").text(h.datestrshow);$("#caltoolbar").noSelect();$("#txtdatetimeshow").click(function(){$("#hdtxtshow").datepicker({picker:"#txtdatetimeshow",showtarget:$("#txtdatetimeshow"),onSelect:function(){var a=$("#hdtxtshow").datepicker("getDate");(a=$("#gridcontainer").gotoDate(a).BcalGetOp())&&a.datestrshow&&$("#txtdatetimeshow").text(a.datestrshow)}});$("#hdtxtshow").datepicker("show")});o=getiev();0<o&&$(document.body).addClass("ie ie"+o);$("#showdaybtn").click(function(){$("#caltoolbar div.fcurrent").each(function(){$(this).removeClass("fcurrent")});
$(this).addClass("fcurrent");var a=$("#gridcontainer").swtichView("day").BcalGetOp();a&&a.datestrshow&&$("#txtdatetimeshow").text(a.datestrshow)});$("#showweekbtn").click(function(){$("#caltoolbar div.fcurrent").each(function(){$(this).removeClass("fcurrent")});$(this).addClass("fcurrent");var a=$("#gridcontainer").swtichView("week").BcalGetOp();a&&a.datestrshow&&$("#txtdatetimeshow").text(a.datestrshow)});$("#showmonthbtn").click(function(){$("#caltoolbar div.fcurrent").each(function(){$(this).removeClass("fcurrent")});
$(this).addClass("fcurrent");var a=$("#gridcontainer").swtichView("month").BcalGetOp();a&&a.datestrshow&&$("#txtdatetimeshow").text(a.datestrshow)});$("#showreflashbtn").click(function(){$("#gridcontainer").reload()});$("#faddbtn").click(function(){OpenModelWindow("edit.php",{width:500,height:400,caption:"Create New Calendar"})});$("#showtodaybtn").click(function(){$("#caltoolbar div.fcurrent").each(function(){$(this).removeClass("fcurrent")});$("#showtodaybtn").addClass("fcurrent");var a=$("#gridcontainer").gotoDate().BcalGetOp();
$("#gridcontainer").swtichView("day").BcalGetOp();a&&a.datestrshow&&$("#txtdatetimeshow").text(a.datestrshow)});$("#sfprevbtn").click(function(){var a=$("#gridcontainer").previousRange().BcalGetOp();a&&a.datestrshow&&($("#txtdatetimeshow").text(a.datestrshow),$("#gridcontainer").reload())});$("#sfnextbtn").click(function(){var a=$("#gridcontainer").nextRange().BcalGetOp();a&&a.datestrshow&&($("#txtdatetimeshow").text(a.datestrshow),$("#gridcontainer").reload())});$("#assigned_to_filter, #need_type_filter, #status_filter").change(function(){var a=
$("#gridcontainer").BcalGetOp();a.assignedToFilter=$("#assigned_to_filter").val();a.needTypeFilter=$("#need_type_filter").val();a.statusFilter=$("#status_filter").val();$("#gridcontainer").reload()});$("#info_colorcodes_img").popover({placement:"auto",trigger:"hover",html:!0,content:function(){var h;h=4==a?$("#carecalendar_legend_container").html():$("#main_calendar_legend_container").html();return h},container:"body"});$("#ApptEndDate").datepicker({})});
try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e$$46){}var popUpWin;
function PopUpCenterWindow(a,o,l,t,h){var i=0;"undefined"==typeof t&&(t=!1);"undefined"==typeof h&&(h=0);"undefined"==typeof o&&(o=800);"undefined"==typeof l&&(l=600);var A=0,d=0;screen.width>=o&&(A=Math.floor((screen.width-o)/2));screen.height>=l&&(d=Math.floor((screen.height-l)/2));t?open(a,"","toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars="+h+",resizable=yes,copyhistory=yes,width="+o+",height="+l+",left="+A+", top="+d+",screenX="+A+",screenY="+d+""):(i&&(i.closed||i.close()),
i=open(a,"popUpWin","toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars="+h+",resizable=yes,copyhistory=yes,width="+o+",height="+l+",left="+A+", top="+d+",screenX="+A+",screenY="+d+""),i.focus())}function OpenModelWindow(a,o){var l;try{l=null!=parent&&null!=parent.$&&void 0!=parent.$.ShowIfrmDailog?parent.$.ShowIfrmDailog:$.ShowIfrmDailog}catch(t){l=$.ShowIfrmDailog}l(a,o)}function CloseModelWindow(a,o){parent.$.closeIfrm(a,o)}
function StrFormat(a,o){return a.replace(/\{([\d]+)\}/g,function(a,t){var h=o[t];return"undefined"!=typeof h?h instanceof Date?h.getTimezoneOffset():encodeURIComponent(h):""})}function fomartTimeShow1(a,o){if(0==a)return"12:"+o+" AM";if(12>a)return 10>a?"0"+a+":"+o+" AM":a+":"+o+" AM";if(12<=a)return a=0==a-12?12:a-12,10>a?"0"+a+":"+o+" PM":a+":"+o+" PM"}
function StrFormatNoEncode(a,o){return a.replace(/\{([\d]+)\}/g,function(a,t){var h=o[t];return"undefined"!=typeof h?h instanceof Date?h.getTimezoneOffset():h:""})}function getiev(){var a=window.navigator.userAgent.toLowerCase();$.browser.msie8=$.browser.msie&&/msie 8\.0/i.test(a);$.browser.msie7=$.browser.msie&&/msie 7\.0/i.test(a);$.browser.msie6=!$.browser.msie8&&!$.browser.msie7&&$.browser.msie&&/msie 6\.0/i.test(a);return $.browser.msie8?8:$.browser.msie7?7:$.browser.msie6?6:-1}
$(document).on("change","#CalendarForm #stpartdate",function(){var a=$("#CalendarForm #stpartdate").datepicker("getDate");$("#CalendarForm #EventEndDate").hasClass("hasDatepicker")?$("#CalendarForm #EventEndDate").datepicker("option","minDate",new Date(a)):$("#CalendarForm #EventEndDate").datepicker({minDate:new Date(a)})});
$(document).on("change",'[name="data[CalendarForm][repeat_end_type]"]',function(){$("#CalendarForm #EventRepeatOccurrences").attr("disabled","disabled").val("");$("#CalendarForm #EventEndDate").attr("disabled","disabled").val("");switch(parseInt($(this).val())){case REPEAT_END_AFTER:$("#CalendarForm #EventRepeatOccurrences").removeAttr("disabled");break;case REPEAT_END_DATE:var a=$("#CalendarForm #stpartdate").datepicker("getDate");$("#CalendarForm #EventEndDate").removeAttr("disabled");$("#CalendarForm #EventEndDate").datepicker("option",
"minDate",new Date(a))}});$(document).on("change","#CalendarForm .repeat_radio",function(){"1"===$(this).val()?($("#CalendarForm #repeat_event_fields").removeClass("hide"),$("#CalendarForm #one_day_event_fields").addClass("hide")):($("#CalendarForm #repeat_event_fields").addClass("hide"),$("#CalendarForm #one_day_event_fields").removeClass("hide"))});
$(document).on("change","#AppoinmentForm .repeat_radio",function(){"1"===$(this).val()?$("#AppoinmentForm #appt_repeat_event_fields").removeClass("hide"):$("#AppoinmentForm #appt_repeat_event_fields").addClass("hide")});
$(document).on("change","#AppoinmentForm #appoinment_date",function(){console.log("poda");var a=$("#AppoinmentForm #appoinment_date").datepicker("getDate");$("#AppoinmentForm #ApptEndDate").hasClass("hasDatepicker")?$("#AppoinmentForm #ApptEndDate").datepicker("option","minDate",new Date(a)):$("#AppoinmentForm #ApptEndDate").datepicker({minDate:new Date(a)})});
$(document).on("change",'[name="data[AppoinmentForm][repeat_end_type]"]',function(){$("#CalendarForm #EventRepeatOccurrences").attr("disabled","disabled").val("");$("#AppoinmentForm #ApptEndDate").attr("disabled","disabled").val("");var a=parseInt($(this).val()),o=$("#appoinment_date").datepicker("getDate");switch(a){case REPEAT_END_AFTER:$("#AppoinmentForm #ApptRepeatOccurrences").removeAttr("disabled");break;case REPEAT_END_DATE:$("#AppoinmentForm #ApptEndDate").datepicker("option","minDate",new Date(o)),
$("#AppoinmentForm #ApptEndDate").removeAttr("disabled")}});
$(document).on("change","#ApptRepeatMode",function(){$("#appt_repeat_interval_fields").addClass("hide");switch(parseInt($(this).val())){case REPEAT_MODE_DAILY:$("#appt_repeat_interval_fields").removeClass("hide");$("#appt_interval_type").html("days");break;case REPEAT_MODE_WEEKLY:$("#appt_repeat_interval_fields").removeClass("hide");$("#appt_interval_type").html("weeks");break;case REPEAT_MODE_MONTHLY:$("#appt_repeat_interval_fields").removeClass("hide");$("#appt_interval_type").html("months");break;
case REPEAT_MODE_YEARLY:$("#appt_repeat_interval_fields").removeClass("hide"),$("#appt_interval_type").html("years")}});