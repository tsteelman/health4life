(function(b){var h={formatInvalidInputErrorMsg:function(a){return"Invalid input value '"+a+"' passed in"},callingContextNotSliderInstance:"Calling context element does not have instance of Slider bound to it. Check your code to make sure the JQuery object returned from the call to the slider() initializer is calling the method"},e=function(a,d){var c=this.element=b(a).hide(),e=b(a)[0].style.width,f=!1,g=this.element.parent();!0===g.hasClass("slider")?(f=!0,this.picker=g):this.picker=b('<div class="slider"><div class="slider-track"><div class="slider-selection"></div><div class="slider-handle min-slider-handle"></div><div class="slider-handle max-slider-handle"></div></div><div id="tooltip" class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div><div id="tooltip_min" class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div><div id="tooltip_max" class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div></div>').insertBefore(this.element).append(this.element);
if(this.id=this.element.data("slider-id")||d.id)this.picker[0].id=this.id;if("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch)this.touchCapable=!0;g=this.element.data("slider-tooltip")||d.tooltip;this.tooltip=this.picker.find("#tooltip");this.tooltipInner=this.tooltip.find("div.tooltip-inner");this.tooltip_min=this.picker.find("#tooltip_min");this.tooltipInner_min=this.tooltip_min.find("div.tooltip-inner");this.tooltip_max=this.picker.find("#tooltip_max");this.tooltipInner_max=
this.tooltip_max.find("div.tooltip-inner");!0===f&&(this.picker.removeClass("slider-horizontal"),this.picker.removeClass("slider-vertical"),this.tooltip.removeClass("hide"),this.tooltip_min.removeClass("hide"),this.tooltip_max.removeClass("hide"));this.orientation=this.element.data("slider-orientation")||d.orientation;switch(this.orientation){case "vertical":this.picker.addClass("slider-vertical");this.stylePos="top";this.mousePos="pageY";this.sizePos="offsetHeight";this.tooltip.addClass("right")[0].style.left=
"100%";this.tooltip_min.addClass("right")[0].style.left="100%";this.tooltip_max.addClass("right")[0].style.left="100%";break;default:this.picker.addClass("slider-horizontal").css("width",e),this.orientation="horizontal",this.stylePos="left",this.mousePos="pageX",this.sizePos="offsetWidth",this.tooltip.addClass("top")[0].style.top=-this.tooltip.outerHeight()-14+"px",this.tooltip_min.addClass("top")[0].style.top=-this.tooltip_min.outerHeight()-14+"px",this.tooltip_max.addClass("top")[0].style.top=-this.tooltip_max.outerHeight()-
14+"px"}var k=this;b.each("min max step precision value reversed handle".split(" "),function(a,b){k[b]=typeof c.data("slider-"+b)!=="undefined"?c.data("slider-"+b):typeof d[b]!=="undefined"?d[b]:typeof c.prop(b)!=="undefined"?c.prop(b):0});this.value instanceof Array?f&&!this.range?this.value=this.value[0]:this.range=!0:this.range&&(this.value=[this.value,this.max]);this.selection=this.element.data("slider-selection")||d.selection;this.selectionEl=this.picker.find(".slider-selection");"none"===this.selection&&
this.selectionEl.addClass("hide");this.selectionElStyle=this.selectionEl[0].style;this.handle1=this.picker.find(".slider-handle:first");this.handle1Stype=this.handle1[0].style;this.handle2=this.picker.find(".slider-handle:last");this.handle2Stype=this.handle2[0].style;!0===f&&(this.handle1.removeClass("round triangle"),this.handle2.removeClass("round triangle hide"));-1!==["round","triangle","custom"].indexOf(this.handle)&&(this.handle1.addClass(this.handle),this.handle2.addClass(this.handle));this.offset=
this.picker.offset();this.size=this.picker[0][this.sizePos];this.formater=d.formater;this.tooltip_separator=d.tooltip_separator;this.tooltip_split=d.tooltip_split;this.setValue(this.value);this.handle1.on({keydown:b.proxy(this.keydown,this,0)});this.handle2.on({keydown:b.proxy(this.keydown,this,1)});if(this.touchCapable)this.picker.on({touchstart:b.proxy(this.mousedown,this)});this.picker.on({mousedown:b.proxy(this.mousedown,this)});"hide"===g?(this.tooltip.addClass("hide"),this.tooltip_min.addClass("hide"),
this.tooltip_max.addClass("hide")):"always"===g?(this.showTooltip(),this.alwaysShowTooltip=!0):(this.picker.on({mouseenter:b.proxy(this.showTooltip,this),mouseleave:b.proxy(this.hideTooltip,this)}),this.handle1.on({focus:b.proxy(this.showTooltip,this),blur:b.proxy(this.hideTooltip,this)}),this.handle2.on({focus:b.proxy(this.showTooltip,this),blur:b.proxy(this.hideTooltip,this)}));(this.enabled=d.enabled&&(void 0===this.element.data("slider-enabled")||!0===this.element.data("slider-enabled")))?this.enable():
this.disable();this.natural_arrow_keys=this.element.data("slider-natural_arrow_keys")||d.natural_arrow_keys};e.prototype={constructor:e,over:!1,inDrag:!1,showTooltip:function(){!1===this.tooltip_split?this.tooltip.addClass("in"):(this.tooltip_min.addClass("in"),this.tooltip_max.addClass("in"));this.over=!0},hideTooltip:function(){!1===this.inDrag&&!0!==this.alwaysShowTooltip&&(this.tooltip.removeClass("in"),this.tooltip_min.removeClass("in"),this.tooltip_max.removeClass("in"));this.over=!1},layout:function(){var a;
a=this.reversed?[100-this.percentage[0],this.percentage[1]]:[this.percentage[0],this.percentage[1]];this.handle1Stype[this.stylePos]=a[0]+"%";this.handle2Stype[this.stylePos]=a[1]+"%";if("vertical"===this.orientation)this.selectionElStyle.top=Math.min(a[0],a[1])+"%",this.selectionElStyle.height=Math.abs(a[0]-a[1])+"%";else{this.selectionElStyle.left=Math.min(a[0],a[1])+"%";this.selectionElStyle.width=Math.abs(a[0]-a[1])+"%";var b=this.tooltip_min[0].getBoundingClientRect(),c=this.tooltip_max[0].getBoundingClientRect();
b.right>c.left?(this.tooltip_max.removeClass("top"),this.tooltip_max.addClass("bottom")[0].style.top="18px"):(this.tooltip_max.removeClass("bottom"),this.tooltip_max.addClass("top")[0].style.top="-30px")}this.range?(this.tooltipInner.text(this.formater(this.value[0])+this.tooltip_separator+this.formater(this.value[1])),this.tooltip[0].style[this.stylePos]=(a[1]+a[0])/2+"%","vertical"===this.orientation?this.tooltip.css("margin-top",-this.tooltip.outerHeight()/2+"px"):this.tooltip.css("margin-left",
-this.tooltip.outerWidth()/2+"px"),"vertical"===this.orientation?this.tooltip.css("margin-top",-this.tooltip.outerHeight()/2+"px"):this.tooltip.css("margin-left",-this.tooltip.outerWidth()/2+"px"),this.tooltipInner_min.text(this.formater(this.value[0])),this.tooltipInner_max.text(this.formater(this.value[1])),this.tooltip_min[0].style[this.stylePos]=a[0]+"%","vertical"===this.orientation?this.tooltip_min.css("margin-top",-this.tooltip_min.outerHeight()/2+"px"):this.tooltip_min.css("margin-left",-this.tooltip_min.outerWidth()/
2+"px"),this.tooltip_max[0].style[this.stylePos]=a[1]+"%","vertical"===this.orientation?this.tooltip_max.css("margin-top",-this.tooltip_max.outerHeight()/2+"px"):this.tooltip_max.css("margin-left",-this.tooltip_max.outerWidth()/2+"px")):(this.tooltipInner.text(this.formater(this.value[0])),this.tooltip[0].style[this.stylePos]=a[0]+"%","vertical"===this.orientation?this.tooltip.css("margin-top",-this.tooltip.outerHeight()/2+"px"):this.tooltip.css("margin-left",-this.tooltip.outerWidth()/2+"px"))},
mousedown:function(a){if(!this.isEnabled())return!1;this.touchCapable&&"touchstart"===a.type&&(a=a.originalEvent);this.triggerFocusOnHandle();this.offset=this.picker.offset();this.size=this.picker[0][this.sizePos];a=this.getPercentage(a);if(this.range){var d=Math.abs(this.percentage[0]-a),c=Math.abs(this.percentage[1]-a);this.dragged=d<c?0:1}else this.dragged=0;this.percentage[this.dragged]=this.reversed?100-a:a;this.layout();if(this.touchCapable)b(document).on({touchmove:b.proxy(this.mousemove,this),
touchend:b.proxy(this.mouseup,this)});b(document).on({mousemove:b.proxy(this.mousemove,this),mouseup:b.proxy(this.mouseup,this)});this.inDrag=!0;a=this.calculateValue();this.element.trigger({type:"slideStart",value:a}).data("value",a).prop("value",a);this.setValue(a);return!0},triggerFocusOnHandle:function(a){0===a&&this.handle1.focus();1===a&&this.handle2.focus()},keydown:function(a,b){if(!this.isEnabled())return!1;var c;switch(b.which){case 37:case 40:c=-1;break;case 39:case 38:c=1}if(c){if(this.natural_arrow_keys&&
("vertical"===this.orientation&&!this.reversed||"horizontal"===this.orientation&&this.reversed))c*=-1;c=this.percentage[a]+c*this.percentage[2];100<c?c=100:0>c&&(c=0);this.dragged=a;this.adjustPercentageForRangeSliders(c);this.percentage[this.dragged]=c;this.layout();c=this.calculateValue();this.element.trigger({type:"slideStart",value:c}).data("value",c).prop("value",c);this.setValue(c,!0);this.element.trigger({type:"slideStop",value:c}).data("value",c).prop("value",c);return!1}},mousemove:function(a){if(!this.isEnabled())return!1;
this.touchCapable&&"touchmove"===a.type&&(a=a.originalEvent);a=this.getPercentage(a);this.adjustPercentageForRangeSliders(a);this.percentage[this.dragged]=this.reversed?100-a:a;this.layout();a=this.calculateValue();this.setValue(a,!0);return!1},adjustPercentageForRangeSliders:function(a){this.range&&(0===this.dragged&&this.percentage[1]<a?(this.percentage[0]=this.percentage[1],this.dragged=1):1===this.dragged&&this.percentage[0]>a&&(this.percentage[1]=this.percentage[0],this.dragged=0))},mouseup:function(){if(!this.isEnabled())return!1;
this.touchCapable&&b(document).off({touchmove:this.mousemove,touchend:this.mouseup});b(document).off({mousemove:this.mousemove,mouseup:this.mouseup});this.inDrag=!1;!1===this.over&&this.hideTooltip();var a=this.calculateValue();this.layout();this.element.data("value",a).prop("value",a).trigger({type:"slideStop",value:a});return!1},calculateValue:function(){var a;this.range?(a=[this.min,this.max],0!==this.percentage[0]&&(a[0]=Math.max(this.min,this.min+Math.round(this.diff*this.percentage[0]/100/this.step)*
this.step),a[0]=this.applyPrecision(a[0])),100!==this.percentage[1]&&(a[1]=Math.min(this.max,this.min+Math.round(this.diff*this.percentage[1]/100/this.step)*this.step),a[1]=this.applyPrecision(a[1])),this.value=a):(a=this.min+Math.round(this.diff*this.percentage[0]/100/this.step)*this.step,a<this.min?a=this.min:a>this.max&&(a=this.max),a=parseFloat(a),a=this.applyPrecision(a),this.value=[a,this.value[1]]);return a},applyPrecision:function(a){var b=this.precision||this.getNumDigitsAfterDecimalPlace(this.step);
return this.applyToFixedAndParseFloat(a,b)},getNumDigitsAfterDecimalPlace:function(a){a=(""+a).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return!a?0:Math.max(0,(a[1]?a[1].length:0)-(a[2]?+a[2]:0))},applyToFixedAndParseFloat:function(a,b){var c=a.toFixed(b);return parseFloat(c)},getPercentage:function(a){if(this.touchCapable&&("touchstart"===a.type||"touchmove"===a.type))a=a.touches[0];a=100*(a[this.mousePos]-this.offset[this.stylePos])/this.size;a=Math.round(a/this.percentage[2])*this.percentage[2];
return Math.max(0,Math.min(100,a))},getValue:function(){return this.range?this.value:this.value[0]},setValue:function(a,b){a||(a=0);this.value=this.validateInputValue(a);this.range?(this.value[0]=this.applyPrecision(this.value[0]),this.value[1]=this.applyPrecision(this.value[1]),this.value[0]=Math.max(this.min,Math.min(this.max,this.value[0])),this.value[1]=Math.max(this.min,Math.min(this.max,this.value[1]))):(this.value=this.applyPrecision(this.value),this.value=[Math.max(this.min,Math.min(this.max,
this.value))],this.handle2.addClass("hide"),this.value[1]="after"===this.selection?this.max:this.min);this.diff=this.max-this.min;this.percentage=0<this.diff?[100*(this.value[0]-this.min)/this.diff,100*(this.value[1]-this.min)/this.diff,100*this.step/this.diff]:[0,0,100];this.layout();if(!0===b){var c=this.range?this.value:this.value[0];this.element.trigger({type:"slide",value:c}).data("value",c).prop("value",c)}},validateInputValue:function(a){if("number"===typeof a)return a;if(a instanceof Array)return b.each(a,
function(a,b){if("number"!==typeof b)throw Error(h.formatInvalidInputErrorMsg(b));}),a;throw Error(h.formatInvalidInputErrorMsg(a));},destroy:function(){this.handle1.off();this.handle2.off();this.element.off().show().insertBefore(this.picker);this.picker.off().remove();b(this.element).removeData("slider")},disable:function(){this.enabled=!1;this.handle1.removeAttr("tabindex");this.handle2.removeAttr("tabindex");this.picker.addClass("slider-disabled");this.element.trigger("slideDisabled")},enable:function(){this.enabled=
!0;this.handle1.attr("tabindex",0);this.handle2.attr("tabindex",0);this.picker.removeClass("slider-disabled");this.element.trigger("slideEnabled")},toggle:function(){this.enabled?this.disable():this.enable()},isEnabled:function(){return this.enabled},setAttribute:function(a,b){this[a]=b},getAttribute:function(a){return this[a]}};var j={getValue:e.prototype.getValue,setValue:e.prototype.setValue,setAttribute:e.prototype.setAttribute,getAttribute:e.prototype.getAttribute,destroy:e.prototype.destroy,
disable:e.prototype.disable,enable:e.prototype.enable,toggle:e.prototype.toggle,isEnabled:e.prototype.isEnabled};b.fn.slider=function(a){if("string"===typeof a&&"refresh"!==a){var d=Array.prototype.slice.call(arguments,1),c;c=a;if(j[c]){var i=b(this).data("slider");if(!(i&&i instanceof e))throw Error(h.callingContextNotSliderInstance);c=j[c].apply(i,d);c="undefined"===typeof c?b(this):c}else throw Error("method '"+c+"()' does not exist for slider.");return c}var f=a;c=b(this);c.each(function(){var a=
b(this),c=a.data("slider"),d="object"===typeof f&&f;c&&!d&&(d={},b.each(b.fn.slider.defaults,function(a){d[a]=c[a]}));a.data("slider",new e(this,b.extend({},b.fn.slider.defaults,d)))});return c};b.fn.slider.defaults={min:0,max:10,step:1,precision:0,orientation:"horizontal",value:5,range:!1,selection:"before",tooltip:"show",tooltip_separator:":",tooltip_split:!1,natural_arrow_keys:!1,handle:"round",reversed:!1,enabled:!0,formater:function(a){return a}};b.fn.slider.Constructor=e})(window.jQuery);