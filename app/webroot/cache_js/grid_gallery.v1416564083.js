(function(){function f(){}function j(a,b){for(var d=a.length;d--;)if(a[d].listener===b)return d;return-1}function g(a){return function(){return this[a].apply(this,arguments)}}var i=f.prototype,l=this,h=l.EventEmitter;i.getListeners=function(a){var b,d,c=this._getEvents();if("object"==typeof a)for(d in b={},c)c.hasOwnProperty(d)&&a.test(d)&&(b[d]=c[d]);else b=c[a]||(c[a]=[]);return b};i.flattenListeners=function(a){var b,d=[];for(b=0;a.length>b;b+=1)d.push(a[b].listener);return d};i.getListenersAsObject=
function(a){var b,d=this.getListeners(a);return d instanceof Array&&(b={},b[a]=d),b||d};i.addListener=function(a,b){var d,c=this.getListenersAsObject(a),e="object"==typeof b;for(d in c)c.hasOwnProperty(d)&&-1===j(c[d],b)&&c[d].push(e?b:{listener:b,once:!1});return this};i.on=g("addListener");i.addOnceListener=function(a,b){return this.addListener(a,{listener:b,once:!0})};i.once=g("addOnceListener");i.defineEvent=function(a){return this.getListeners(a),this};i.defineEvents=function(a){for(var b=0;a.length>
b;b+=1)this.defineEvent(a[b]);return this};i.removeListener=function(a,b){var d,c,e=this.getListenersAsObject(a);for(c in e)e.hasOwnProperty(c)&&(d=j(e[c],b),-1!==d&&e[c].splice(d,1));return this};i.off=g("removeListener");i.addListeners=function(a,b){return this.manipulateListeners(!1,a,b)};i.removeListeners=function(a,b){return this.manipulateListeners(!0,a,b)};i.manipulateListeners=function(a,b,d){var c,e,h=a?this.removeListener:this.addListener,a=a?this.removeListeners:this.addListeners;if("object"!=
typeof b||b instanceof RegExp)for(c=d.length;c--;)h.call(this,b,d[c]);else for(c in b)b.hasOwnProperty(c)&&(e=b[c])&&("function"==typeof e?h.call(this,c,e):a.call(this,c,e));return this};i.removeEvent=function(a){var b,d=typeof a,c=this._getEvents();if("string"===d)delete c[a];else if("object"===d)for(b in c)c.hasOwnProperty(b)&&a.test(b)&&delete c[b];else delete this._events;return this};i.removeAllListeners=g("removeEvent");i.emitEvent=function(a,b){var d,c,e,h,v=this.getListenersAsObject(a);for(e in v)if(v.hasOwnProperty(e))for(c=
v[e].length;c--;)d=v[e][c],!0===d.once&&this.removeListener(a,d.listener),h=d.listener.apply(this,b||[]),h===this._getOnceReturnValue()&&this.removeListener(a,d.listener);return this};i.trigger=g("emitEvent");i.emit=function(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,b)};i.setOnceReturnValue=function(a){return this._onceReturnValue=a,this};i._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0};i._getEvents=function(){return this._events||
(this._events={})};f.noConflict=function(){return l.EventEmitter=h,f};"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return f}):"object"==typeof module&&module.exports?module.exports=f:this.EventEmitter=f}).call(this);
(function(f){function j(h){var a=f.event;return a.target=a.target||a.srcElement||h,a}var g=document.documentElement,i=function(){};g.addEventListener?i=function(h,a,b){h.addEventListener(a,b,!1)}:g.attachEvent&&(i=function(h,a,b){h[a+b]=b.handleEvent?function(){var a=j(h);b.handleEvent.call(b,a)}:function(){var a=j(h);b.call(h,a)};h.attachEvent("on"+a,h[a+b])});var l=function(){};g.removeEventListener?l=function(h,a,b){h.removeEventListener(a,b,!1)}:g.detachEvent&&(l=function(h,a,b){h.detachEvent("on"+
a,h[a+b]);try{delete h[a+b]}catch(d){h[a+b]=void 0}});g={bind:i,unbind:l};"function"==typeof define&&define.amd?define("eventie/eventie",g):f.eventie=g})(this);
(function(f,j){"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(g,i){return j(f,g,i)}):"object"==typeof exports?module.exports=j(f,require("eventEmitter"),require("eventie")):f.imagesLoaded=j(f,f.EventEmitter,f.eventie)})(this,function(f,j,g){function i(a,b){for(var c in b)a[c]=b[c];return a}function l(a,c,d){if(!(this instanceof l))return new l(a,c);"string"==typeof a&&(a=document.querySelectorAll(a));var h=[];if("[object Array]"===e.call(a))h=
a;else if("number"==typeof a.length)for(var g=0,r=a.length;r>g;g++)h.push(a[g]);else h.push(a);this.elements=h;this.options=i({},this.options);"function"==typeof c?d=c:i(this.options,c);d&&this.on("always",d);this.getImages();b&&(this.jqDeferred=new b.Deferred);var f=this;setTimeout(function(){f.check()})}function h(a){this.img=a}function a(a){this.src=a;r[a]=this}var b=f.jQuery,d=f.console,c=void 0!==d,e=Object.prototype.toString;l.prototype=new j;l.prototype.options={};l.prototype.getImages=function(){this.images=
[];for(var a=0,b=this.elements.length;b>a;a++){var c=this.elements[a];"IMG"===c.nodeName&&this.addImage(c);for(var c=c.querySelectorAll("img"),d=0,e=c.length;e>d;d++)this.addImage(c[d])}};l.prototype.addImage=function(a){a=new h(a);this.images.push(a)};l.prototype.check=function(){function a(i,g){return b.options.debug&&c&&d.log("confirm",i,g),b.progress(i),e++,e===h&&b.complete(),!0}var b=this,e=0,h=this.images.length;if(this.hasAnyBroken=!1,!h)return this.complete(),void 0;for(var i=0;h>i;i++){var g=
this.images[i];g.on("confirm",a);g.check()}};l.prototype.progress=function(a){this.hasAnyBroken=this.hasAnyBroken||!a.isLoaded;var b=this;setTimeout(function(){b.emit("progress",b,a);b.jqDeferred&&b.jqDeferred.notify&&b.jqDeferred.notify(b,a)})};l.prototype.complete=function(){var a=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var b=this;setTimeout(function(){if(b.emit(a,b),b.emit("always",b),b.jqDeferred)b.jqDeferred[b.hasAnyBroken?"reject":"resolve"](b)})};b&&(b.fn.imagesLoaded=function(a,
c){return(new l(this,a,c)).jqDeferred.promise(b(this))});h.prototype=new j;h.prototype.check=function(){var b=r[this.img.src]||new a(this.img.src);if(b.isConfirmed)return this.confirm(b.isLoaded,"cached was confirmed"),void 0;if(this.img.complete&&void 0!==this.img.naturalWidth)return this.confirm(0!==this.img.naturalWidth,"naturalWidth"),void 0;var c=this;b.on("confirm",function(a,b){return c.confirm(a.isLoaded,b),!0});b.check()};h.prototype.confirm=function(a,b){this.isLoaded=a;this.emit("confirm",
this,b)};var r={};return a.prototype=new j,a.prototype.check=function(){if(!this.isChecked){var a=new Image;g.bind(a,"load",this);g.bind(a,"error",this);a.src=this.src;this.isChecked=!0}},a.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},a.prototype.onload=function(a){this.confirm(!0,"onload");this.unbindProxyEvents(a)},a.prototype.onerror=function(a){this.confirm(!1,"onerror");this.unbindProxyEvents(a)},a.prototype.confirm=function(a,b){this.isConfirmed=!0;this.isLoaded=
a;this.emit("confirm",this,b)},a.prototype.unbindProxyEvents=function(a){g.unbind(a.target,"load",this);g.unbind(a.target,"error",this)},l});
(function(f){function j(){}function g(g){if(g){var h="undefined"==typeof console?j:function(a){console.error(a)};return g.bridget=function(a,b){b.prototype.option||(b.prototype.option=function(a){g.isPlainObject(a)&&(this.options=g.extend(!0,this.options,a))});g.fn[a]=function(d){if("string"==typeof d){for(var c=i.call(arguments,1),e=0,r=this.length;r>e;e++){var f=g.data(this[e],a);if(f)if(g.isFunction(f[d])&&"_"!==d.charAt(0)){if(f=f[d].apply(f,c),void 0!==f)return f}else h("no such method '"+d+
"' for "+a+" instance");else h("cannot call methods on "+a+" prior to initialization; attempted to call '"+d+"'")}return this}return this.each(function(){var c=g.data(this,a);c?(c.option(d),c._init()):(c=new b(this,d),g.data(this,a,c))})}},g.bridget}}var i=Array.prototype.slice;"function"==typeof define&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],g):g(f.jQuery)})(window);
(function(f){function j(h){var a=f.event;return a.target=a.target||a.srcElement||h,a}var g=document.documentElement,i=function(){};g.addEventListener?i=function(h,a,b){h.addEventListener(a,b,!1)}:g.attachEvent&&(i=function(h,a,b){h[a+b]=b.handleEvent?function(){var a=j(h);b.handleEvent.call(b,a)}:function(){var a=j(h);b.call(h,a)};h.attachEvent("on"+a,h[a+b])});var l=function(){};g.removeEventListener?l=function(h,a,b){h.removeEventListener(a,b,!1)}:g.detachEvent&&(l=function(h,a,b){h.detachEvent("on"+
a,h[a+b]);try{delete h[a+b]}catch(d){h[a+b]=void 0}});g={bind:i,unbind:l};"function"==typeof define&&define.amd?define("eventie/eventie",g):"object"==typeof exports?module.exports=g:f.eventie=g})(this);
(function(f){function j(a){"function"==typeof a&&(j.isReady?a():h.push(a))}function g(a){a="readystatechange"===a.type&&"complete"!==l.readyState;if(!j.isReady&&!a){j.isReady=!0;for(var a=0,b=h.length;b>a;a++)(0,h[a])()}}function i(a){return a.bind(l,"DOMContentLoaded",g),a.bind(l,"readystatechange",g),a.bind(f,"load",g),j}var l=f.document,h=[];j.isReady=!1;"function"==typeof define&&define.amd?(j.isReady="function"==typeof requirejs,define("doc-ready/doc-ready",["eventie/eventie"],i)):f.docReady=
i(f.eventie)})(this);
(function(){function f(){}function j(a,b){for(var d=a.length;d--;)if(a[d].listener===b)return d;return-1}function g(a){return function(){return this[a].apply(this,arguments)}}var i=f.prototype,l=this,h=l.EventEmitter;i.getListeners=function(a){var b,d,c=this._getEvents();if(a instanceof RegExp)for(d in b={},c)c.hasOwnProperty(d)&&a.test(d)&&(b[d]=c[d]);else b=c[a]||(c[a]=[]);return b};i.flattenListeners=function(a){var b,d=[];for(b=0;a.length>b;b+=1)d.push(a[b].listener);return d};i.getListenersAsObject=
function(a){var b,d=this.getListeners(a);return d instanceof Array&&(b={},b[a]=d),b||d};i.addListener=function(a,b){var d,c=this.getListenersAsObject(a),e="object"==typeof b;for(d in c)c.hasOwnProperty(d)&&-1===j(c[d],b)&&c[d].push(e?b:{listener:b,once:!1});return this};i.on=g("addListener");i.addOnceListener=function(a,b){return this.addListener(a,{listener:b,once:!0})};i.once=g("addOnceListener");i.defineEvent=function(a){return this.getListeners(a),this};i.defineEvents=function(a){for(var b=0;a.length>
b;b+=1)this.defineEvent(a[b]);return this};i.removeListener=function(a,b){var d,c,e=this.getListenersAsObject(a);for(c in e)e.hasOwnProperty(c)&&(d=j(e[c],b),-1!==d&&e[c].splice(d,1));return this};i.off=g("removeListener");i.addListeners=function(a,b){return this.manipulateListeners(!1,a,b)};i.removeListeners=function(a,b){return this.manipulateListeners(!0,a,b)};i.manipulateListeners=function(a,b,d){var c,e,h=a?this.removeListener:this.addListener,a=a?this.removeListeners:this.addListeners;if("object"!=
typeof b||b instanceof RegExp)for(c=d.length;c--;)h.call(this,b,d[c]);else for(c in b)b.hasOwnProperty(c)&&(e=b[c])&&("function"==typeof e?h.call(this,c,e):a.call(this,c,e));return this};i.removeEvent=function(a){var b,d=typeof a,c=this._getEvents();if("string"===d)delete c[a];else if(a instanceof RegExp)for(b in c)c.hasOwnProperty(b)&&a.test(b)&&delete c[b];else delete this._events;return this};i.removeAllListeners=g("removeEvent");i.emitEvent=function(a,b){var d,c,e,h,g=this.getListenersAsObject(a);
for(e in g)if(g.hasOwnProperty(e))for(c=g[e].length;c--;)d=g[e][c],!0===d.once&&this.removeListener(a,d.listener),h=d.listener.apply(this,b||[]),h===this._getOnceReturnValue()&&this.removeListener(a,d.listener);return this};i.trigger=g("emitEvent");i.emit=function(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,b)};i.setOnceReturnValue=function(a){return this._onceReturnValue=a,this};i._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:
!0};i._getEvents=function(){return this._events||(this._events={})};f.noConflict=function(){return l.EventEmitter=h,f};"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return f}):"object"==typeof module&&module.exports?module.exports=f:this.EventEmitter=f}).call(this);
(function(f){function j(f){if(f){if("string"==typeof i[f])return f;for(var f=f.charAt(0).toUpperCase()+f.slice(1),h,a=0,b=g.length;b>a;a++)if(h=g[a]+f,"string"==typeof i[h])return h}}var g=["Webkit","Moz","ms","Ms","O"],i=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return j}):"object"==typeof exports?module.exports=j:f.getStyleProperty=j})(window);
(function(f){function j(a){var b=parseFloat(a);return-1===a.indexOf("%")&&!isNaN(b)&&b}function g(a){var b,d=a("boxSizing");if(d){a=document.createElement("div");a.style.width="200px";a.style.padding="1px 2px 3px 4px";a.style.borderStyle="solid";a.style.borderWidth="1px 2px 3px 4px";a.style[d]="border-box";var c=document.body||document.documentElement;c.appendChild(a);var e=l(a);b=200===j(e.width);c.removeChild(a)}return function(a){if("string"==typeof a&&(a=document.querySelector(a)),a&&"object"==
typeof a&&a.nodeType){var c=l(a);if("none"===c.display){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},c=0,g=h.length;g>c;c++)e[h[c]]=0;return e}e={};e.width=a.offsetWidth;e.height=a.offsetHeight;for(var g=e.isBorderBox=!(!d||!c[d]||"border-box"!==c[d]),f=0,q=h.length;q>f;f++){var k=h[f],n=c[k];var o=a,m=n;if(i||-1===m.indexOf("%"))n=m;else var n=o.style,x=n.left,t=o.runtimeStyle,u=t&&t.left,n=(u&&(t.left=o.currentStyle.left),n.left=m,m=n.pixelLeft,n.left=x,u&&
(t.left=u),m);o=parseFloat(n);e[k]=isNaN(o)?0:o}a=e.paddingLeft+e.paddingRight;f=e.paddingTop+e.paddingBottom;q=e.marginLeft+e.marginRight;k=e.marginTop+e.marginBottom;o=e.borderLeftWidth+e.borderRightWidth;m=e.borderTopWidth+e.borderBottomWidth;g=g&&b;n=j(c.width);!1!==n&&(e.width=n+(g?0:a+o));c=j(c.height);return!1!==c&&(e.height=c+(g?0:f+m)),e.innerWidth=e.width-(a+o),e.innerHeight=e.height-(f+m),e.outerWidth=e.width+q,e.outerHeight=e.height+k,e}}}var i=f.getComputedStyle,l=i?function(a){return i(a,
null)}:function(a){return a.currentStyle},h="paddingLeft paddingRight paddingTop paddingBottom marginLeft marginRight marginTop marginBottom borderLeftWidth borderRightWidth borderTopWidth borderBottomWidth".split(" ");"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],g):"object"==typeof exports?module.exports=g(require("get-style-property")):f.getSize=g(f.getStyleProperty)})(window);
(function(f,j){function g(b,c){return b[a](c)}function i(a,b){a.parentNode||document.createDocumentFragment().appendChild(a);for(var c=a.parentNode.querySelectorAll(b),e=0,d=c.length;d>e;e++)if(c[e]===a)return!0;return!1}function l(a,b){a.parentNode||document.createDocumentFragment().appendChild(a);return g(a,b)}var h,a;a:if(j.matchesSelector)a="matchesSelector";else{for(var b=["webkit","moz","ms","o"],d=0,c=b.length;c>d;d++){var e=b[d]+"MatchesSelector";if(j[e]){a=e;break a}}a=void 0}a?(b=document.createElement("div"),
h=g(b,"div")?g:l):h=i;"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return h}):window.matchesSelector=h})(this,Element.prototype);
(function(f){function j(g,h,a){function b(a,b){a&&(this.element=a,this.layout=b,this.position={x:0,y:0},this._create())}for(var d=a("transition"),c=a("transform"),e=d&&c,f=!!a("perspective"),j={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[d],w=["transform","transition","transitionDuration","transitionProperty"],s={},p=0,q=w.length;q>p;p++){var k=w[p],n=a(k);n&&n!==k&&(s[k]=n)}var a=b.prototype,g=g.prototype,o;for(o in g)a[o]=
g[o];b.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}};this.css({position:"absolute"})};b.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)};b.prototype.getSize=function(){this.size=h(this.element)};b.prototype.css=function(a){var b=this.element.style,c;for(c in a)b[s[c]||c]=a[c]};b.prototype.getPosition=function(){var a=i(this.element),b=this.layout.options,c=b.isOriginLeft,b=b.isOriginTop,m=parseInt(a[c?"left":"right"],10),a=parseInt(a[b?"top":
"bottom"],10),m=isNaN(m)?0:m,a=isNaN(a)?0:a,e=this.layout.size,m=m-(c?e.paddingLeft:e.paddingRight),a=a-(b?e.paddingTop:e.paddingBottom);this.position.x=m;this.position.y=a};b.prototype.layoutPosition=function(){var a=this.layout.size,b=this.layout.options,c={};b.isOriginLeft?(c.left=this.position.x+a.paddingLeft+"px",c.right=""):(c.right=this.position.x+a.paddingRight+"px",c.left="");b.isOriginTop?(c.top=this.position.y+a.paddingTop+"px",c.bottom=""):(c.bottom=this.position.y+a.paddingBottom+"px",
c.top="");this.css(c);this.emitEvent("layout",[this])};var m=f?function(a,b){return"translate3d("+a+"px, "+b+"px, 0)"}:function(a,b){return"translate("+a+"px, "+b+"px)"};b.prototype._transitionTo=function(a,b){this.getPosition();var c=this.position.x,e=this.position.y,d=parseInt(a,10),g=parseInt(b,10),d=d===this.position.x&&g===this.position.y;if(this.setPosition(a,b),d&&!this.isTransitioning)return this.layoutPosition(),void 0;c=a-c;e=b-e;d={};g=this.layout.options;c=g.isOriginLeft?c:-c;e=g.isOriginTop?
e:-e;d.transform=m(c,e);this.transition({to:d,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})};b.prototype.goTo=function(a,b){this.setPosition(a,b);this.layoutPosition()};b.prototype.moveTo=e?b.prototype._transitionTo:b.prototype.goTo;b.prototype.setPosition=function(a,b){this.position.x=parseInt(a,10);this.position.y=parseInt(b,10)};b.prototype._nonTransition=function(a){this.css(a.to);a.isCleaning&&this._removeStyles(a.to);for(var b in a.onTransitionEnd)a.onTransitionEnd[b].call(this)};
b.prototype._transition=function(a){if(!parseFloat(this.layout.options.transitionDuration))return this._nonTransition(a),void 0;var b=this._transn,c;for(c in a.onTransitionEnd)b.onEnd[c]=a.onTransitionEnd[c];for(c in a.to)b.ingProperties[c]=!0,a.isCleaning&&(b.clean[c]=!0);a.from&&this.css(a.from);this.enableTransition(a.to);this.css(a.to);this.isTransitioning=!0};var x=c&&c.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})+",opacity";b.prototype.enableTransition=function(){this.isTransitioning||
(this.css({transitionProperty:x,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(j,this,!1))};b.prototype.transition=b.prototype[d?"_transition":"_nonTransition"];b.prototype.onwebkitTransitionEnd=function(a){this.ontransitionend(a)};b.prototype.onotransitionend=function(a){this.ontransitionend(a)};var t={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};b.prototype.ontransitionend=function(a){if(a.target===this.element){var b=
this._transn,c=t[a.propertyName]||a.propertyName;delete b.ingProperties[c];var m;a:{for(m in b.ingProperties){m=!1;break a}m=!0}if(m&&this.disableTransition(),c in b.clean&&(this.element.style[a.propertyName]="",delete b.clean[c]),c in b.onEnd)b.onEnd[c].call(this),delete b.onEnd[c];this.emitEvent("transitionEnd",[this])}};b.prototype.disableTransition=function(){this.removeTransitionStyles();this.element.removeEventListener(j,this,!1);this.isTransitioning=!1};b.prototype._removeStyles=function(a){var b=
{},c;for(c in a)b[c]="";this.css(b)};var u={transitionProperty:"",transitionDuration:""};return b.prototype.removeTransitionStyles=function(){this.css(u)},b.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element);this.emitEvent("remove",[this])},b.prototype.remove=function(){if(!d||!parseFloat(this.layout.options.transitionDuration))return this.removeElem(),void 0;var a=this;this.on("transitionEnd",function(){return a.removeElem(),!0});this.hide()},b.prototype.reveal=function(){delete this.isHidden;
this.css({display:""});var a=this.layout.options;this.transition({from:a.hiddenStyle,to:a.visibleStyle,isCleaning:!0})},b.prototype.hide=function(){this.isHidden=!0;this.css({display:""});var a=this.layout.options;this.transition({from:a.visibleStyle,to:a.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){this.isHidden&&this.css({display:"none"})}}})},b.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},b}var g=document.defaultView,
i=g&&g.getComputedStyle?function(f){return g.getComputedStyle(f,null)}:function(g){return g.currentStyle};"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],j):(f.Outlayer={},f.Outlayer.Item=j(f.EventEmitter,f.getSize,f.getStyleProperty))})(window);
(function(f){function j(a,b){for(var c in b)a[c]=b[c];return a}function g(a){var b=[];if("[object Array]"===d.call(a))b=a;else if(a&&"number"==typeof a.length)for(var c=0,e=a.length;e>c;c++)b.push(a[c]);else b.push(a);return b}function i(d,i,w,s,p,q){function k(a,b){if("string"==typeof a&&(a=l.querySelector(a)),!a||!c(a))return h&&h.error("Bad "+this.constructor.namespace+" element: "+a),void 0;this.element=a;this.options=j({},this.options);this.option(b);var e=++n;this.element.outlayerGUID=e;o[e]=
this;this._create();this.options.isInitLayout&&this.layout()}var n=0,o={};return k.namespace="outlayer",k.Item=q,k.prototype.options={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},j(k.prototype,w.prototype),k.prototype.option=function(a){j(this.options,a)},k.prototype._create=function(){this.reloadItems();this.stamps=[];this.stamp(this.options.stamp);
j(this.element.style,this.options.containerStyle);this.options.isResizeBound&&this.bindResize()},k.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},k.prototype._itemize=function(a){for(var a=this._filterFindItemElements(a),b=this.constructor.Item,c=[],e=0,d=a.length;d>e;e++){var g=new b(a[e],this);c.push(g)}return c},k.prototype._filterFindItemElements=function(a){for(var a=g(a),b=this.options.itemSelector,e=[],d=0,h=a.length;h>d;d++){var f=a[d];if(c(f))if(b){p(f,
b)&&e.push(f);for(var f=f.querySelectorAll(b),i=0,j=f.length;j>i;i++)e.push(f[i])}else e.push(f)}return e},k.prototype.getItemElements=function(){for(var a=[],b=0,c=this.items.length;c>b;b++)a.push(this.items[b].element);return a},k.prototype.layout=function(){this._resetLayout();this._manageStamps();this.layoutItems(this.items,void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited);this._isLayoutInited=!0},k.prototype._init=k.prototype.layout,k.prototype._resetLayout=
function(){this.getSize()},k.prototype.getSize=function(){this.size=s(this.element)},k.prototype._getMeasurement=function(a,b){var e,d=this.options[a];d?("string"==typeof d?e=this.element.querySelector(d):c(d)&&(e=d),this[a]=e?s(e)[b]:d):this[a]=0},k.prototype.layoutItems=function(a,b){a=this._getItemsForLayout(a);this._layoutItems(a,b);this._postLayout()},k.prototype._getItemsForLayout=function(a){for(var b=[],c=0,e=a.length;e>c;c++){var d=a[c];d.isIgnored||b.push(d)}return b},k.prototype._layoutItems=
function(a,b){function c(){e.emitEvent("layoutComplete",[e,a])}var e=this;if(!a||!a.length)return c(),void 0;this._itemsOn(a,"layout",c);for(var d=[],g=0,h=a.length;h>g;g++){var f=a[g],i=this._getItemLayoutPosition(f);i.item=f;i.isInstant=b||f.isLayoutInstant;d.push(i)}this._processLayoutQueue(d)},k.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},k.prototype._processLayoutQueue=function(a){for(var b=0,c=a.length;c>b;b++){var e=a[b];this._positionItem(e.item,e.x,e.y,e.isInstant)}},k.prototype._positionItem=
function(a,b,c,e){e?a.goTo(b,c):a.moveTo(b,c)},k.prototype._postLayout=function(){var a=this._getContainerSize();a&&(this._setContainerMeasure(a.width,!0),this._setContainerMeasure(a.height,!1))},k.prototype._getContainerSize=b,k.prototype._setContainerMeasure=function(a,b){if(void 0!==a){var c=this.size;c.isBorderBox&&(a+=b?c.paddingLeft+c.paddingRight+c.borderLeftWidth+c.borderRightWidth:c.paddingBottom+c.paddingTop+c.borderTopWidth+c.borderBottomWidth);a=Math.max(a,0);this.element.style[b?"width":
"height"]=a+"px"}},k.prototype._itemsOn=function(a,b,c){function e(){return d++,d===g&&c.call(h),!0}for(var d=0,g=a.length,h=this,f=0,i=a.length;i>f;f++)a[f].on(b,e)},k.prototype.ignore=function(a){(a=this.getItem(a))&&(a.isIgnored=!0)},k.prototype.unignore=function(a){(a=this.getItem(a))&&delete a.isIgnored},k.prototype.stamp=function(a){if(a=this._find(a)){this.stamps=this.stamps.concat(a);for(var b=0,c=a.length;c>b;b++)this.ignore(a[b])}},k.prototype.unstamp=function(a){if(a=this._find(a))for(var b=
0,c=a.length;c>b;b++){var d=a[b],g=this.stamps,f=e(g,d);-1!==f&&g.splice(f,1);this.unignore(d)}},k.prototype._find=function(a){return a?("string"==typeof a&&(a=this.element.querySelectorAll(a)),g(a)):void 0},k.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var a=0,b=this.stamps.length;b>a;a++)this._manageStamp(this.stamps[a])}},k.prototype._getBoundingRect=function(){var a=this.element.getBoundingClientRect(),b=this.size;this._boundingRect={left:a.left+
b.paddingLeft+b.borderLeftWidth,top:a.top+b.paddingTop+b.borderTopWidth,right:a.right-(b.paddingRight+b.borderRightWidth),bottom:a.bottom-(b.paddingBottom+b.borderBottomWidth)}},k.prototype._manageStamp=b,k.prototype._getElementOffset=function(a){var b=a.getBoundingClientRect(),c=this._boundingRect,a=s(a);return{left:b.left-c.left-a.marginLeft,top:b.top-c.top-a.marginTop,right:c.right-b.right-a.marginRight,bottom:c.bottom-b.bottom-a.marginBottom}},k.prototype.handleEvent=function(a){var b="on"+a.type;
this[b]&&this[b](a)},k.prototype.bindResize=function(){this.isResizeBound||(d.bind(f,"resize",this),this.isResizeBound=!0)},k.prototype.unbindResize=function(){d.unbind(f,"resize",this);this.isResizeBound=!1},k.prototype.onresize=function(){this.resizeTimeout&&clearTimeout(this.resizeTimeout);var a=this;this.resizeTimeout=setTimeout(function(){a.resize();delete a.resizeTimeout},100)},k.prototype.resize=function(){var a=s(this.element);this.size&&a&&a.innerWidth===this.size.innerWidth||this.layout()},
k.prototype.addItems=function(a){a=this._itemize(a);return a.length&&(this.items=this.items.concat(a)),a},k.prototype.appended=function(a){a=this.addItems(a);a.length&&(this.layoutItems(a,!0),this.reveal(a))},k.prototype.prepended=function(a){a=this._itemize(a);if(a.length){var b=this.items.slice(0);this.items=a.concat(b);this._resetLayout();this._manageStamps();this.layoutItems(a,!0);this.reveal(a);this.layoutItems(b)}},k.prototype.reveal=function(a){var b=a&&a.length;if(b)for(var c=0;b>c;c++)a[c].reveal()},
k.prototype.hide=function(a){var b=a&&a.length;if(b)for(var c=0;b>c;c++)a[c].hide()},k.prototype.getItem=function(a){for(var b=0,c=this.items.length;c>b;b++){var e=this.items[b];if(e.element===a)return e}},k.prototype.getItems=function(a){if(a&&a.length){for(var b=[],c=0,e=a.length;e>c;c++){var d=this.getItem(a[c]);d&&b.push(d)}return b}},k.prototype.remove=function(a){var a=g(a),b=this.getItems(a);if(b&&b.length){this._itemsOn(b,"remove",function(){this.emitEvent("removeComplete",[this,b])});for(var a=
0,c=b.length;c>a;a++){var d=b[a];d.remove();var f=this.items,d=e(f,d);-1!==d&&f.splice(d,1)}}},k.prototype.destroy=function(){var b=this.element.style;b.height="";b.position="";b.width="";for(var b=0,c=this.items.length;c>b;b++)this.items[b].destroy();this.unbindResize();delete this.element.outlayerGUID;a&&a.removeData(this.element,this.constructor.namespace)},k.data=function(a){return(a=a&&a.outlayerGUID)&&o[a]},k.create=function(b,c){function e(){k.apply(this,arguments)}Object.create?e.prototype=
Object.create(k.prototype):j(e.prototype,k.prototype);e.prototype.constructor=e;e.prototype.options=j({},k.prototype.options);return j(e.prototype.options,c),e.namespace=b,e.data=k.data,e.Item=function(){q.apply(this,arguments)},e.Item.prototype=new q,i(function(){for(var c=b.replace(/(.)([A-Z])/g,function(a,b,c){return b+"-"+c}).toLowerCase(),d=l.querySelectorAll(".js-"+c),c="data-"+c+"-options",g=0,f=d.length;f>g;g++){var i,j=d[g],k=j.getAttribute(c);try{i=k&&JSON.parse(k)}catch(r){h&&h.error("Error parsing "+
c+" on "+j.nodeName.toLowerCase()+(j.id?"#"+j.id:"")+": "+r);continue}k=new e(j,i);a&&a.data(j,b,k)}}),a&&a.bridget&&a.bridget(b,e),e},k.Item=q,k}var l=f.document,h=f.console,a=f.jQuery,b=function(){},d=Object.prototype.toString,c="object"==typeof HTMLElement?function(a){return a instanceof HTMLElement}:function(a){return a&&"object"==typeof a&&1===a.nodeType&&"string"==typeof a.nodeName},e=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,e=a.length;e>c;c++)if(a[c]===
b)return c;return-1};"function"==typeof define&&define.amd?define("outlayer/outlayer","eventie/eventie doc-ready/doc-ready eventEmitter/EventEmitter get-size/get-size matches-selector/matches-selector ./item".split(" "),i):f.Outlayer=i(f.eventie,f.docReady,f.EventEmitter,f.getSize,f.matchesSelector,f.Outlayer.Item)})(window);
(function(f){function j(f,j){var h=f.create("masonry");return h.prototype._resetLayout=function(){this.getSize();this._getMeasurement("columnWidth","outerWidth");this._getMeasurement("gutter","outerWidth");this.measureColumns();var a=this.cols;for(this.colYs=[];a--;)this.colYs.push(0);this.maxY=0},h.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var a=this.items[0];this.columnWidth=(a=a&&a.element)&&j(a).outerWidth||this.containerWidth}this.columnWidth+=this.gutter;
this.cols=Math.floor((this.containerWidth+this.gutter)/this.columnWidth);this.cols=Math.max(this.cols,1)},h.prototype.getContainerWidth=function(){var a=j(this.options.isFitWidth?this.element.parentNode:this.element);this.containerWidth=a&&a.innerWidth},h.prototype._getItemLayoutPosition=function(a){a.getSize();for(var b=a.size.outerWidth%this.columnWidth,b=Math[b&&1>b?"round":"ceil"](a.size.outerWidth/this.columnWidth),b=Math.min(b,this.cols),d=this._getColGroup(b),c=Math.min.apply(Math,d),b=g(d,
c),e={x:this.columnWidth*b,y:c},a=c+a.size.outerHeight,d=this.cols+1-d.length,c=0;d>c;c++)this.colYs[b+c]=a;return e},h.prototype._getColGroup=function(a){if(2>a)return this.colYs;for(var b=[],d=this.cols+1-a,c=0;d>c;c++){var e=this.colYs.slice(c,c+a);b[c]=Math.max.apply(Math,e)}return b},h.prototype._manageStamp=function(a){for(var b=j(a),d=this._getElementOffset(a),a=this.options.isOriginLeft?d.left:d.right,c=a+b.outerWidth,e=Math.floor(a/this.columnWidth),e=Math.max(0,e),a=Math.floor(c/this.columnWidth),
a=a-(c%this.columnWidth?0:1),a=Math.min(this.cols-1,a),b=(this.options.isOriginTop?d.top:d.bottom)+b.outerHeight,d=e;a>=d;d++)this.colYs[d]=Math.max(b,this.colYs[d])},h.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var a={height:this.maxY};return this.options.isFitWidth&&(a.width=this._getContainerFitWidth()),a},h.prototype._getContainerFitWidth=function(){for(var a=0,b=this.cols;--b&&0===this.colYs[b];)a++;return(this.cols-a)*this.columnWidth-this.gutter},h.prototype.resize=
function(){var a=this.containerWidth;this.getContainerWidth();a!==this.containerWidth&&this.layout()},h}var g=Array.prototype.indexOf?function(g,f){return g.indexOf(f)}:function(g,f){for(var h=0,a=g.length;a>h;h++)if(g[h]===f)return h;return-1};"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],j):f.Masonry=j(f.Outlayer,f.getSize)})(window);
(function(f){function j(a,b){(g(a,b)?l:i)(a,b)}var g,i,l;"classList"in document.documentElement?(g=function(a,b){return a.classList.contains(b)},i=function(a,b){a.classList.add(b)},l=function(a,b){a.classList.remove(b)}):(g=function(a,b){return RegExp("(^|\\s+)"+b+"(\\s+|$)").test(a.className)},i=function(a,b){g(a,b)||(a.className=a.className+" "+b)},l=function(a,b){a.className=a.className.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)")," ")});var h={hasClass:g,addClass:i,removeClass:l,toggleClass:j,has:g,
add:i,remove:l,toggle:j};"function"===typeof define&&define.amd?define(h):f.classie=h})(window);
(function(f){function j(a,b){a.style.WebkitTransform=b;a.style.msTransform=b;a.style.transform=b}function g(){var a=h.clientWidth,b=f.innerWidth;return a<b?b:a}function i(a,b){for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);return a}function l(a,b){this.el=a;this.options=i({},this.options);i(this.options,b);this._init()}var h=f.document.documentElement,a={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"}[Modernizr.prefixed("transition")],
b=Modernizr.csstransitions,d=Modernizr.csstransforms3d;l.prototype.options={};l.prototype._init=function(){this.grid=this.el.querySelector("section.grid-wrap > ul.grid");this.gridItems=[].slice.call(this.grid.querySelectorAll("li:not(.grid-sizer)"));this.itemsCount=this.gridItems.length;this.slideshow=this.el.querySelector("section.slideshow > ul");this.slideshowItems=[].slice.call(this.slideshow.children);this.current=-1;this.ctrlPrev=this.el.querySelector("section.slideshow > nav > span.nav-prev");
this.ctrlNext=this.el.querySelector("section.slideshow > nav > span.nav-next");this.ctrlClose=this.el.querySelector("section.slideshow > nav > span.nav-close");this._initMasonry();this._initEvents()};l.prototype._initMasonry=function(){var a=this.grid;imagesLoaded(a,function(){new Masonry(a,{itemSelector:"li",columnWidth:a.querySelector(".grid-sizer")})})};l.prototype._initEvents=function(){var a=this;this.gridItems.forEach(function(b,d){b.addEventListener("click",function(){a._openSlideshow(d)})});
this.ctrlPrev.addEventListener("click",function(){a._navigate("prev")});this.ctrlNext.addEventListener("click",function(){a._navigate("next")});this.ctrlClose.addEventListener("click",function(){a._closeSlideshow()});f.addEventListener("resize",function(){a._resizeHandler()});document.addEventListener("keydown",function(b){if(a.isSlideshowVisible)switch(b.keyCode||b.which){case 37:a._navigate("prev");break;case 39:a._navigate("next");break;case 27:a._closeSlideshow()}});f.addEventListener("scroll",
function(){a.isSlideshowVisible?f.scrollTo(a.scrollPosition?a.scrollPosition.x:0,a.scrollPosition?a.scrollPosition.y:0):a.scrollPosition={x:f.pageXOffset||h.scrollLeft,y:f.pageYOffset||h.scrollTop}})};l.prototype._openSlideshow=function(a){this.isSlideshowVisible=!0;this.current=a;classie.addClass(this.el,"slideshow-open");this._setViewportItems();classie.addClass(this.currentItem,"current");classie.addClass(this.currentItem,"show");this.prevItem&&(classie.addClass(this.prevItem,"show"),a=Number(-1*
(g()/2+this.prevItem.offsetWidth/2)),j(this.prevItem,d?"translate3d("+a+"px, 0, -150px)":"translate("+a+"px)"));this.nextItem&&(classie.addClass(this.nextItem,"show"),a=Number(g()/2+this.nextItem.offsetWidth/2),j(this.nextItem,d?"translate3d("+a+"px, 0, -150px)":"translate("+a+"px)"))};l.prototype._navigate=function(c){if(!this.isAnimating)if("next"===c&&this.current===this.itemsCount-1||"prev"===c&&0===this.current)this._closeSlideshow();else{this.isAnimating=!0;this._setViewportItems();var e=this,
f=this.currentItem.offsetWidth,h=d?"translate3d(-"+Number(g()/2+f/2)+"px, 0, -150px)":"translate(-"+Number(g()/2+f/2)+"px)",i=d?"translate3d("+Number(g()/2+f/2)+"px, 0, -150px)":"translate("+Number(g()/2+f/2)+"px)",l,p;"next"===c?(l=d?"translate3d( -"+Number(2*g()/2+f/2)+"px, 0, -150px )":"translate(-"+Number(2*g()/2+f/2)+"px)",f=d?"translate3d( "+Number(2*g()/2+f/2)+"px, 0, -150px )":"translate("+Number(2*g()/2+f/2)+"px)"):(l=d?"translate3d( "+Number(2*g()/2+f/2)+"px, 0, -150px )":"translate("+Number(2*
g()/2+f/2)+"px)",f=d?"translate3d( -"+Number(2*g()/2+f/2)+"px, 0, -150px )":"translate(-"+Number(2*g()/2+f/2)+"px)");classie.removeClass(e.slideshow,"animatable");if("next"===c&&this.current<this.itemsCount-2||"prev"===c&&1<this.current)p=this.slideshowItems["next"===c?this.current+2:this.current-2],j(p,f),classie.addClass(p,"show");setTimeout(function(){classie.addClass(e.slideshow,"animatable");classie.removeClass(e.currentItem,"current");classie.addClass(c==="next"?e.nextItem:e.prevItem,"current");
j(e.currentItem,c==="next"?h:i);e.nextItem&&j(e.nextItem,c==="next"?"":l);e.prevItem&&j(e.prevItem,c==="next"?l:"");p&&j(p,c==="next"?i:h);var d=function(f){if(b){if(f.propertyName.indexOf("transform")===-1)return false;this.removeEventListener(a,d)}e.prevItem&&c==="next"?classie.removeClass(e.prevItem,"show"):e.nextItem&&c==="prev"&&classie.removeClass(e.nextItem,"show");if(c==="next"){e.prevItem=e.currentItem;e.currentItem=e.nextItem;if(p)e.nextItem=p}else{e.nextItem=e.currentItem;e.currentItem=
e.prevItem;if(p)e.prevItem=p}e.current=c==="next"?e.current+1:e.current-1;e.isAnimating=false};b?e.currentItem.addEventListener(a,d):d()},25)}};l.prototype._closeSlideshow=function(){classie.removeClass(this.el,"slideshow-open");classie.removeClass(this.slideshow,"animatable");var c=this,d=function(f){if(b){if("ul"!==f.target.tagName.toLowerCase())return;this.removeEventListener(a,d)}classie.removeClass(c.currentItem,"current");classie.removeClass(c.currentItem,"show");c.prevItem&&classie.removeClass(c.prevItem,
"show");c.nextItem&&classie.removeClass(c.nextItem,"show");c.slideshowItems.forEach(function(a){j(a,"")});c.isSlideshowVisible=!1};b?this.el.addEventListener(a,d):d()};l.prototype._setViewportItems=function(){this.nextItem=this.prevItem=this.currentItem=null;0<this.current&&(this.prevItem=this.slideshowItems[this.current-1]);this.current<this.itemsCount-1&&(this.nextItem=this.slideshowItems[this.current+1]);this.currentItem=this.slideshowItems[this.current]};l.prototype._resizeHandler=function(){var a=
this;this._resizeTimeout&&clearTimeout(this._resizeTimeout);this._resizeTimeout=setTimeout(function(){a._resize();a._resizeTimeout=null},50)};l.prototype._resize=function(){if(this.isSlideshowVisible){if(this.prevItem){var a=Number(-1*(g()/2+this.prevItem.offsetWidth/2));j(this.prevItem,d?"translate3d("+a+"px, 0, -150px)":"translate("+a+"px)")}this.nextItem&&(a=Number(g()/2+this.nextItem.offsetWidth/2),j(this.nextItem,d?"translate3d("+a+"px, 0, -150px)":"translate("+a+"px)"))}};f.CBPGridGallery=l})(window);