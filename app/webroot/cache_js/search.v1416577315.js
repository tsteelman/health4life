function load_more_items(a){var b=Ladda.create(document.querySelector("#load-more"));b.start();setTimeout(function(){$.ajax({url:"/search/search/index/page:"+a,data:{ajax:$("#search_string").val(),type:$("#search_type").val()},dataType:"json",success:function(b){$("#searchList").append(b.htm_content);!0==b.paginator.nextPage&&$("#searchPageList").append('<div id="more_button'+(b.paginator.page+1)+'" class="block"><a href="javascript:load_more_items('+(b.paginator.page+1)+')" id="load-more" class="btn btn_more pull-right ladda-button more-arrow" data-style="expand-right" data-size="l" data-spinner-color="#3581ED"><span class="ladda-label">More</span></a></div>')}}).always(function(){b.stop();
$("#more_button"+a).remove()})},1E3)}
function load_more_all_items(a,b){b=b.toLowerCase();if("community"===b)Ladda.create(document.querySelector("#load-community-more")).start();else if("people"===b)Ladda.create(document.querySelector("#load-user-more")).start();else if("disease"===b){var c=Ladda.create(document.querySelector("#load-disease-more"));c.start()}else"hashtag"===b&&(c=Ladda.create(document.querySelector("#load-hashtag-more")),c.start());setTimeout(function(){$.ajax({url:"/search/search/index/page:"+a,data:{ajax:$("#search_string").val(),
type:b},dataType:"json",success:function(a){"community"===b?($("#searchCommunityList").append(a.htm_content),!0==a.paginator.nextPage&&$("#searchCommunityPageList").append('<div id="more_community_button'+(a.paginator.page+1)+'" class="block"><a href="javascript:load_more_all_items('+(a.paginator.page+1)+',\'community\')" id="load-community-more" class="btn btn_more pull-right ladda-button more-arrow" data-style="expand-right" data-size="c" data-spinner-color="#3581ED"><span class="ladda-label">More</span></a></div>')):
"people"===b?($("#searchUserList").append(a.htm_content),!0==a.paginator.nextPage&&(nextId=a.paginator.page+1,$("#searchUserPageList").append('<div id="more_user_button'+(a.paginator.page+1)+'" class="block"><a href="javascript:load_more_all_items('+(a.paginator.page+1)+',\'people\')" id="load-user-more" class="btn btn_more pull-right ladda-button more-arrow" data-style="expand-right" data-size="l" data-spinner-color="#3581ED"><span class="ladda-label">More</span></a></div>'))):"disease"===b?($("#searchDiseaseList").append(a.htm_content),
!0==a.paginator.nextPage&&$("#searchDiseasePageList").append('<div id="more_disease_button'+(a.paginator.page+1)+'" class="block"><a href="javascript:load_more_all_items('+(a.paginator.page+1)+',\'disease\')" id="load-disease-more" class="btn btn_more pull-right ladda-button more-arrow" data-style="expand-right" data-size="l" data-spinner-color="#3581ED"><span class="ladda-label">More </span></a></div>')):"hashtag"===b&&($("#searchHashtagList").append(a.htm_content),!0==a.paginator.nextPage&&$("#searchHashtagList").append('<div id="more_hashtag_button'+
(a.paginator.page+1)+'" class="block"><a href="javascript:load_more_all_items('+(a.paginator.page+1)+',\'hashtag\')" id="load-hashtag-more" class="btn btn_more pull-right ladda-button more-arrow" data-style="expand-right" data-size="l" data-spinner-color="#3581ED"><span class="ladda-label">More </span></a></div>'))}}).always(function(){Ladda.stopAll();"people"===b?$("#more_user_button"+a).remove():"community"===b?$("#more_community_button"+a).remove():"disease"===b?$("#more_disease_button"+a).remove():
"hashtag"===b&&$("#more_hashtag_button"+a).remove()})},1E3)}function paginateRecommendedFriendData(){$.autopager&&$.autopager({link:"span.next a",content:"#recommendedFriendList",appendTo:"#recommendedFriendPageList .row",start:function(){$("#post_loading").removeClass("hide")},load:function(a,b){"undefined"===typeof b.url?$("a[rel=next]").attr("href",""):$("a[rel=next]").attr("href",b.url);$("#post_loading").addClass("hide")}})}
$(document).ready(function(){$(".event_search .dropdown-menu li a").removeClass("search_list_active");var a=$("#search_class").val();a&&$(".event_search .dropdown-menu ."+a).addClass("search_list_active");load_recommended_friends(1);initDiagnosisFaceList();initTreatmentFaceList();initSymptomFaceList();initCityFaceList()});
function initDiagnosisFaceList(){$("#keyword_disease").facelist("/api/searchDiseaseNames",properties={matchContains:!0,minChars:2,max:50,selectFirst:!1,intro_text:"Type disease name",result_field:"search_disease_id"})}function initTreatmentFaceList(){$("#keyword_treatment").facelist("/api/searchTreatments",properties={matchContains:!0,minChars:2,max:50,selectFirst:!1,intro_text:"Type treatment name",result_field:"search_treatment_id"})}
function initSymptomFaceList(){$("#keyword_symptom").facelist("/api/searchSymptomNames",properties={matchContains:!0,minChars:2,max:50,selectFirst:!1,intro_text:"Type symptom name",result_field:"search_symptom_id"})}function initCityFaceList(){$("#keyword_location").facelist("/api/searchCityNames",properties={matchContains:!0,minChars:2,max:50,selectFirst:!1,intro_text:"Type city name",result_field:"search_city_id"})}
$(document).on("blur","#keyword_location, #keyword_disease, #keyword_treatment, #keyword_symptom",function(){$(this).val("")});
function getAdvancedSearchData(){var a={},b=[],c=[],d=[],e=[];""!==$("#search_disease_id").val()&&($("#search_disease_id").val().split(",").forEach(function(a){""!==a&&b.push(a)}),0!==b.length&&(a.disease=b));""!==$("#search_city_id").val()&&($("#search_city_id").val().split(",").forEach(function(a){a!==""&&c.push(a)}),0!==c.length&&(a.location=c));""!==$("#search_symptom_id").val()&&($("#search_symptom_id").val().split(",").forEach(function(a){a!==""&&d.push(a)}),0!==d.length&&(a.symptoms=d));""!==
$("#search_treatment_id").val()&&($("#search_treatment_id").val().split(",").forEach(function(a){a!==""&&e.push(a)}),0!==e.length&&(a.treatment=e));""!==$("#keyword_name").val()&&(a.name=$("#keyword_name").val());""!==$("#keyword_age").val()&&(a.age=$("#keyword_age").val());""!==$("#keyword_gender").val()&&(a.gender=$("#keyword_gender").val());return a}$(window).scroll(function(){paginateRecommendedFriendData()});
function load_recommended_friends(a){$.ajax({url:"/search/search/recommendedFriends/page:"+a,success:function(a){$(".recommended_users_list").append(a);$("#recommended_user_loading").addClass("hide")}})}
function load_more_pending_friends(a){var b=Ladda.create(document.querySelector("#load-more"));b.start();setTimeout(function(){$.ajax({url:"/search/search/pendingInvites/page:"+a,data:{ajax:"true"},dataType:"json",success:function(a){$("#searchList").append(a.htm_content);!0==a.paginator.nextPage&&$("#searchPageList").append('<div id="more_button'+(a.paginator.page+1)+'" class="block"><a href="javascript:load_more_pending_friends('+(a.paginator.page+1)+')" id="load-more" class="btn btn_more pull-right ladda-button more-arrow" data-style="expand-right" data-size="l" data-spinner-color="#3581ED"><span class="ladda-label">More</span></a></div>')}}).always(function(){b.stop();
$("#more_button"+a).remove()})},1E3)}
function load_more_items_advanced(a){var b=Ladda.create(document.querySelector("#load-more"));b.start();var c=getAdvancedSearchData();c.ajax=!0;c.type="people";setTimeout(function(){$.ajax({url:"/search/search/index/page:"+a,data:c,dataType:"json",success:function(a){$("#searchList").append(a.htm_content);!0==a.paginator.nextPage&&$("#searchPageList").append('<div id="more_button'+(a.paginator.page+1)+'" class="block"><a href="javascript:load_more_items_advanced('+(a.paginator.page+1)+')" id="load-more" class="btn btn_more pull-right ladda-button more-arrow" data-style="expand-right" data-size="l" data-spinner-color="#3581ED"><span class="ladda-label">More</span></a></div>')}}).always(function(){b.stop();
$("#more_button"+a).remove()})},1E3)};