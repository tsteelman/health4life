document.addEventListener?document.addEventListener("contextmenu",function(a){a.preventDefault()},!1):document.attachEvent("oncontextmenu",function(){window.event.returnValue=!1});var defaultDateFormat="mm/dd/yy",defaultTimeFormat="g:i A",is_symptom_newscore_active=!1;
$(document).ready(function(){$appDateTime=new Date(app.date_iso);setInterval(function(){$appDateTime=new Date($appDateTime.getTime()+1E3)},1E3);$.ajaxSetup({statusCode:{403:function(){location.reload()}}});if(app.loggedIn){applyChosen();updateNotificationCounts();var a,c=function(){$("#online_friends_list").length&&(a=setInterval(function(){$("#online_friend_search_key").is(":focus")||updateOnlineFriendsList()},1E4),$("#online_friends_list").mouseover(function(){clearInterval(a)}))};c();$("#online_friends_list").mouseout(function(){c()});
$("#profile_friends_online").length&&setInterval(function(){updateProfileOnlineFriendsList()},1E4);$("#online_video_friends_list").length&&setInterval(function(){updateVideoProfileOnlineFriendsList()},1E4);0<$("#healthStatusSelectionModal").length&&$("#healthStatusSelectionModal").hasClass("prompt")&&showHealthStatusSelectionModal();$("#disease_members_online").length&&setInterval(function(){updateDiseaseMemberList()},1E4);$("#disease_friends_online").length&&setInterval(function(){updateDiseaseOnlineFriendsList()},
1E4);$("#community_members_online").length&&setInterval(function(){updateCommunityMembersList()},1E4)}else $(".home_tiles").popover({content:function(){return $($(this).data("target")).html()},html:!0,placement:"auto",container:"body"});applySticky();$("#group-section-alert .close").on("click",function(){$("#group-section-alert .alert-content").html("");$(this).parent().hide()});$("#compose-message-button").on("click",function(){$(".arrowchat_closebox_bottom").click()});$(document).on("input",".complete_location",
function(){""===$(this).val()&&$(this).parent().find(".location_id_hidden").val("");$(".location_id_hidden").each(function(){""===$(this).val()&&$("#add_location").addClass("plus_disabled")})});$(document).on("click",".chat-user",function(){$(this).data("id")&&jqac.arrowchat.chatWith($(this).data("id"))});$(document).on("click",".video-chat-user",function(){$(this).data("id")&&(jqac.arrowchat.chatWith($(this).data("id")),b=$(this).data("id"),$("#arrowchat_video_chat_"+b).click())});$(document).on("input",
".complete_diagnosis",function(){""===$(this).val()&&$(this).parent().find(".disease_id_hidden").val("");$(".disease_id_hidden").each(function(){""===$(this).val()&&$("#add_diagnosis").addClass("plus_disabled")})});$(document).on("input",".complete_symptom",function(){""===$(this).val()&&$(this).parent().find(".symptoms_id_hidden").val("");$(".symptoms_id_hidden").each(function(){""===$(this).val()&&$("#add_symptoms").addClass("plus_disabled")})});$(document).on("input",".complete_treatment",function(){""===
$(this).val()&&$(this).parent().find(".treatment_id_hidden").val("");$(".treatment_id_hidden").each(function(){""===$(this).val()&&$("#add_treatment").addClass("plus_disabled")})});applyHoverEffect();$("#SymptomDate").datepicker();$("#symptomHistoryDatepicker").datepicker({minDate:"-2y",maxDate:getUserNow(),defaultDate:getUserNow(),dateFormat:"yy-mm-dd",onSelect:function(a){is_symptom_newscore_active=!0;myDate=new Date(Date.parse(a));$("#date-selected").html(a);$("#selectedSymptomDate").val(a);symptom_id=
$.trim($("#symptom_id").val());$.ajax({url:"/user/api/getUserSymptomSeverity",data:{id:symptom_id,date:a},type:"POST",dataType:"json",success:function(a){name=id="";$.map(a,function(a){id=a.severityId;name=a.name});""!=name&&($(".condition_"+name).addClass("on"),$(".condition_"+name).find("input").attr("checked",!0));$("#symptom_conditions").modal("show");bootbox.hideAll();is_symptom_newscore_active=!1}})}});$("#header_search").focus(function(){var a,c;switch($("#search_icons").attr("class").replace("search_icons ",
"")){case "all":a=1;c="all";break;case "people_search":a=2;c="people";break;case "event_search":a=3;c="event";break;case "community_search":a=4;c="community";break;case "disease_search":a=5;c="disease";break;case "hash_search":a=6;c="hashtag";break;default:a=1,c="all"}$("#header_search").keypress(function(a){13==a.which&&(a.preventDefault(),a=$("#header_search").val(),""==!a&&window.location.replace("/search?type="+c+"&keyword="+encodeURIComponent(a)))});$(this).autocomplete({appendTo:$(".navbar-fixed-top"),
source:function(c,e){$.ajax({url:"/search/search/getHeaderSearch",dataType:"json",data:{term:c.term,category:a},success:function(a){e($.map(a,function(a){return{style:a.Style,value:a.Name,logoUrl:a.LogoUrl,url:a.Url,disc:a.Disc,type:a.Type}}))}})},open:function(){$(this).data("uiAutocomplete").menu.element.addClass("search_list");$(".search_list li").removeClass("ui-menu-item")}}).data("ui-autocomplete")._renderItem=function(a,c){if("More"==c.value)var d=""==c.url?c.disc:c.disc+'<a class="pull-right more" href="'+
c.url+'">more</a>',e="<li class = 'search_header'></li>";else"empty"!=c.value&&("condition"==c.type||"hashtag"==c.type?d='<div class="media">'+('<div class="media-body"><h6 class="media-heading"><a href="'+c.url+'">'+c.value+"</a></h6> <p>"+c.disc+"</p></div></div>"):(d='<div class="media"><a class="pull-left" href="'+c.url+'"><img height="40"  src="'+c.logoUrl+'"  class = "'+c.style+'">',d+='</a><div class="media-body"><h6 class="media-heading"><a href="'+c.url+'">'+c.value+"</a></h6> <p>"+c.disc+
"</p></div></div>"),e="<li></li>");"empty"==c.value&&(d='<div class="media"><div class="media-body"><h6 class="media-heading">No search results</h6></div></div>',e="<li></li>");return $(e).data("item.autocomplete",c).append(d).appendTo(a)}});$(document).on("focus",".bootstrap-tagsinput input",function(){$(this).parent().addClass("focus")});$(document).on("focusout",".bootstrap-tagsinput input",function(){$(this).parent().removeClass("focus")});$(document).on("focus",".medication_input",function(){$(this).closest(".facelist").addClass("focus")});
$(document).on("focusout",".medication_input",function(){$(this).closest(".facelist").removeClass("focus")});$(document).on("focus","#SendMessageByEmail",function(){$(this).closest(".facelist").addClass("focus")});$(document).on("focusout","#SendMessageByEmail",function(){$(this).closest(".facelist").removeClass("focus")});$(document).bind("webkitfullscreenchange mozfullscreenchange fullscreenchange",function(){if("FullscreenOn"==(document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen?
"FullscreenOn":"FullscreenOff"))$(".body_loggedin").css({"overflow-y":"auto"}),$("#profile_video_container").removeClass("jwfullscreen")})});
(function(a){a.fn.embedPlayer=function(a,d,e,f){var h="",h=a.match(/watch\?v=([a-zA-Z0-9\-_]+)/),a=a.match(/^http:\/\/(www\.)?vimeo\.com\/(clip\:)?(\d+).*$/),f="true"==f||f?!0:!1;h?(h="http://www.youtube.com/embed/"+h[1]+"?rel=0;autohide=1",h='<iframe style="width: '+d+"; height: "+e+';" src="'+(f?h+"&amp;autoplay=1":h+"&amp;autoplay=0")+'&wmode=opaque" frameborder="0" allowfullscreen ></iframe>'):a?(h="http://player.vimeo.com/video/"+a[3]+"?title=0&byline=0&portrait=0",h='<iframe style="width: '+
d+"; height: "+e+';" src="'+(f?h+"&autoplay=1":h+"&autoplay=0")+'&wmode=opaque"  frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>'):h="<p>No video url found - vimeo and youtube supported</p>";return h}})(jQuery);var saveHealthStatusRotate;
$(document).on("click",".health_status_box",function(){$(".health_status_box").removeClass("active");$(this).addClass("active");var a=$(this).attr("data-health_status");$("#health_status").val(a);$("#save_health_status_btn").prop("disabled",!1);$("#health_status_comment_container").removeClass("hide")});$(document).on("click",".settings_cancel",function(){window.location.href="/profile"});
$(document).on("click","#save_health_status_btn",function(){saveHealthStatusRotate=Ladda.create(this);$.ajax({url:"/user/dashboard/saveUserHealthStatus",method:"POST",dataType:"json",data:$("#health_status_form").serialize(),beforeSend:function(){saveHealthStatusRotate.start()},success:function(a){1==$("#status_graph_container").length&&load_stock_graph();socket.emit("my_health_update",{room:$("#graphUpdatedInRoom").val(),type:"health_indicators"});emitHealthUpdateToNewsFeeds(a.postId);resetHealthStatusSelectionModal();
$("#healthStatusSelectionModal").modal("hide");null!==a.smileyClass&&changeSmiley(a.smileyClass);0<$("#post_container").length&&location.reload()}})});function emitHealthUpdateToNewsFeeds(a){$.ajax({type:"POST",url:"/post/api/getCurrentUserHealthFollowingRooms",dataType:"json",success:function(c){c.forEach(function(c){socket.emit("new_post",{room:c,postId:a})})}})}$("#healthStatusSelectionModal.prompt").on("hidden.bs.modal",function(){var a=$("#healthStatusSelectionModal .heading h2").text();$("#healthStatusSelectionModal .heading h1").html(a)});
$(document).on("click","#close_health_status_modal",function(){resetHealthStatusSelectionModal()});$(document).on("click",".my_health_add",function(a){a.stopPropagation();showHealthStatusSelectionModal()});function showHealthStatusSelectionModal(){0<$("#healthStatusSelectionModal").length&&($("#save_health_status_btn").prop("disabled",!0),$(".arrowchat_closebox_bottom").click(),$("#healthStatusSelectionModal").modal("show"))}
function resetHealthStatusSelectionModal(){$(".health_status_box").removeClass("active");$("#health_status").val("");$("#health_status_comment").val("");$("#save_health_status_btn").prop("disabled",!0);$("#health_status_comment_container").addClass("hide");void 0!==saveHealthStatusRotate&&null!==saveHealthStatusRotate&&saveHealthStatusRotate.stop()}
function changeSmiley(a){$(".feeling_condition").removeClass("feeling_very_good");$(".feeling_condition").removeClass("feeling_bad");$(".feeling_condition").removeClass("feeling_neutral");$(".feeling_condition").removeClass("feeling_good");$(".feeling_condition").removeClass("feeling_very_bad");$(".feeling_condition").addClass(a);$("#feeling_date_status").html(" Today ")}function applyHoverEffect(){}
function applySticky(){if(0<$("#rhs .sticky").length){var a=1.25*$(".navbar").height();$("#rhs .sticky").sticky({topSpacing:a})}}function applyChosen(){$(".chosen-select").chosen({no_results_text:"Oops, nothing found!"})}var diseaseCache={};
function initDiseaseAutoComplete(a,c){$(a).autocomplete({minLength:c,source:function(a,c){if("undefined"===typeof diseaseJSON){var f=$.trim(a.term),h;f in diseaseCache?(h=getFilteredDiseaseSearchResult(diseaseCache[f]),c(h)):$.ajax({url:"/api/searchDisease",dataType:"json",data:{term:f},success:function(a){diseaseCache[f]=a;h=getFilteredDiseaseSearchResult(a);c(h)}})}else{var i=RegExp("^"+$.ui.autocomplete.escapeRegex(a.term),"i");data=$.grep(diseaseJSON,function(a){if(i.test(a.label))return{label:a.label,
value:a.value,id:a.id}});h=getFilteredDiseaseSearchResult(data);c(h)}},select:function(c,e){if(e.item){var f=e.item.id;$(a).parent().find(".disease_id_hidden").val(f);$("#add_diagnosis").removeClass("plus_disabled");$(".disease_id_hidden").each(function(){""===$(this).val()&&$("#add_diagnosis").addClass("plus_disabled")})}},search:function(c){if(!0===c.ctrlKey)return!1;$(a).parent().find(".disease_id_hidden").val("");$("#add_diagnosis").addClass("plus_disabled")},change:function(){var c=$(a).parent().find(".disease_id_hidden").val();
0<$("#communityWizard").length||0<$("#eventWizard").length?0<c||$(a).val(""):0<=c||$(a).val("")},response:function(c,e){var f=$(a).parent().find(".no_result_msg");0===e.content.length?(f.show(),$(a).parent().find(".disease_id_hidden").val(""),$(a).val("")):f.hide()}})}
function getFilteredDiseaseSearchResult(a){var c=$("input.disease_id_hidden").map(function(){if(""!==this.value)return this.value}).get(),d=$("input.disease_search").map(function(){if(""!==this.value&&""!=$(this).next(".disease_id_hidden").val())return this.value}).get();return $.map(a,function(a){var f=a.id.toString(),h=a.value.toString();if(-1==$.inArray(f,c)||0==f&&-1==$.inArray(h,d))return{label:a.label,value:a.value,id:a.id}})}
$(document).on("keyup",".disease_search",function(a){a=a.which;(46===a||8===a)&&$(this).parent().find(".disease_id_hidden").val("")});
$(document).on("submit","#UserLoginForm",function(){var a=$(this),c=a.attr("action"),a=a.serialize(),d=$(this).find('button[type="submit"]');$.ajax({type:"POST",url:c,data:a,dataType:"json",beforeSend:function(){d.attr("disabled","disabled")},success:function(a){!0===a.success?window.location.href=a.redirectUrl:!0===a.error&&(hideAlerts(),$("#UserPassword").val(""),showLoginAlert("login_flash_error",a.message),d.removeAttr("disabled"))}});return!1});
$(document).on("click","#resend_activation_mail_link",function(){var a=$(this).data("username");$.ajax({type:"POST",url:"/user/register/resendActivationMail",data:{username:a},dataType:"json",beforeSend:function(){hideAlerts();showAlert("login_flash_warning","Resending activation email. Please wait...")},success:function(a){hideAlerts();!0===a.success?showAlert("login_flash_success",a.message):!0===a.error&&showAlert("login_flash_error",a.message)}});return!1});
function hideAlerts(){$(".alert .message").html("");$(".alert").hide()}function showAlert(a,c){$("#"+a+" .message").html(c);$("#"+a).show()}function showLoginAlert(a,c){$("#"+a).length?$("#"+a+" .message").html(c):$(".signup_fields").prepend('<div id="login_flash_error" style="display: none;" class="alert alert-error"><button data-dismiss="alert" class="close" type="button" aria-hidden="true">\u00d7</button><div class="message">Invalid username or password</div></div>');$("#"+a).show()}
function getStateList(a){var c=$(a).attr("data-rel"),c=(new String(c)).split("#");$("."+c[1]).html('<option value="">Loading State/Province...</option>');$("."+c[2]).html('<option value="">Select City</option>');$("."+c[2]).attr("disabled","disabled");$.ajax({url:"/api/getCountryStates/"+$(a).val(),dataType:"json"}).done(function(a){$("."+c[1]).removeAttr("disabled");var e=[];$.each(a,function(a,c){e.push('<option value="'+a+'">'+c+"</option>")});$("."+c[1]).html(e.join(""));$("."+c[1]).prepend("<option value='' selected='selected'>Select State/Province</option>");
$(".chosen-select").trigger("liszt:updated")});handleCountryZipValidation($(a))}
function getCityList(a){var c=$(a).attr("data-rel"),c=c.split("#");$("."+c[2]).empty();$("."+c[2]).html('<option value="">Loading City...</option>');$("."+c[2]).attr("disabled");$.ajax({url:"/api/getStateCities/"+$(a).val(),dataType:"json"}).done(function(a){$("."+c[2]).removeAttr("disabled");var e=[];$.each(a,function(a,c){e.push('<option value="'+a+'">'+c+"</option>")});$("."+c[2]).html(e.join(""));$("."+c[2]).prepend("<option value='' selected='selected'>Select City</option>");$(".chosen-select").trigger("liszt:updated")})}
function handleCountryZipValidation(a){var c=a.attr("data-rel"),c=(new String(c)).split("#"),d=$("."+c[3]),e=$("."+c[2]).val(),c=$("."+c[1]).val(),f=a.val(),h="";$.each(countryZipRegexJSON,function(a,c){if(a===f)return h="^"+c+"$",!1});a=0<d.parent(".form-group").length?d.parent(".form-group").find(".red_star_span"):d.parents(".form-group").find(".red_star_span");""!==h&&null!==h?(a.removeClass("hide"),"233"===f&&""!==e&&""!==c?(d.rules("remove","required regex"),d.rules("add",{required:!0,zipcodeUS:!0,
usZipCode:!0,messages:{required:"Please enter a valid zip.",zipcodeUS:"Invalid US Zipcode format",usZipCode:"Please enter valid US zipcode"}})):(d.rules("remove","zipcodeUS usZipCode"),d.rules("add",{required:!0,regex:h,messages:{required:"Please enter a valid zip.",regex:"Please enter a valid zip."}}))):(a.addClass("hide"),d.rules("remove","zipcodeUS usZipCode required regex"),d.valid())}
function inviteFriends(a,c,d){$("#close_invite_button").attr("disabled","disabled");var e=Ladda.create(document.querySelector("#invite_button"));e.start();var f=document.getElementById("invite_friends").getElementsByTagName("input"),h=0,i="";"1"==d?i="/api/eventInvites":"2"==d&&(i="/api/communityInvites");for(var d=0,g=f.length;d<g;d++)"checkbox"==f[d].type&&h++;users=[];for(d=0;d<h;d++)$("#friend"+d).is(":checked")&&(users.push($("#friend"+d).val()),$("#friend"+d).remove());$.ajax({url:i,type:"POST",
data:{id:a,users:users,invited_by:c},success:function(a){a=JSON.parse(a);$(".select_all_check_box").prop("checked",!1);$("#selected_count").html(0);$("#inviteFriends").modal("hide");showInnerAlert(a.message,a.message_type);$("#invite_button").prop("disabled",!0);e.stop();a=$("#event_id_hidden").val();"undefined"!==typeof a&&updateList(a);$("#close_invite_button").removeAttr("disabled");location.reload()}})}
$(document).on("keyup",".search_widget_txt",function(){search_div=$(this).data("searchbox");"invite_friends"==search_div?searchInList(friendList,this):"friends_list"==search_div?searchInList(friendList,this):"mutual-friends"==search_div?searchInList(mutualFriendsList,this):"invite_patient_friend"==search_div?searchFriendsInList(patientFriends,this):"invite_my_friends"==search_div?searchFriendsInList(myFriendList,this):"invite_team_member"==search_div?searchFriendsInList(friendsToInvite,this):searchInList(membersList,
this)});
function searchInList(a,c){var d="",e="";"string"==typeof c?d=c:(d=$(c).val(),e=$(c).data("searchbox"),e="#"+e+" ");$(e+"#none_found").addClass("hidden");var f=0,h=0;if(!$.isEmptyObject(a.friends.friend)){$.each(a.friends.friend,function(a,c){$(e+" #"+c.friend_id).addClass("hidden");h++});var i=d.toLowerCase();$.each(a.friends.friend,function(a,c){if(c.friend_name.toLowerCase().search(i)!==-1){$(e+"#"+c.friend_id).removeClass("hidden");f++}else f--})}(f==-h||0==h)&&$(e+"#none_found").removeClass("hidden")}
$(document).on("click",".invite_frnds",function(){var a=$(this).attr("id");$("#"+a+" input[type=checkbox]").is(":checked")?($("#"+a+" input[type=checkbox]").prop("checked",!1),$("#"+a).removeClass("active")):($("#"+a+" input[type=checkbox]").prop("checked",!0),$("#"+a).addClass("active"));inviteButtonStatus();handleSelectedBoxCountChange()});
$(document).on("click",".invite_community",function(){var a=$(this).attr("id");$("#"+a+" input[type=checkbox]").is(":checked")?($("#"+a+" input[type=checkbox]").prop("checked",!1),$("#"+a).removeClass("active")):($("#"+a+" input[type=checkbox]").prop("checked",!0),$("#"+a).addClass("active"));inviteCommunityButtonStatus();handleCommunitySelectedBoxCountChange()});
function inviteButtonStatus(){var a=document.getElementById("invite_friends").getElementsByTagName("input"),c=0;if(0!==a.length)for(var d=0,e=a.length;d<e;d++)"checkbox"==a[d].type&&(a[d].checked&&c++,0==c?$("#invite_button").attr("disabled","disabled"):$("#invite_button").prop("disabled",!1));else $("#invite_button").attr("disabled","disabled")}
function inviteCommunityButtonStatus(){var a=document.getElementById("invite_community_friends").getElementsByTagName("input"),c=0;if(0!==a.length)for(var d=0,e=a.length;d<e;d++)"checkbox"==a[d].type&&(a[d].checked&&c++,0==c?$("#invite_button").attr("disabled","disabled"):$("#invite_button").prop("disabled",!1));else $("#invite_button").attr("disabled","disabled")}
function showInnerAlert(a,c){var d=["warning","success","danger"];$.inArray(c,d)&&($.each(d,function(a,c){$("#header-alert").removeClass("alert-"+c)}),$("#header-alert").addClass("alert-"+c),$("#header-alert .alert-content").html(a),$("#header-alert").show(),setTimeout(function(){$("#header-alert").hide()},5E3))}
function showMemberAlert(a,c){var d=["warning","success","danger"];$.inArray(c,d)&&($.each(d,function(a,c){$("#group-section-alert").removeClass("alert-"+c)}),$("#group-section-alert").addClass("alert-"+c),$("#group-section-alert .alert-content").append(a+"<br/>"),$("#group-section-alert").show())}
$("#advance_search").click(function(){$(this).hasClass("advance_search_closed")?($("#advanced_form").slideDown(),$(this).removeClass("advance_search_closed"),$(this).addClass("advance_search_open")):($("#advanced_form").slideUp(),$(this).removeClass("advance_search_open"),$(this).addClass("advance_search_closed"),$("#advanced_flash_error").hide())});
$("#keywords_find").click(function(){$(".event_list #load-more").parent().remove();0==$(".advance_search_header #advanced_flash_error").length&&$(".advance_search_header").prepend('<div class="alert alert-error" style="color: red;" id="advanced_flash_error"><button aria-hidden="true" type="button" class="close" data-dismiss="alert">\u00d7</button><div class="message">Please enter any one keyword</div></div>');$("#advanced_flash_error").hide();var a=getAdvancedSearchData();$.isEmptyObject(a)?($(".event_list #load-more").parent().remove(),
showAlert("advanced_flash_error","Please enter any one keyword"),$("#searchList").html(""),$(".advance_search_header p.pull-left").html(""),$(".event_wraper").addClass("no-border"),window.scrollTo(0,0)):($loadingImg='<img src="/img/loading.gif" /> ',$("#advanced_form").slideUp(),$("#advance_search").removeClass("advance_search_open"),$("#advance_search").addClass("advance_search_closed"),$("#searchList").html($loadingImg),a.ajax=!0,a.type="people",$.ajax({url:"/search/search/index/page:1",data:a,
dataType:"json",success:function(a){$(".event_wraper").removeClass("no-border");1===a.paginator.count?$(".advance_search_header p.pull-left").html(a.paginator.count+" result"):$(".advance_search_header p.pull-left").html(a.paginator.count+" results");$("#searchList").html(a.htm_content);0===$("#searchList .friends_list").length&&$("#searchList").html('<div class="friends_list"><div class="text-center friends_noresult_padding">Sorry, no results containing all your search terms were found.</div></div>');
!0==a.paginator.nextPage&&$("#searchPageList").append('<div id="more_button'+(a.paginator.page+1)+'" class="block"><a href="javascript:load_more_items_advanced('+(a.paginator.page+1)+')" id="load-more" class="btn btn_more pull-right ladda-button more-arrow" data-style="expand-right" data-size="l" data-spinner-color="#3581ED"><span class="ladda-label">More</span></a></div>');window.scrollTo(0,0)}}))});var add_diagnosis_clicked=!1;
$(document).on("click","#add_diagnosis",function(){if(add_diagnosis_clicked)return!1;add_diagnosis_clicked=!0;setTimeout(function(){add_diagnosis_clicked=!1},1E3);if(!$(this).hasClass("plus_disabled")){var a=$("#diagnosis_index").val(),c=parseInt(a)+1;$.ajax({type:"POST",url:"/search/search/getDiagnosisForm",data:{index:c},beforeSend:function(){},success:function(a){$("#advanced_diagnosis_container").append(a);$("#diagnosis_index").val(c);$("#add_diagnosis").addClass("plus_disabled")}})}});
var add_symptoms_clicked=!1;$(document).on("click","#add_symptoms",function(){if(add_symptoms_clicked)return!1;add_symptoms_clicked=!0;setTimeout(function(){add_symptoms_clicked=!1},1E3);if(!$(this).hasClass("plus_disabled")){var a=$("#symptoms_index").val(),c=parseInt(a)+1;$.ajax({type:"POST",url:"/search/search/getSymptomsForm",data:{index:c},beforeSend:function(){},success:function(a){$("#advanced_symptoms_container").append(a);$("#symptoms_index").val(c);$("#add_symptoms").addClass("plus_disabled")}})}});
$("#keyword_male, #keyword_female").change(function(){$("#keyword_male").is(":checked")&&$("#keyword_female").is(":checked")?$("#keyword_gender").val("B"):$("#keyword_male").is(":checked")?$("#keyword_gender").val("M"):$("#keyword_female").is(":checked")?$("#keyword_gender").val("F"):$("#keyword_gender").val("")});
$("#keywords_clear").click(function(){$("#advanced_location_container li.token").remove();$("#advanced_diagnosis_container li.token").remove();$("#advanced_treatment_container li.token").remove();$("#advanced_symptoms_container li.token").remove();$(".advance_search :input").val("");$(".advance_search input:checkbox").each(function(){$(this).is(":checked")&&$(this).attr("checked",!1)})});
$(".event_search .dropdown-menu li a").click(function(){$("#search_icons").removeClass($("#search_icons").attr("class"));$("#search_icons").addClass("search_icons "+$(this).data("classname"));$(".event_search .dropdown-menu li a").removeClass("search_list_active");$(this).addClass("search_list_active")});var el,showOneCard=!1,showCard;
$(document).ready(function(){$(document).hoverIntent({over:function(){if(!1==showOneCard){var c=$(this);$("input, textarea").focusout();$("input, textarea").blur();if(""!=c.data("hovercard")){0<$("textarea#PostQuestion").length&&$("textarea#PostQuestion").blur();var d="/profile/"+encodeURIComponent(c.data("hovercard"))+"/hovercard";$.ajax({url:d,cache:!1,type:"GET",success:function(d){c.attr("data-content",d);c.popover({content:d,template:'<div class="'+c.data("hovercard")+' popover profile_hovercard"><div class="arrow"></div><div class="popover-inner"><div class="popover-content"><p></p></div></div></div>',
html:!0,placement:function(a,c){showOneCard=!0;var d,e,n,k,y,m,q,u,F,w,s;s=function(a){return F<a.top&&q<a.left&&u>a.left+k&&m>a.top+n};d=$(c);w=$.extend({},d.offset(),{width:c.offsetWidth,height:c.offsetHeight});k=100;n=200;F=$(document).scrollTop()+$(".top_header .navbar").height();q=$(document).scrollLeft();u=q+$(".main_container .container").width();m=F+$(window).height()-$(".top_header .navbar").height();e={top:w.top-n,left:w.left+w.width/2-k/2};y={top:w.top+w.height,left:w.left+w.width/2-k/
2};d={top:w.top+w.height/2-n/2,left:w.left-k};w={top:w.top+w.height/2-n/2,left:w.left+w.width};e=s(e);y=s(y);d=s(d);s(w);return e?"top":y?"bottom":d?"left":"right"},container:"body"}).popover("show").on("mouseleave",function(){var c=this;a=setTimeout(function(){0==$(".popover:hover").length&&$(c).popover("destroy")},500);1==$(".popover:hover").length&&clearTimeout(a)}).on("mouseenter",function(){var a=this;$(".popover").on("mouseleave",function(){setTimeout(function(){$(a).popover("hide")},500)})});
$(".popover").each(function(a,d){$(d).hasClass(c.data("hovercard"))||$(d).remove()})}})}showCard=void 0}},out:function(){0==$(".popover:hover").length&&($(".popover").remove(),showOneCard=!1)},selector:"[data-hovercard]",interval:50});var a;$(document).on("mouseleave",".popover",function(){a=setTimeout(function(){$(".profile_hovercard").remove()},300);$(document).on("mouseenter",".profile_hovercard",function(){clearTimeout(a)})});$("body").on("click",function(a){0==$(a.target).closest(".popover").length&&
$(".profile_hovercard").remove();$(".video_modal").modal("hide")});$(window).scroll(function(){clearTimeout(showCard);$(".profile_hovercard").remove()});$(".slimScrollDiv").scroll(function(){clearTimeout(showCard);$(".popover").remove()})});function removeBgColor(){$("#profile_icon_container").css("background-color","#2c589e;")}
function addBgColor(){0<$("#profile_icon_container").children("div.open").length?$("#profile_icon_container").css("background-color","#2c589e;"):$("#profile_icon_container").css("background-color","#1e4687")}var locationCache={};
function initLocationAutoComplete(a,c){$(a).autocomplete({minLength:c,source:function(a,c){if("undefined"===typeof locationJSON){var f=a.term,h;f in locationCache?(h=getFilteredLocationSearchResult(locationCache[f]),c(h)):$.ajax({url:"/api/searchLocation",dataType:"json",data:{term:f},success:function(a){locationCache[f]=a;h=getFilteredLocationSearchResult(a);c(h)}})}else{var i=RegExp("^"+$.ui.autocomplete.escapeRegex(a.term),"i");data=$.grep(locationJSON,function(a){if(i.test(a.label))return{label:a.label,
value:a.value,id:a.id}});h=getFilteredLocationSearchResult(data);c(h)}},select:function(c,e){if(e.item){var f=e.item.id;$(a).parent().find(".location_id_hidden").val(f);$("#add_location").removeClass("plus_disabled");$(".location_id_hidden").each(function(){""===$(this).val()&&$("#add_location").addClass("plus_disabled")})}},search:function(c){if(!0===c.ctrlKey)return!1;$(a).parent().find(".location_id_hidden").val("");$("#add_location").addClass("plus_disabled")},change:function(){0<$(a).parent().find(".location_id_hidden").val()||
$(a).val("")},response:function(c,e){var f=$(a).parent().find(".no_result_msg");0===e.content.length?(f.show(),$(a).parent().find(".location_id_hidden").val(""),$(a).val("")):f.hide()}})}function getFilteredLocationSearchResult(a){var c=$("input.location_id_hidden").map(function(){if(""!==this.value)return this.value}).get();return $.map(a,function(a){if(-1==$.inArray(a.id.toString(),c))return{label:a.label,value:a.value,id:a.id}})}var add_location_clicked=!1;
$(document).on("click","#add_location",function(){if(add_location_clicked)return!1;add_location_clicked=!0;setTimeout(function(){add_location_clicked=!1},1E3);if(!$(this).hasClass("plus_disabled")){var a=$("#location_index").val(),c=parseInt(a)+1;$.ajax({type:"POST",url:"/search/search/getLocationForm",data:{index:c},beforeSend:function(){},success:function(a){$("#advanced_location_container").append(a);$("#location_index").val(c);$("#add_location").addClass("plus_disabled")}})}});
var symptomCache={};
function initSymptomAutoComplete(a,c){$(a).autocomplete({minLength:c,source:function(a,c){if("undefined"===typeof symptomJSON){var f=a.term,h;f in symptomCache?(h=getFilteredSymptomSearchResult(symptomCache[f]),c(h)):$.ajax({url:"/api/searchSymptom",dataType:"json",data:{term:f},success:function(a){symptomCache[f]=a;h=getFilteredSymptomSearchResult(a);c(h)}})}else{var i=RegExp("^"+$.ui.autocomplete.escapeRegex(a.term),"i");data=$.grep(symptomJSON,function(a){if(i.test(a.label))return{label:a.label,value:a.value,
id:a.id}});h=getFilteredSymptomSearchResult(data);c(h)}},select:function(c,e){if(e.item){var f=e.item.id;$(a).parent().find(".symptoms_id_hidden").val(f);$("#add_symptoms").removeClass("plus_disabled");$(".symptoms_id_hidden").each(function(){""===$(this).val()&&$("#add_symptoms").addClass("plus_disabled")})}},search:function(c){if(!0===c.ctrlKey)return!1;$(a).parent().find(".symptoms_id_hidden").val("");$("#add_symptoms").addClass("plus_disabled")},change:function(){0<$(a).parent().find(".symptoms_id_hidden").val()||
$(a).val("")},response:function(c,e){var f=$(a).parent().find(".no_result_msg");0===e.content.length?(f.show(),$(a).parent().find(".symptoms_id_hidden").val(""),$(a).val("")):f.hide()}})}function getFilteredSymptomSearchResult(a){var c=$("input.symptoms_id_hidden").map(function(){if(""!==this.value)return this.value}).get();return $.map(a,function(a){if(-1==$.inArray(a.id.toString(),c))return{label:a.label,value:a.value,id:a.id}})}var symptomAddCache={};
function initSymptomAddAutoComplete(a,c){$(a).autocomplete({minLength:c,source:function(c,e){if("undefined"===typeof symptomJSON){var f=$.trim(c.term),h;$(a).parent().find(".no_result_msg").hide();f in symptomAddCache?(h=getFilteredAddSymptomSearchResult(symptomAddCache[f]),e(h)):($("#symptom_error_message").html(""),$.ajax({url:"/user/api/searchNewSymptom",dataType:"json",data:{term:f},success:function(a){symptomCache[f]=a;h=getFilteredAddSymptomSearchResult(a);e(h)}}))}else{var i=RegExp("^"+$.ui.autocomplete.escapeRegex(c.term),
"i");data=$.grep(symptomJSON,function(a){if(i.test(a.label))return{label:a.label,value:a.value,id:a.id}});h=getFilteredAddSymptomSearchResult(data);e(h)}},open:function(){$(".ui-menu").width(300)},select:function(c,e){if(e.item){var f=e.item.id;$(a).parent().find(".symptoms_id_hidden").val(f);$("#add_symptoms").removeClass("plus_disabled");$(".symptoms_id_hidden").each(function(){""===$(this).val()&&$("#add_symptoms").addClass("plus_disabled")})}},search:function(c){if(!0===c.ctrlKey)return!1;$(a).parent().find(".symptoms_id_hidden").val("");
$("#add_symptoms").addClass("plus_disabled")},change:function(){$(a).parent().find(".symptoms_id_hidden").val()||$(a).val("")},response:function(c,e){var f=$(a).parent().find(".no_result_msg");0===e.content.length?(f.show(),$(a).parent().find(".symptoms_id_hidden").val("")):f.hide()}})}
function getFilteredAddSymptomSearchResult(a){var c=$("input.symptoms_id_hidden").map(function(){if(""!==this.value)return this.value}).get();return $.map(a,function(a){if(-1==$.inArray(a.id.toString(),c))return{label:a.label,value:a.value,id:a.id}})}function getFilteredLocationSearchResult(a){var c=$("input.location_id_hidden").map(function(){if(""!==this.value)return this.value}).get();return $.map(a,function(a){if(-1==$.inArray(a.id.toString(),c))return{label:a.label,value:a.value,id:a.id}})}
var add_treatment_clicked=!1;$(document).on("click","#add_treatment",function(){if(add_treatment_clicked)return!1;add_treatment_clicked=!0;setTimeout(function(){add_treatment_clicked=!1},1E3);if(!$(this).hasClass("plus_disabled")){var a=$("#treatment_index").val(),c=parseInt(a)+1;$.ajax({type:"POST",url:"/search/search/getTreatmentForm",data:{index:c},beforeSend:function(){},success:function(a){$("#advanced_treatment_container").append(a);$("#treatment_index").val(c);$("#add_treatment").addClass("plus_disabled")}})}});
var treatmentCache={};
function initTreatmentAutoComplete(a,c){$(a).autocomplete({minLength:c,source:function(a,c){if("undefined"===typeof treatmentJSON){var f=a.term,h;f in treatmentCache?(h=getFilteredTreatmentSearchResult(treatmentCache[f]),c(h)):$.ajax({url:"/api/searchTreatment",dataType:"json",data:{term:f},success:function(a){treatmentCache[f]=a;h=getFilteredTreatmentSearchResult(a);c(h)}})}else{var i=RegExp("^"+$.ui.autocomplete.escapeRegex(a.term),"i");data=$.grep(treatmentJSON,function(a){if(i.test(a.label))return{label:a.label,value:a.value,
id:a.id}});h=getFilteredTreatmentSearchResult(data);c(h)}},select:function(c,e){if(e.item){var f=e.item.id;$(a).parent().find(".treatment_id_hidden").val(f);$("#add_treatment").removeClass("plus_disabled");$(".treatment_id_hidden").each(function(){""===$(this).val()&&$("#add_treatment").addClass("plus_disabled")})}},search:function(c){if(!0===c.ctrlKey)return!1;$(a).parent().find(".treatment_id_hidden").val("");$("#add_treatment").addClass("plus_disabled")},change:function(){0<$(a).parent().find(".treatment_id_hidden").val()||
$(a).val("")},response:function(c,e){var f=$(a).parent().find(".no_result_msg");0===e.content.length?(f.show(),$(a).parent().find(".treatment_id_hidden").val(""),$(a).val("")):f.hide()}})}function getFilteredTreatmentSearchResult(a){var c=$("input.treatment_id_hidden").map(function(){if(""!==this.value)return this.value}).get();return $.map(a,function(a){if(-1==$.inArray(a.id.toString(),c))return{label:a.label,value:a.value,id:a.id}})}
$(document).on("click","#frineds_notification_icon",function(){getFriendNotificationUpdates();loadPeopleMayKnowNotificationsAjax()});$(document).on("click","#message_notification_icon",function(){getMessageNotificationUpdates()});var totalNotificationCount=0;
$(document).on("click","#alarm_notification_icon",function(){var a=$("#unread_notification_count"),c=a.html(),c=""===c||null===c?0:parseInt(c);a.html("").removeClass("visible").addClass("hidden");var d=0<totalNotificationCount?!0:!1;if(!1===d||0<c)totalNotificationCount+=c,!0===d&&$("ul#notification_list_container ul.notification_scroll").prepend('<li id="notification_loader_item"><center><img class="notification_loader" width="30" height="30" src="/img/loader.gif" alt="Loading..."></center></li>'),
$.ajax({data:{limit:c,append:d},url:"/notification/notification/getNotifications",type:"POST",dataType:"json",success:function(a){clearNotificationCount("unread_notification_count");$("#notification_loader_item").remove();!0===d?$("ul#notification_list_container ul.notification_scroll").prepend(a.html_content):$("#notification_container ul#notification_list_container").html(a.html_content);applySlimScrollToNotification();$("#notification_container ul").addClass("open")}});a=$("#notification_list_container a.more");
0<totalNotificationCount?a.removeClass("hidden"):a.addClass("hidden")});function clearNotificationCount(a){socket.emit("notify_user",{user_id:app.loggedInUserId,notification_name:a,notification_count:0})}
function applySlimScrollToNotification(){4<$(".notification_scroll li").length?($(".notification_scroll").slimScroll({color:"#BBDAEC",railColor:"#EBF5F7",size:"12px",height:"310px",railVisible:!0}),$(".notification_scroll").parent().css({"margin-top":"-20px"})):$("#notification_container ul ul").css({"margin-top":"-20px"})}
$(document).on("click","#notification_list_container .notfctn_item",function(){if(""!==$(this).attr("data-href")){var a=$(this).attr("data-href");if($(this).hasClass("disabled")||$(this).hasClass("popup")){if($(this).hasClass("unread")){var c=$(this);$.post(a,function(){c.removeClass("unread").addClass("read");var a=$("#unread_notification_count");if(0<a.length){var e=parseInt(a.html()),e=e-1;0<e?a.html(e):a.removeClass("visible").addClass("hidden")}})}}else window.location.href=a}0<$(this).find("form.additional_info_frm").length&&
(a=$(this).find("form.additional_info_frm"),"medication_reminder"===a.find(".activity_type").val()&&($(".notifications_container").removeClass("open"),showMedicationNotificationInfoPopUp(a)))});
function showMedicationNotificationInfoPopUp(a){$modal=$("#medication_info_dialog");$.each(["name","dose","form","amount","route"],function(c,d){$field=a.find('input[name="'+d+'"]');$modalFieldRow=$modal.find("tr."+d);$modalField=$modalFieldRow.find("td.value");if(0<$field.length){var e=$field.val();$modalField.html(e);$modalFieldRow.show()}else $modalField.html(""),$modalFieldRow.hide()});$modal.modal("show")}
$(document).on("click","#message_notification_container li.message_ntfcn_content",function(){var a=$(this).children("#other_user_id_hidden").val();window.location.href="/message/details/index/"+a});
function loadFriendRequestsNotificationsAjax(a){var c=null;$.ajax({url:"/notification/notification/getFriendRequestsNotifications",type:"POST",dataType:"json",success:function(d){c=d.notification_counts;$("#frineds_notification_container ul .friends_notification_loader").hide();$("#frineds_notification_container ul#frineds_notification_list_container li.pending_rquests_notification, .pending_rquests_notification_header").remove();$("#frineds_notification_container ul#frineds_notification_list_container").prepend(d.html_content);
$("#frineds_notification_container ul").addClass("open");a(c)}})}
function loadMessageNotificationAjax(a){var c=null;$.ajax({url:"/notification/notification/getMessageNotifications",type:"POST",dataType:"json",success:function(d){c=d.notification_counts;$("#message_notification_container ul .message_notification_loader").hide();$("#message_notification_container ul#message_notification_list_container").html(d.html_content);applySlimScrollToMessageNotification();$("#message_notification_container ul").addClass("open");a(c)}})}
function loadPeopleMayKnowNotificationsAjax(){$.ajax({url:"/notification/notification/getPeopleMayKnowNotifications",type:"POST",dataType:"json",success:function(a){$("#frineds_notification_container ul#frineds_notification_list_container li.people_mayknow_notification, .people_mayknow_notification_header").remove();$("#frineds_notification_container ul#frineds_notification_list_container").append(a.html_content);$("#frineds_notification_container ul").addClass("open")}})}
$(document).on("click",".dropdown-menu",function(a){$(this).hasClass("keep_open")&&a.stopPropagation()});function getMessageNotificationUpdates(){loadMessageNotificationAjax(function(a){var c=$("#unread_message_count");c.html(a);0<a?c.removeClass("hidden").addClass("visible"):c.removeClass("visible").addClass("hidden")})}
function getFriendNotificationUpdates(){loadFriendRequestsNotificationsAjax(function(a){var c=$("#pending_friend_requests_count");c.html(a);0<a?c.removeClass("hidden").addClass("visible"):c.removeClass("visible").addClass("hidden")})}function updateAllNotificationCounts(a){$.each(a.data,function(a,d){updateNotificationCount(d)})}
function updateNotificationCount(a){var c=$("#"+a.notification_name);0<c.length&&parseInt(c.html())!=a.notification_count&&(c.html(a.notification_count),updateNotificationsMouseHoverTitle(a),0<a.notification_count?(c.removeClass("hidden").addClass("visible"),c.closest(".notifications_container").find("ul").hasClass("open")&&updateAllNotificationsLilst(a.notification_name)):(c.closest("ul").removeClass("open"),c.removeClass("visible").addClass("hidden")))}
function updateAllNotificationsLilst(a){if(null!=a)switch(a){case "pending_friend_requests_count":getFriendNotificationUpdates()}}
function updateNotificationsMouseHoverTitle(a){if(null!==a.notification_name)switch(a.notification_name){case "unread_message_count":0<a.notification_count?$(".message_icon_dashboard").attr("title","Messages"):$(".message_icon_dashboard").attr("title","No new messages");break;case "unread_notification_count":0<a.notification_count?$("#alarm_notification_icon").attr("title","Reminders"):$("#alarm_notification_icon").attr("title","No active reminders")}}
function updateFriendNotificationListRow(a){var c=null,d=null;$("#frineds_notification_list_container ."+a+" :disabled").each(function(){d=$("#frineds_notification_list_container ."+a+":hidden");0<d.length?(c=d.first(),c.removeClass("hidden"),$(this).closest("li").replaceWith(c)):loadPeopleMayKnowNotificationsAjax()})}
function applySlimScrollToMessageNotification(){4<$(".message_notification_scroll li").length?($(".message_notification_scroll").slimScroll({color:"#BBDAEC",railColor:"#EBF5F7",size:"12px",height:"auto",railVisible:!0}),$(".message_notification_scroll").parent().css({"margin-top":"-20px"})):$("#message_notification_container ul ul").css({"margin-top":"-20px"})}
function updateNotificationCounts(){$.ajax({url:"/notification/notification/getNotificationCounts",type:"POST",dataType:"json",success:function(a){updateAllNotificationCounts(a)}})}function getVimeoEmbedCode(a,c,d){a='<iframe src="https://player.vimeo.com/video/%VIDEO_ID%?autoplay=1" width="%WIDTH%" height="%HEIGHT%" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>'.replace("%VIDEO_ID%",a);a=a.replace("%WIDTH%",c);return a=a.replace("%HEIGHT%",d)}
function playNotificationMusic(){var a=document.getElementById("notification_audio"),c=document.getElementById("notification_audio_ie8");Modernizr.audio?a.play():c.controls.play()}$(document).on("click",".home_video_container [data-video]",function(){showVideoPopup(this)});
$(document).on("click",".profile_video",function(){if($("#profile_video_container").length){$("#profile_video_container_wrapper").show();$(this).addClass("hide");$(".profile_tile .profile_cover_gear").addClass("hide");if(9==isIE()||isIE11())$("#profile_video_container_wrapper").show(),jwplayer("profile_video_container").seek(0);$("#profile_video_container_wrapper").css("z-index",999);$("#profile_video_minimize_icon").removeClass("hide");jwplayer("profile_video_container").play()}});
function hideCoverVideo(){$("#profile_video_container").length&&(9==isIE()||isIE11()?("PAUSED"!==jwplayer("profile_video_container").getState()&&jwplayer("profile_video_container").pause(),$("#profile_video_container_wrapper").hide()):(jwplayer("profile_video_container").stop(),setTimeout(function(){"IDLE"!==jwplayer("profile_video_container").getState()&&jwplayer("profile_video_container").stop()},100)),$("#profile_video_container_wrapper").hide(),$("#profile_video_container_wrapper").css("z-index",
-1),$("#profile_video_minimize_icon").addClass("hide"),$(".profile_video").removeClass("hide"),$(".dashboard_video_play").removeClass("hide"),$(".profile_tile .profile_cover_gear").removeClass("hide"))}$(document).on("click","#profile_video_minimize_icon",function(){hideCoverVideo()});
function showVideoPopup(a){var c=$(window).height(),c=c-20*c/100+"px",d=$(a).attr("data-video");d&&(a=$(a).embedPlayer(d,"100%",c,!0),bootbox.dialog({message:a,closeButton:!0,backdrop:!0,onEscape:function(){},animate:!1,className:"video_modal"}))}
function updateOnlineFriendsList(){$.ajax({url:"/user/dashboard/getOnlineFriendsHTML",success:function(a){$("#online_friends_list").length&&$("#online_friends_list").html(a)}});$.ajax({url:"/user/dashboard/getOnlineFriendsJSON",dataType:"json",success:function(a){"undefined"!==typeof my_friends_json&&(my_friends_json=a)}})}
function updateProfileOnlineFriendsList(){$.ajax({url:"/user/profile/getOnlineFriendsHTML",success:function(a){var c=$("#profile_friends_online .details_container");c.length&&(c.html(a),400<c.height()&&!c.parent().hasClass("slimScrollDiv")&&applySlimScroll(c,"450px"))}});$.ajax({url:"/user/profile/getOnlineUserCountAjax",success:function(a){$("#profile_friends_online").length&&$("#profile_friends_online h4").html("Online Friends ("+a+")")}})}
function updateDiseaseOnlineFriendsList(){$.ajax({url:"/user/profile/getOnlineFriendsHTML",success:function(a){var c=$("#disease_friends_online .details_container");c.length&&(c.html(a),400<c.height()&&!c.parent().hasClass("slimScrollDiv")&&applySlimScroll(c,"450px"))}});$.ajax({url:"/user/profile/getOnlineUserCountAjax",success:function(a){$("#disease_friends_online").length&&$("#disease_friends_online h4").html("Online Friends ("+a+")")}})}
function updateVideoProfileOnlineFriendsList(){$.ajax({url:"/user/profile/getOnlineVideoFriendsHTML",success:function(a){$("#online_video_friends_list").length&&$("#online_video_friends_list").html(a)}})}
function updateDiseaseMemberList(){var a=$("#disease_members_online").data("disease-id");$.ajax({url:"/disease/diseases/getDiseaseMembersHTML",data:{diseaseId:a},dataType:"html",type:"POST",success:function(a){var d=$("#disease_members_online .details_container");d.length&&(d.html(a),400<d.height()&&!d.parent().hasClass("slimScrollDiv")&&applySlimScroll(d,"450px"));return!0}});$.ajax({url:"/disease/diseases/getDiseaseMembersCountAjax",data:{diseaseId:a},dataType:"html",type:"POST",success:function(a){$("#disease_members_online").length&&
$("#disease_members_online h4").html("Online Members ("+a+")")}})}
function updateCommunityMembersList(){var a=$("#community_members_online").data("community-id");$.ajax({url:"/community/details/getCommunityMembersHTML",data:{communityId:a},dataType:"html",type:"POST",success:function(a){var d=$("#community_members_online .details_container");d.length&&(d.html(a),400<d.height()&&!d.parent().hasClass("slimScrollDiv")&&applySlimScroll(d,"450px"));return!0}});$.ajax({url:"/community/details/getCommunityMembersCountAjax",data:{communityId:a},dataType:"html",type:"POST",
success:function(a){$("#community_members_online").length&&$("#community_members_online h4").html("Online Members ("+a+")")}})}function applySlimScroll(a,c){return a.length?(a.slimScroll({color:"#e2e2e2",railColor:"#f1f1f1",size:"8px",height:c,distance:"6px",disableFadeOut:!1,railVisible:!0}),!0):!1}
$(document).ready(function(){8<$("#online_friends_list .friends_list_dashboard").length&&$("#online_friends_list").slimScroll({color:"rgba(225, 225, 225, 0.2)",size:"8px",height:"432px",distance:"6px",disableFadeOut:!1});$(".my_condition_tile").length&&$(".my_condition_tile").slimScroll({color:"rgba(225, 225, 225, 0.2)",size:"8px",height:"214px",distance:"6px",disableFadeOut:!1});$("#disease_members_online .details_container").length&&$("#disease_members_online .details_container");$("#disease_friends_online .details_container").length&&
$("#disease_friends_online .details_container");$("#profile_friends_online .details_container").length&&$("#profile_friends_online .details_container");$(".favorite_icon").parents(".disease").length||$(".favorite_icon").attr("title","");$(".report_abuse").parents(".disease").length&&$(".report_abuse").attr("title","Report Abuse")});
function getTimeZoneData(){var a=new Date,c=new Date(a.getFullYear(),0,1),d=new Date(a.getFullYear(),6,1),c=a.getTimezoneOffset()<Math.max(c.getTimezoneOffset(),d.getTimezoneOffset());return{offset:-a.getTimezoneOffset()/60,dst:+c}}function getSymGraphTiles(){$.ajax({url:"/user/mysymptom/getGraphBlock",cache:!1,type:"POST",success:function(a){$("#symptom_tiles").html(a);renderWeeklyGraphs()}})}
function renderWeeklyGraphs(){var a=$(".mysymptoms .symptom_graph_rep .graph_div div.symptom_graph"),c=$.trim($("#symptomUserId").val()),d=app.show_site_notfications;$.each(a,function(e,f){var h=$(f).attr("id");a.length-1==e&&(app.show_site_notfications=d);getSymptomWeeklySeverityGraph(h,c)})}function getSymLists(a){$.ajax({url:"/user/mysymptom/getSymptomList",cache:!1,type:"POST",data:{symptom_date:a},success:function(a){$("#symptom_user_list").html(a)}})}
function getHealthWidget(){$.ajax({url:"/user/myhealth/getDailyHealthWidget",cache:!1,type:"POST",success:function(a){$("#health_indicator").html(a);renderGaugeChart()}})}$(document).on("mouseover","#my_library_container .posting_area",function(){$(this).find(".remove_from_favorite_btn").removeClass("hide")});$(document).on("mouseout","#my_library_container .posting_area",function(){$(this).find(".remove_from_favorite_btn").addClass("hide")});
$(document).on("click",".remove_from_favorite_btn",function(){var a=this,c=$(this).data("post_id");bootbox.confirm("Are you sure you want to remove this post from Library?",function(d){d&&(addToFavoritePost(c,0),$(a).closest(".posting_area").hide())})});
$(document).on("click",".not_favorite",function(){var a=$(this).data("post_id");$(this).removeClass("not_favorite").addClass("favorite");$(this).parents(".disease").length&&$(this).attr("title","Remove from my library.");$(this).children("span").html("Remove from my library");addToFavoritePost(a,1)});
$(document).on("click",".favorite",function(){var a=$(this).data("post_id");$(this).removeClass("favorite").addClass("not_favorite");$(this).parents(".disease").length&&$(this).attr("title","Add to my library.");$(this).children("span").html("Add to my library");addToFavoritePost(a,0)});
$(document).on("click","#symptom_submit_button",function(){symptom_id=$.trim($("#symptoms_id_hidden").val());severity=0;$("#symptom_error_message").html("");0<$("input[name=symptomHistoryRadio]:radio:checked").length&&(severity=$("input[name=symptomHistoryRadio]:radio:checked").val());rotate=Ladda.create(this);null!=rotate&&rotate.start();if(!$.isNumeric(symptom_id))return $("#symptom_error_message").text("Please enter valid symptom.").show(),rotate.stop(),!1;0==symptom_id?(new_symptom=$.trim($("#symptom-search").val()),
$("#symptom_submit_button").attr("disabled","disabled"),$.ajax({type:"POST",url:"/user/api/addNewUserSymptom",data:{new_symptom:new_symptom,severity:severity},dataType:"json",beforeSend:function(){},success:function(a){rotate.stop();!0==a.status?(socket.emit("my_health_update",{room:$("#graphUpdatedInRoom").val(),type:"symptom"}),0<$("#symptomTilePage").length?getSymGraphTiles():0<$("#symptomListPage").length?(symptom_date=$.trim($("#symptomDatepicker").val()),getSymLists(symptom_date)):getHealthWidget(),
$("#addSymptom").modal("hide"),$("#symptom_error_message").html(""),$("#symptom-search").val(""),$("#symptoms_id_hidden").val(""),$("#add_new_score_button").show()):$("#symptom_search_error_message").text("Unable to save").show()}})):$.ajax({type:"POST",url:"/user/api/addUserSymptom",data:{id:symptom_id,severity:severity},dataType:"json",beforeSend:function(){},success:function(a){rotate.stop();!0==a?(socket.emit("my_health_update",{room:$("#graphUpdatedInRoom").val(),type:"symptom"}),0<$("#symptomTilePage").length?
getSymGraphTiles():0<$("#symptomListPage").length?(symptom_date=$.trim($("#symptomDatepicker").val()),getSymLists(symptom_date)):getHealthWidget(),$("#addSymptom").modal("hide"),$("#symptom_error_message").html(""),$("#symptom-search").val(""),$("#symptoms_id_hidden").val(""),$("#add_new_score_button").show()):$("#symptom_search_error_message").text("Unable to save").show()}})});$(document).on("click","#close_symptom_submit_button",function(){$("#symptom_error_message").html("")});
$(document).on("click","#delete_user_symptom",function(){is_symptom_newscore_active||(symptomId=$(this).data("symptom-id"),bootbox.confirm("Are you sure you want to delete this symptom?",function(a){$("#symptom_conditions").modal("hide");a&&$.ajax({url:"/symptom/delete",cache:!1,data:{id:symptomId},type:"POST",success:function(a){a&&(socket.emit("my_health_update",{room:$("#graphUpdatedInRoom").val(),type:"symptom"}),$("#add_user_symptom").show(),$("#delete_user_symptom").hide(),$("#symptom_history_row").html(""),
$("#add_new_history_button").hide(),$(".symptom_history_filter_option").hide(),load_symptom_history(),getSymptomSeverityGraph("symptomSeverityDetailGraph"),window.location.href="/profile/mysymptom")}})}))});
$(document).on("click","#add_user_symptom",function(){symptomId=$(this).data("symptom-id");bootbox.confirm("Are you sure you want to add this symptom?",function(a){a&&$.ajax({type:"POST",url:"/user/api/addUserSymptom",data:{id:symptomId},dataType:"json",success:function(a){!0==a&&(socket.emit("my_health_update",{room:$("#graphUpdatedInRoom").val(),type:"symptom"}),$("#add_user_symptom").hide(),$("#delete_user_symptom").show(),$("#add_new_history_button").show(),$("#symptom_history_row").html(""),
load_symptom_history(),getSymptomSeverityGraph("symptomSeverityDetailGraph"))}})})});
$(document).on("click",".symptom-history-delete",function(){elem=$(this).closest(".symptom-history-div");divId=elem.data("id");symptomId=elem.data("symptom-id");bootbox.confirm("Are you sure you want to delete this symptom history?",function(a){a&&$.ajax({url:"/mysymptom/delete/"+symptomId+"/"+divId,cache:!1,success:function(a){a&&(socket.emit("my_health_update",{room:$("#graphUpdatedInRoom").val(),type:"symptom"}),elem.remove(),getSymptomSeverityGraph("symptomSeverityDetailGraph"))}})})});
$(document).on("click","#symptom_history_cancel",function(){$("#symptom_history_error_message").html("")});
$(document).on("click","#symptom_history_save",function(){symptom_id=$.trim($("#symptom_id").val());symptom_date=$.trim($("#selectedSymptomDate").val());if(0<$("input[name=symptomHistoryRadio]:radio:checked").length)severity=$("input[name=symptomHistoryRadio]:radio:checked").val(),$("#symptom_history_save").attr("disabled","disabled"),$.ajax({url:"/user/api/addUserSeverity",data:{id:symptom_id,date:symptom_date,severity:severity},type:"POST",success:function(){socket.emit("my_health_update",{room:$("#graphUpdatedInRoom").val(),
type:"symptom"});$("#symptom_conditions").modal("hide");$("#symptom_history_row").html("");load_symptom_history();$("#symptom_history_save").removeAttr("disabled");getSymptomSeverityGraph("symptomSeverityDetailGraph")}});else return $("#symptom_history_error_message").text("Please select valid severity.").show(),!1});$(document).on("click",".condition_indicator label input",function(){$(this).closest(".condition_popup_container").find("label").removeClass("on");$(this).parent().addClass("on")});
$(document).on("click","#add_new_history_button",function(){$("#selectedSymptomDate").val("");$(".condition_popup_container").find("label").removeClass("on");$("#symptomHistoryDatepicker").datepicker("show");bootbox.hideAll()});
$(document).on("click",".symptom-history-edit",function(){$(".condition_popup_container").find("label").removeClass("on");elem=$(this).closest(".symptom-history-div");divId=elem.data("id");displayDate=elem.data("date");severity=elem.data("severity");severity_name=elem.data("severity-name");symptom_id=$.trim($("#symptom_id").val());$("#symptom_conditions").modal("show");bootbox.hideAll();myDate=new Date(Date.parse(displayDate));symptom_date=myDate.getFullYear()+"-"+(myDate.getMonth()+1)+"-"+myDate.getDate();
$("#date-selected").html(symptom_date);divIdDate=new Date(1E3*divId);symptom_gmt_date=divIdDate.getMonth()+1+"/"+divIdDate.getDate()+"/"+divIdDate.getFullYear();$("#selectedSymptomDate").val(displayDate);$(".condition_"+severity_name).addClass("on");$(".condition_"+severity_name).find("input").attr("checked",!0)});
$(document).on("click","ul#symptom_history_filter li a",function(){var a=$(this).data("filter_value");$("#symptom_filter_year").val(a);var c=$("#symptom_id").val(),d=$("#symptomSeverityDetailGraph").data("username");$.ajax({url:"/symptom/history/list",cache:!1,type:"POST",data:{filterValue:a,symId:c,username:d},success:function(a){$("#symptom_history_row").html(a)}})});
function load_symptom_history(){sym_id=$("#symptom_id").val();var a=$("#symptomSeverityDetailGraph").data("username");$.ajax({url:"/symptom/history/list",cache:!1,type:"POST",data:{symId:sym_id,username:a},success:function(a){$("#symptom_history_row").append(a)}})}function addToFavoritePost(a,c){$.ajax({url:"/post/api/addToFavorite",cache:!1,type:"POST",data:{post_id:a,status:c},success:function(){}})}
function getUserNow(){var a=new Date,c=a.getTime(),a=6E4*a.getTimezoneOffset(),c=c+a,a=parseFloat(app.user_timezone);return new Date(c+36E5*a)}var chatMessageAJAXRequest=null;
function appReceiveArrowchatMessage(a,c,d){0<$("#chat_notification_container").length&&(null!==chatMessageAJAXRequest&&chatMessageAJAXRequest.abort(),chatMessageAJAXRequest=$.ajax({method:"POST",url:"/user/dashboard/getChatMessageData",data:{from:a,message:c,sent:d},success:function(a){showBlurDashboardImages();$("#chat_notification_container").html(a).show()}}))}
function showBlurDashboardImages(){loadBlurImages($("#dashboard_image_container img"));loadBlurImages($("#dashboard_slideshow_container img"))}function loadBlurImages(a){a.each(function(){var a=$(this).attr("src");if(-1===a.indexOf("_blur")){var d;-1<a.indexOf(".jpg")?d=".jpg":-1<a.indexOf(".png")?d=".png":-1<a.indexOf(".gif")&&(d=".gif");a=a.replace(d,"_blur"+d);$(this).attr("src",a)}})}
$(document).ready(function(){$(".back-to-top").hide();$(function(){$(window).scroll(function(){300<$(this).scrollTop()?$(".back-to-top").fadeIn():$(".back-to-top").fadeOut()});$(".back-to-top").click(function(){$("body,html").animate({scrollTop:0},400);return!1})})});$(document).on("click","#create_volunteer",function(){$.ajax({url:"/myteam/api/createVolunteer",cache:!1,type:"POST",dataType:"json",success:function(a){!0==a.success&&window.location.reload(!0)}})});
$(document).on("click","#remove_volunteer",function(){$.ajax({url:"/myteam/api/deleteVolunteer",cache:!1,type:"POST",dataType:"json",success:function(a){!0==a.success&&window.location.reload(!0)}})});
function searchFriendsInList(a,c){var d="",d="string"==typeof c?c:$(c).val();$(".none_found").addClass("hidden");$("#team_error_message").hide();$(".invite_submit").attr("disabled",!1);var e=0,f=0;if(!$.isEmptyObject(a.friends.friend)){$.each(a.friends.friend,function(a,c){$(".invite_team_members"+c.friend_id).addClass("hidden");f++});var h=d.toLowerCase();$.each(a.friends.friend,function(a,c){-1!==c.friend_name.toLowerCase().search(h)?($(".invite_team_members"+c.friend_id).removeClass("hidden"),
e++):e--})}if(e==-f||0==f)$(".none_found").removeClass("hidden"),$("#team_error_message").hide(),$(".invite_submit").attr("disabled","disabled")}
$(document).on("click",".invite_close_button",function(){$("#search_friends").val("");$("#none_found").addClass("hidden");$("#search_friends").keyup();$('input[type="checkbox"]').parent(".invite_frnds").removeClass("active");$('input[type="checkbox"]').prop("checked",!1);$(".select_all_check_box").prop("checked",!1);$("#selected_count").html(0);$("#invite_button").prop("disabled",!0)});
$(document).on("change",".select_all_check_box",function(){var a=$("#invite_friends .not_invited");$(this).is(":checked")?(a.addClass("active"),$("#invite_button").prop("disabled",!1),$(".invite_box").prop("checked",!0)):(a.removeClass("active"),$("#invite_button").attr("disabled","disabled"),$(".invite_box").prop("checked",!1));handleSelectedBoxCountChange()});
$(document).on("change",".select_all_community_check_box",function(){var a=$("#invite_community_friends .community_not_invited");$(this).is(":checked")?(a.addClass("active"),$("#invite_button").prop("disabled",!1),$(".invite_box").prop("checked",!0)):(a.removeClass("active"),$("#invite_button").attr("disabled","disabled"),$(".invite_box").prop("checked",!1));handleCommunitySelectedBoxCountChange()});
function handleSelectedBoxCountChange(){var a=0;$(".not_invited input[type=checkbox]").each(function(){$(this).is(":checked")&&(a+=1)});$("#selected_count").html(a)}function handleCommunitySelectedBoxCountChange(){var a=0;$(".community_not_invited input[type=checkbox]").each(function(){$(this).is(":checked")&&(a+=1)});$("#selected_community_count").html(a)}
$(document).on("click",".disease_follow_btn",function(){diseaseId=$(this).data("disease-id");followButton=$(this);$.ajax({url:"/user/api/followDiseasePage",data:{diseaseId:diseaseId},type:"POST",cache:!1,success:function(a){a&&(followButton.hide(),followButton.next(".disease_unfollow_btn").show(),$("#disease_friends_online").length&&updateDiseaseMemberList())}})});
$(document).on("click",".disease_unfollow_btn",function(){diseaseId=$(this).data("disease-id");unfollowButton=$(this);bootbox.dialog({message:"Are you sure you want to unfollow this disease?",title:"Unfollow",closeButton:!0,onEscape:function(){},buttons:{main:{label:"Yes",className:"btn btn_active",callback:function(a){a&&$.ajax({url:"/user/api/unFollowDiseasePage",data:{diseaseId:diseaseId},type:"POST",cache:!1,success:function(a){a&&(unfollowButton.hide(),unfollowButton.prev(".disease_follow_btn").show(),
$("#disease_friends_online").length&&updateDiseaseMemberList())}})}},danger:{label:"No",className:"btn btn_clear"}}})});$(document).on("click",".profile_follow_btn",function(){profileId=$(this).data("profile-id");followButton=$(this);$.ajax({url:"/user/api/followProfilePage",data:{profileId:profileId},type:"POST",cache:!1,success:function(a){a&&(followButton.hide(),followButton.next(".profile_unfollow_btn").show())}})});
$(document).on("click",".profile_unfollow_btn",function(){profileId=$(this).data("profile-id");unfollowButton=$(this);bootbox.dialog({message:"Are you sure you want to unfollow this user?",title:"Unfollow",closeButton:!0,onEscape:function(){},buttons:{main:{label:"Yes",className:"btn btn_active",callback:function(a){a&&$.ajax({url:"/user/api/unFollowProfilePage",data:{profileId:profileId},type:"POST",cache:!1,success:function(a){a&&(unfollowButton.hide(),unfollowButton.prev(".profile_follow_btn").show())}})}},
danger:{label:"No",className:"btn btn_clear"}}})});$(document).on("click",".notification_switch",function(){var a=$(this).parent().data("follow-id"),c=$(this).parent().data("notification-type"),d=$(this).data("status");element=$(this);$.ajax({url:"/user/api/switchNotification",data:{Id:a,type:c,status:d},dataType:"json",type:"POST",cache:!1,success:function(a){1==a.notification_type?element.next(".notification_off").show():element.prev(".notification_on").show();element.hide();window.location.reload()}})});
$(document).on("click",".tracker-history-delete",function(){dataDiv=$(this).closest(".tracker-history-div");divId=dataDiv.data("id");recordType=dataDiv.data("record-type");bootbox.dialog({message:"Are you sure you want to delete this tracker history?",title:"Delete History",closeButton:!0,onEscape:function(){},buttons:{main:{label:"Ok",className:"btn btn_active",callback:function(a){a&&$.ajax({url:"/healthTracker/delete/"+recordType+"/"+divId,cache:!1,success:function(a){a&&(dataDiv.remove(),load_tracker_graph("tracker_graph_container"))}})}},
danger:{label:"Cancel",className:"btn btn_clear"}}})});
$(document).on("click","#stop_medication_reminder_dialog #yes_btn",function(){var a=Ladda.create(this),c=$(this).closest("form").serialize();$.ajax({url:"/user/scheduler/stopMedicationReminder",data:c,type:"POST",dataType:"json",beforeSend:function(){a.start();$("#stop_medication_reminder_dialog button").prop("disabled",!0)},success:function(a){$("#stop_medication_reminder_dialog #confirm_message").addClass("hide");$("#stop_medication_reminder_dialog .modal-footer").remove();a.success?$("#stop_medication_reminder_dialog #success_message").removeClass("hide"):
a.error&&$("#stop_medication_reminder_dialog #error_message").removeClass("hide")}})});$(document).on("click","#stop_medication_reminder_dialog #no_btn",function(){$("#stop_medication_reminder_dialog #confirm_message").addClass("hide");$("#stop_medication_reminder_dialog .modal-footer").remove();$("#stop_medication_reminder_dialog #no_message").removeClass("hide")});$(document).on("click",".friends_print",function(){window.open("/healthinfo/print?graphIds=18","_blank")});
$(document).on("click",".team_print",function(){window.open("/healthinfo/print?graphIds=19","_blank")});
$(document).on("click","#print_summary",function(){var a=[],c="",d="",e="";$("#dateSelectType1").prop("checked")?e=$(".periodSelectionValue").val():$("#dateSelectType2").prop("checked")&&(e=1,c=$("#PrintFrom").val(),d=$("#PrintTo").val());""==e?$("#print_error_message").text("Please choose a date option.").show():c>d?($("#print_error_message").text("From-date should be less than To-date.").show(),(0==c.length||0==d.length)&&$("#print_error_message").text("Please enter Both dates.").show()):c<d&&1==
e&&0==c.length?$("#print_error_message").text("Please enter Both dates.").show():c==d&&1==e&&0==c.length?$("#print_error_message").text("Please enter Both dates.").show():($('input[name="graph_options_list[]"]:checked').each(function(){a.push($(this).attr("value"))}),""==a?$("#print_error_message").text("Please choose the options to print.").show():(url="/healthinfo/print?graphIds="+a+"&customDates="+e+"&mindate="+c+"&maxdate="+d,-1!=$.inArray("16",a)&&(a=removeDuplicates(a),symptomIds=[],$('input[class="symptom_options"]:checked').each(function(){symptomIds.push($(this).data("symptom"))}),
url="/healthinfo/print?graphIds="+a+"&customDates="+e+"&mindate="+c+"&maxdate="+d+"&symptoms="+symptomIds),window.open(url,"_blank"),$("#medical_summary_modal").modal("hide"),$('input[type="radio"]').prop("checked",!1),$('input[type="checkbox"]').prop("checked",!1),$('input[type="text"]').val(""),$(".periodSelection").addClass("hidden"),$(".dateSelection").addClass("hidden")))});function removeDuplicates(a){var c=[];$.each(a,function(a,e){-1==$.inArray(e,c)&&c.push(e)});return c}
$(".search_type").click(function(){var a=$("#header_search").val();if(""==!a){var c;switch($("#search_icons").attr("class").replace("search_icons ","")){case "all":c="all";break;case "people_search":c="people";break;case "community_search":c="community";break;case "disease_search":c="disease";break;case "hash_search":c="hashtag";break;default:c="all"}window.location.replace("/search?type="+c+"&keyword="+encodeURIComponent(a))}});
$(".search_submit").click(function(){var a=$("#header_search").val();if(""==!a){var c;switch($("#search_icons").attr("class").replace("search_icons ","")){case "all":c="all";break;case "people_search":c="people";break;case "community_search":c="community";break;case "disease_search":c="disease";break;case "hash_search":c="hashtag";break;default:c="all"}window.location.replace("/search?type="+c+"&keyword="+encodeURIComponent(a))}});
function showSiteNotification(a,c){var d=window.location.pathname.split("/")[2]+" just updated their details!",e;e={className:"success",autoHide:!0,position:"bottom left",arrowSize:0};$.inArray(c,["success","info","warn","error"])&&(e.className=c);$.notify(d,e);app.show_site_notfications=!1}
function getMyHealthGraphData(a){app.show_site_notfications=!0;switch(a){case "pain_tracker":refreshPainDataGraph();break;case "current_health":load_stock_graph(!1,!0);break;case "symptom":renderWeeklyGraphs(!0);getSymptomSeverityGraph("symptomSeverityDetailGraph",!0);break;case "tracker":load_stock_graph(!1,!0);break;case "health_indicators":$("#status_graph").length?$("#status_graph").click():load_stock_graph(!1,!0)}}
function isIE(){var a=navigator.userAgent.toLowerCase();return-1!=a.indexOf("msie")?parseInt(a.split("msie")[1]):!1}function isIE11(){return!!navigator.userAgent.match(/Trident.*rv\:11\./)}
$(document).on("click",".dashboard_video_play",function(){if($("#profile_video_container").length){$("#profile_video_container_wrapper").show();$(this).addClass("hide");$(".profile_tile .profile_cover_gear").addClass("hide");if(9==isIE()||isIE11())$("#profile_video_container_wrapper").show(),jwplayer("profile_video_container").seek(0);$("#profile_video_container_wrapper").css("z-index",999);$("#profile_video_minimize_icon").removeClass("hide");$(".dashboard_video_play").addClass("hide");jwplayer("profile_video_container").play()}});
(function(a){a.fn.embedVimeoPlayer=function(a,d,e){a=getVimeoEmbedCode(a,d,e);return this.html(a)}})(jQuery);$(document).on("input","#db_htag",function(){$.ajax({url:"/search/search/getHeaderSearch",dataType:"json",data:{term:$(this).val(),category:6},success:function(a){$(".hashtag_container").empty();$.each(a,function(a,d){if("More"!=d.Name&&"empty"!=d.Name){var e;e='<p class="rating_4 tags">'+('<a href="'+d.Url+'">'+d.Name+"</a></p>")}$(".hashtag_container").append(e)})}})});
$("#db_htag").keyup(function(){searchStr=$("#db_htag").val();""==searchStr&&$.ajax({url:"/search/search/getAllHashtags",dataType:"json"}).done(function(a){$(".hashtag_container").empty();$.each(a,function(a){$(".hashtag_container").append('<p class="rating_4 tags">'+('<a href="/hashtag?tag='+a+'">#'+a+"</a></p>"))})})});$(document).on("click",".subtabs_list li",function(){$(".subtabs_list li").removeClass("current")});var user_id="",friend_id="",search=!1;
function disableButton(a){$(a).css({border:"1px solid #004f7f","background-color":"#2c589e",color:"#fff"});$(a).attr("disabled","disabled")}function enableButton(a){$(a).removeAttr("style");$(a).removeAttr("disabled","disabled")}
function addFriend(a,c,d){var e="#add_button_"+a;"undefined"!=typeof d&&!0==d&&(e="#notification_add_button_"+a);rotate=Ladda.create(document.querySelector(e));null!=rotate&&rotate.start();disableButton($(e));$.ajax({url:"/user/friends/addFriend",cache:!1,type:"POST",data:{friend_id:a,search:c},success:function(){"undefined"!=typeof d&&!0==d?addFriendResponse(a,c,!0):addFriendResponse(a,c)}})}
function addFriendResponse(a,c,d){var e="#add_button_"+a;"undefined"!=typeof d&&!0==d&&(e="#notification_add_button_"+a);c?($(e).text("Request Sent"),rotate=Ladda.create(document.querySelector(e)),rotate.stop(),disableButton($(e)),setTimeout(function(){updateFriendNotificationListRow("people_mayknow_notification")},3E3)):location.reload()}
function approveFriend(a,c,d){var e="#accept_button_"+a,f="#reject_button_"+a;"undefined"!=typeof d&&!0==d&&(e="#notification_accept_button_"+a,f="#notification_reject_button_"+a);rotate=Ladda.create(document.querySelector(e));null!=rotate&&rotate.start();disableButton($(e));$(f).attr("disabled","disabled");$.ajax({url:"/user/friends/approveFriend/"+a+"/"+c,type:"POST",success:function(){$(e).removeAttr("onclick");typeof d!="undefined"&&d==true?approveFriendResponse(a,c,rotate,true):approveFriendResponse(a,
c,rotate);$("#online_friends_list").length&&updateOnlineFriendsList();$("#profile_friends_online").length&&updateProfileOnlineFriendsList()}})}function approveFriendResponse(a,c,d,e){var f="#accept_button_"+a,h="#reject_button_"+a;"undefined"!=typeof e&&!0==e&&(f="#notification_accept_button_"+a,h="#notification_reject_button_"+a);c?($(f).remove(),$(h).text("You have responded."),getFriendNotificationUpdates()):location.reload();d.stop();disableButton($(h))}
function rejectFriend(a,c,d){var e="#accept_button_"+a,f="#reject_button_"+a;"undefined"!=typeof d&&!0==d&&(e="#notification_accept_button_"+a,f="#notification_reject_button_"+a);rotate=Ladda.create(document.querySelector(f));null!=rotate&&rotate.start();disableButton($(f));$(e).attr("disabled","disabled");$.ajax({url:"/user/friends/rejectFriend/"+a+"/"+c,type:"POST",success:function(){$(f).removeAttr("onclick");typeof d!="undefined"&&d==true?rejectFriendResponse(a,c,rotate,true):rejectFriendResponse(a,
c,rotate)}})}function rejectFriendResponse(a,c,d,e){var f="#accept_button_"+a,h="#reject_button_"+a;"undefined"!=typeof e&&!0==e&&(f="#notification_accept_button_"+a,h="#notification_reject_button_"+a);c?($(f).remove(),$(h).text("You have responded"),getFriendNotificationUpdates()):location.reload();d.stop();disableButton($(h))}
function hovercardRemoveFriend(a,c){bootbox.confirm("Are you sure you want to remove?",function(d){if(d){var e=Ladda.create(document.querySelector("#remove_hovercard_button_"+a));null!=e&&e.start();disableButton($("#remove_hovercard_button_"+a));$.ajax({url:"/user/friends/removeFriend",type:"POST",data:{friend_id:a,search:c},success:function(){c?(removeFriendResponse(a,c,e),createAddFriendButton(a,e)):location.reload();$("#online_friends_list").length&&(updateOnlineFriendsList(),$(".popover").remove())}})}})}
function createAddFriendButton(a,c){null!=c&&c.stop();$("#remove_hovercard_button_"+a).html("Add as friend");$("#remove_hovercard_button_"+a).removeAttr("data-friend_id");$("#remove_hovercard_button_"+a).attr("onclick","addFriend("+a+", true)");$("#remove_hovercard_button_"+a).attr("id","add_button_"+a);enableButton($("#add_button_"+a))}
function removeFriend(a,c){var d=Ladda.create(document.querySelector("#remove_button_"+a));null!=d&&d.start();disableButton($("#remove_button_"+a));$.ajax({url:"/user/friends/removeFriend",type:"POST",data:{friend_id:a,search:c},dataType:"json",success:function(e){removeFriendResponse(a,c,d);jQuery.isEmptyObject(e)||($.each(["warning","success","danger"],function(a,c){$("#header-alert").removeClass("alert-"+c)}),$("#header-alert").addClass("alert-"+e.type),$("#header-alert .alert-content").html(e.message),
$("#header-alert").show(),setTimeout(function(){$("#header-alert").hide()},5E3))}})}
function removeFriendResponse(a,c,d){if(c){c={friends:{friend:[]}};$("#"+a).remove();for(var e=0;e<friendList.friends.friend.length;e++)friendList.friends.friend[e].friend_id!=a&&c.friends.friend.push(friendList.friends.friend[e]);friendList=c;0==friendList.friends.friend.length&&$("#none_found").removeClass("hidden");null!=d&&d.stop()}else d.stop(),disableButton($("#remove_button_"+a)),$("#remove_button_"+a).text("Removed");$("#remove_button_"+a).text("Removed");$("#remove_button_"+a).removeAttr("onclick")}
var mutualFriendsList="";
$(document).on("click",".mutual_frnds",function(a){a.preventDefault();if($(this).hasClass("disabled"))return!1;$("#mutualFriends .modal-body").html('<center><img src="/img/loader.gif" alt="Loading..."></center>');user_id=$(this).data("user_id");friend_id=$(this).data("friend_id");search=$(this).data("search");"undefined"===typeof search&&(search=!1);$.ajax({url:"/user/friends/getMutualFriends",type:"POST",data:{user_id:user_id,friend_id:friend_id},dataType:"json",success:function(a){mutualFriendsList=JSON.parse(a.json);
$("#mutualFriends .modal-body").html(a.html_content);0!=$("#mutual-friends .col-lg-6").length%2&&$("#mutual-friends .col-lg-6:last").css("border-bottom","0px")}});$("#mutualFriends").modal("show")});
$(document).on("click",".btn_add_symtom_severity",function(){var a=$(this).data("symptom_id"),c=$(this).data("symptom_name"),d=$(this).data("severity"),e=c.toLowerCase().replace(/[^a-z0-9\s]/gi,"").replace(/[ ]/g,"_"),e=$("#"+e).data("last-updated-date"),e=""==e?getUserNow().toDateString():(new Date(e)).toDateString(),f=getUserNow().toDateString();$("#model_add_symptom_serveriy .symptom-selected").html(c);$("#model_add_symptom_serveriy #selectedSymptomId").val(a);$("#modal_symptom_datepicker").val("");
$("#modal_symptom_date_selected").html("today");$(".condition_indicator label").removeClass("on");$(".condition_indicator input").attr("checked",!1);$("#symptom_history_error_message").hide();"no data"!=d&&f===e&&($(".condition_"+d).addClass("on"),$(".condition_"+d).find("input").prop("checked",!0),$(".condition_"+d).find("input").hecked=!0);$("#model_add_symptom_serveriy").modal("show")});
$(document).on("click","#btn_symptom_severity_save",function(){var a=$.trim($("#model_add_symptom_serveriy #selectedSymptomId").val()),c=$.trim($("#model_add_symptom_serveriy .symptom-selected").html()).toLowerCase().replace(/[^a-z0-9\s]/gi,"").replace(/[ ]/g,"_"),d=c+"_gauge_graph";$("#btn_symptom_severity_save").attr("disabled","disabled");if(0<$("input[name=symptomHistoryRadio]:radio:checked").length){var e=$("input[name=symptomHistoryRadio]:radio:checked").val(),f=$(".condition_indicator label.on  span").html(),
h="dial_"+$(".condition_indicator .on").attr("class").replace(" on",""),i=$("#modal_symptom_datepicker").val(),g=$("#"+c).data("last-updated-date"),n=$(".condition_indicator .on .name").html().toLowerCase(),k=getDialValue(n);saveSymtomSeverity(a,i,e,callback_saveSymptomSeverity,{date:i,severityName:f,severityClass:h,newSeverity:n,lastUpdatedDate:g,symptom_div_id:c,container:d,dialValue:k})}else return $("#symptom_history_error_message").text("Please select valid severity.").show(),$("#btn_symptom_severity_save").removeAttr("disabled"),
!1});function getDialValue(a){var c=0;switch(a.toLowerCase()){case "none":c=25;break;case "mild":c=75;break;case "moderate":c=125;break;case "severe":c=175;break;default:c=0}return c}
function callback_saveSymptomSeverity(a){var c=a.date,d=a.lastUpdatedDate,e=a.symptom_div_id,f=a.severityName,h=a.severityClass,i=a.newSeverity,g=""==c?getUserNow():new Date(c),d=""==d?getUserNow():new Date(d);g.setHours(0,0,0,0);d.setHours(0,0,0,0);g>=d&&(chartValue[a.container].series[0].points[0].update(a.dialValue),$("#"+e+" p ").html(f),$("#"+e).removeClass().addClass("col-lg-3 "+h),$("#"+e+" .btn_add_symtom_severity ").data("severity",i),$("#"+e).data("last-updated-date",c),a=$.datepicker.formatDate("M d, yy",
g),$("#"+e+" p ").attr("title","Last updated: "+a));$("#model_add_symptom_serveriy").modal("hide");$("#btn_symptom_severity_save").removeAttr("disabled");$("#model_add_symptom_serveriy .condition_popup_container").find("label").removeClass("on");$("#modal_symptom_datepicker").val("");$("#modal_symptom_date_selected").html("today")}
function saveSymtomSeverity(a,c,d,e,f){chartValue[f.container].showLoading("saving..");$.ajax({url:"/user/api/addUserSeverity",data:{id:a,date:c,severity:d},type:"POST",success:function(){chartValue[f.container].hideLoading();socket.emit("my_health_update",{room:$("#graphUpdatedInRoom").val(),type:"symptom"});"function"==typeof e&&e(f)},error:function(){chartValue[f.container].hideLoading()}})}
$(document).on("click","#btn_add_all_symptom_severity",function(){$.ajax({url:"/user/api/getAddSymptomListHTML",success:function(){}})});$(document).on("click","#btn_daily-health-load-more",function(){$(".health_indicator_div .row").removeClass("hidden");hideAllPainData();appendlatestPainDetails();$("#btn_daily-health-load-more").hide()});
$(document).on("click","#btn_daily-health-load-less",function(){$(".health_indicator_div .row.health_dial_indicator:gt(2)").addClass("hidden");appendlatestPainDetails();$("#btn_daily-health-load-more").show()});function clearVariablesAndData(){selected_pain_type=selected_body_main_part=1;all_pain_array=[];save_pain_array=[];new_pain_obj={};append_pin=!1;current_fixed_pin_id=id_counter=y_pos_image=x_pos_image=bodySubPartsArray=bodyPartsArray=0}
function hideAllPainData(){clearVariablesAndData();$(".fixed_pin, .latest_pain_pins").each(function(){$(this).fadeOut(10,function(){$(this).remove()})})}
function appendlatestPainDetailsFixed(){if("undefined"!=typeof latestPainDataDetails&&null!=latestPainDataDetails&&0<latestPainDataDetails.length){$("bodypain_tracker_container").offset();var a=$("#paintracker_div");$(latestPainDataDetails).each(function(c,d){if("undefined"!=typeof d&&0<parseInt(d.severity)&&null!=d.severity){var e=d.pain_type,f=$("#drag_pain_icon"+e).clone().removeAttr("id").removeAttr("class");f.addClass("drag_pain_icon"+e+"ui-draggable ui-draggable-dragging fixed_pin").attr("id",
id_counter);f.css({position:"absolute",left:d.pos_x+"px",top:d.pos_y+"px"});a.append(f);obj={};obj.severity=parseInt(d.severity);obj.pain_type=parseInt(d.pain_type);obj.selected_body_main_part=parseInt(d.bodyPartMain);obj.pos_x=parseInt(d.pos_x);obj.pos_y=parseInt(d.pos_y);all_pain_array[id_counter]=obj;id_counter++}})}}
function appendlatestPainDetails(){if("undefined"!=typeof latestPainDataDetails&&null!=latestPainDataDetails&&0<latestPainDataDetails.length){var a=$("#paintracker_div");$("bodypain_tracker_container").offset();$(latestPainDataDetails).each(function(c,d){if("undefined"!=typeof d&&0<parseInt(d.severity)&&null!=d.severity){var e=d.pain_type,f=$("#drag_pain_icon"+e).clone().removeAttr("id").removeAttr("class");f.addClass("drag_pain_icon"+e+"ui-draggable ui-draggable-dragging fixed_pin").attr("id",id_counter);
f.css({position:"absolute",left:d.pos_x+"px",top:d.pos_y+"px"});a.append(f);obj={};obj.severity=parseInt(d.severity);obj.pain_type=parseInt(d.pain_type);obj.selected_body_main_part=parseInt(d.bodyPartMain);obj.pos_x=parseInt(d.pos_x);obj.pos_y=parseInt(d.pos_y);all_pain_array[id_counter]=obj;id_counter++}})}}var userId;
$(document).on("click",".unblock_user",function(){userId=$(this).attr("data-user_id");if(0<userId){$('#confirm_unblock_dialog form input[type="hidden"]').val(userId);var a=$(this).attr("data-username");$("#confirm_unblock_dialog .username").html(a);$("#confirm_unblock_dialog").modal("show")}});
$(document).on("click","#confirm_user_unblock",function(){var a=!1;$("#confirm_unblock_dialog #unblock_messaging").is(":visible")?$("#confirm_unblock_dialog #unblock_messaging").is(":checked")&&(a=!0):a=!0;!0===a&&$("#blocked_user_"+userId).remove();a=$("#confirm_unblock_dialog form").serialize();$('#confirm_unblock_dialog form input[type="hidden"]').val("");$("#confirm_unblock_dialog").modal("hide");$.ajax({type:"POST",url:"/user/blocking/unblockUser",data:a})});
$(document).on("click",'input[name="data[NotificationSetting][recommend_friends]"]',function(){var a=$("#NotificationSettingRecommendFriendsFrequency");$(this).is(":checked")?a.removeClass("hide"):a.addClass("hide")});$(document).on("click",".select_all_graphs",function(){$('input[name="graph_options_list[]"]').prop("checked",!0);$('input[name="graph_title_list[]"]').prop("checked",!0)});
$(document).on("click",".clear_all_graphs",function(){$('input[name="graph_options_list[]"]').prop("checked",!1);$('input[name="graph_title_list[]"]').prop("checked",!1)});$(document).on("click","#dateSelectType2",function(){$(".dateSelection").removeClass("hidden");$(".periodSelection").addClass("hidden");$("#print_error_message").hide()});$(document).on("click","#dateSelectType1",function(){$(".periodSelection").removeClass("hidden");$(".dateSelection").addClass("hidden");$("#print_error_message").hide()});
$(document).on("click","#print_button",function(){var a=[],c="",d="",e="";graphType=$(this).data("graphtype");$("#dateSelectType1").prop("checked")?e=$(".periodSelectionValue").val():$("#dateSelectType2").prop("checked")&&(e=1,c=$("#PrintFrom").val(),d=$("#PrintTo").val());""==e?$("#print_error_message").text("Please choose a date option.").show():c>d?($("#print_error_message").text("From-date should be less than To-date.").show(),(0==c.length||0==d.length)&&$("#print_error_message").text("Please enter Both dates.").show()):
c<d&&1==e&&0==c.length?$("#print_error_message").text("Please enter Both dates.").show():c==d&&1==e&&0==c.length?$("#print_error_message").text("Please enter Both dates.").show():("normal"==graphType?($('input[name="graph_options_list[]"]:checked').each(function(){a.push($(this).attr("value"))}),""==a?$("#print_error_message").text("Please choose the options to print.").show():(window.open("/healthinfo/print?graphIds="+a+"&customDates="+e+"&mindate="+c+"&maxdate="+d,"_blank"),$("#printGraph").modal("hide"))):
"symptom"==graphType&&(a=16,symptomIds=[],$('input[name="graph_options_list[]"]:checked').each(function(){symptomIds.push($(this).attr("value"))}),""==symptomIds?$("#print_error_message").text("Please choose the options to print.").show():(window.open("/healthinfo/print?graphIds="+a+"&customDates="+e+"&mindate="+c+"&maxdate="+d+"&symptoms="+symptomIds,"_blank"),$("#printGraph").modal("hide"))),$('input[type="radio"]').prop("checked",!1),$('input[type="checkbox"]').prop("checked",!1),$('input[type="text"]').val(""),
$(".periodSelection").addClass("hidden"),$(".dateSelection").addClass("hidden"))});$(document).on("click",".close_print",function(){$('input[type="checkbox"]').prop("checked",!1);$('input[type="radio"]').prop("checked",!1);$('input[type="text"]').val("");$(".periodSelection").addClass("hidden");$(".dateSelection").addClass("hidden")});var messageLoadingHTML,selectedMessageType;
$(document).ready(function(){0<$("#message_page").length&&startRealTimeMessageSystem();messageLoadingHTML=0<$("#message_loading_container").length?$("#message_loading_container").html():$(".message_list_container").html();0<$("#default_message_section").length?loadInbox():(showMessageDetailScrollBar(),ajaxifyNextPageLink());$("#compose-message-button").bind("click",function(){$("#composeMessageResponse").html("")})});$("#composeMessage").on("hidden.bs.modal",function(){clearComposeMessage()});
$("#composeMessage").on("show.bs.modal",function(){0<$(".popover").length&&$(".popover").remove()});$("#SendMessageByEmail").keypress(function(a){13==a.keyCode&&a.preventDefault()});$(document).on("click",".message_button",function(){$(".arrowchat_closebox_bottom").click();$("#UserId").val($(this).data("user-id"));$("#SendMessageByEmail").val($(this).data("username"));$("#SendMessageByEmail").attr("disabled",!0)});$(document).on("click","a#inbox_link",function(){clearSearch();loadInbox()});
$(document).on("click","a#sent_link",function(){clearSearch();loadSentMessages()});$(document).on("click","a#saved_link",function(){clearSearch();loadSavedMessages()});$(document).on("click","#select_all_messages",function(){var a=$(".message_list_container").find(".message_list");selectMessages(a);changeMessageActionButtonsState()});$(document).on("click","#select_read_messages",function(){unSelectMessages();var a=$(".message_list_container").find(".message_list.read");selectMessages(a);changeMessageActionButtonsState()});
$(document).on("click","#select_unread_messages",function(){unSelectMessages();var a=$(".message_list_container").find(".message_list.unread");selectMessages(a);changeMessageActionButtonsState()});$(document).on("click","#unselect_messages",function(){unSelectMessages();changeMessageActionButtonsState()});$(document).on("change",'.message_list_container input[type="checkbox"]',function(){var a=$(this).closest(".message_list");$(this).is(":checked")?a.addClass("active"):a.removeClass("active");changeMessageActionButtonsState()});
$(document).on("submit","#message_search_form",function(){var a=$("#message_search_input").val();loadMessages(selectedMessageType,a);return!1});
$(document).on("click","#delete_msg_btn",function(){var a=$(this);bootbox.confirm("Are you sure you want to delete the selected conversation(s)?",function(c){c&&(c=$('.message_list_container input[type="checkbox"]').serialize(),c=c+"&type="+selectedMessageType,$.ajax({url:"/message/messages/deleteConversations",data:c,method:"POST",beforeSend:function(){a.prop("disabled",!0)},success:function(){$('.message_list_container input[type="checkbox"]:checked').closest(".message_list").remove();"inbox"===
selectedMessageType&&updateInboxCount();0===$(".message_list_container .message_list").length&&$(".message_list_container").html('<br><div class="alert alert-warning"><div class="message">No messages!</div></div>')}}))})});
$(document).on("click","#save_msg_btn",function(){var a=$(this),c=$('.message_list_container input[type="checkbox"]').serialize();$.ajax({url:"/message/messages/saveConversations",data:c,method:"POST",beforeSend:function(){a.prop("disabled",!0);hideSuccessMessage()},success:function(){a.prop("disabled",!1);$("#message_success_element .message").html("Successfully saved the selected conversation(s).");$("#message_success_element").removeClass("hide");window.scrollTo(0,0)}})});
$(document).on("click","#message_success_element button.close",function(){hideSuccessMessage()});function hideSuccessMessage(){$("#message_success_element .message").html("");$("#message_success_element").addClass("hide")}
$(document).on("click",".message_list",function(a){$(a.target).is('input[type="checkbox"]')||(a=$(this).find('input[type="checkbox"]').val(),$(this).removeClass("unread").addClass("read"),updateInboxCount(),"saved"===selectedMessageType?(a="/message/details/saved/"+a,type="saved_messages"):(a="/message/details/index/"+a,type="messages"),$.ajax({type:"POST",url:a,data:{first_load:!0},beforeSend:function(){$(".message_list_container").html(messageLoadingHTML)},success:function(a){$(".message_list_container").html(a);
$("#message_select_box").addClass("hide");ajaxifyNextPageLink();showMessageDetailScrollBar();type=="messages"&&startRealTimeMessageSystem()}}))});
$(document).on("click","#next_conversations_link",function(){var a=$(this).attr("data-href");current_page=$.trim($("#message_page").val());$("#message_page").val(parseInt(current_page)+1);$(this).parents("center").remove();$.ajax({type:"POST",url:a,beforeSend:function(){$(".message_details_list").prepend(messageLoadingHTML)},success:function(a){$(".message_details_list #message_loader").remove();$(".message_details_list").prepend(a);ajaxifyNextPageLink()}})});
function updateInboxCount(){var a=$(".message_list.unread").length;inboxCountBox=$("#inbox_link span");0<a?inboxCountBox.html("("+a+")"):inboxCountBox.remove()}function clearSearch(){$(".message_search_field input").val("")}function clearComposeMessage(){$("#UserId").val("");$("#compose_message").val("");$("#SendMessageByEmail").val("");$("#composeMessageResponse").html("");$(".token").remove();$("#SendMessageByEmail").attr("placeholder",$("#SendMessageByEmail").data("placeholder"))}
function selectMessages(a){a.addClass("active");a.find('input[type="checkbox"]').prop("checked",!0)}function unSelectMessages(){var a=$(".message_list_container").find(".message_list");a.removeClass("active");a.find('input[type="checkbox"]').prop("checked",!1)}function loadInbox(){loadMessages("inbox");$("#select_read_messages").show();$("#select_unread_messages").show()}function loadSentMessages(){loadMessages("sent");$("#select_read_messages").hide();$("#select_unread_messages").hide()}
function loadSavedMessages(){loadMessages("saved");$("#select_read_messages").hide();$("#select_unread_messages").hide()}
function loadMessages(a,c){var d={};void 0!==c&&(d={search_term:c});$("ul#message_tabs li a").removeClass("active");$("a#"+a+"_link").addClass("active");$.ajax({type:"POST",url:"/message/messages/"+a,data:d,beforeSend:function(){$("#message_select_box").addClass("hide");$(".message_list_container").html(messageLoadingHTML);changeMessageActionButtonsState()},success:function(c){selectedMessageType=a;$(".message_list_container").html(c);$("#message_select_box").removeClass("hide");setPageHeader(selectedMessageType)}})}
function ajaxifyNextPageLink(){var a=$("#next_conversations_link"),c=a.attr("href");a.removeAttr("href").attr("data-href",c)}
function startRealTimeMessageSystem(){setInterval(function(){$("#other_user_id").length&&(user_id=$.trim($("#other_user_id").val()),current_page=parseInt($.trim($("#message_page").val())),$(".next").empty(),$.ajax({type:"POST",data:{current_page:current_page},url:"/message/details/index/"+user_id,success:function(a){$(".message_details_list").html("");$(".message_details_list").append(a);$("#message_select_box").addClass("hide");ajaxifyNextPageLink();autoupdate="true";showMessageDetailScrollBar(autoupdate)}}));
setInterval(function(){$(".next").slice(1).empty();var a=$("#next_conversations_link");p=current_page+1;a.attr("data-href","/message/details/index/"+user_id+"/page:"+p)},1E3)},2E4)}function setPageHeader(a){var c;switch(a){case "inbox":c="Inbox";break;case "sent":c="Sent";break;case "saved":c="Saved"}$(".page-header h3").html(c);$("title").html(c+" - Messages - "+app.appName)}
function changeMessageActionButtonsState(){0<$('.message_list_container input[type="checkbox"]:checked').length?("saved"!==selectedMessageType&&$("#save_msg_btn").prop("disabled",!1),$("#delete_msg_btn").prop("disabled",!1)):($("#save_msg_btn").prop("disabled",!0),$("#delete_msg_btn").prop("disabled",!0))}
function composeMessage(){user_ids=$.trim($("#UserId").val());message_txt=$.trim($("#compose_message").val());$("#composeMessageResponse").html("");""===user_ids?$("#composeMessageResponse").html("<div class ='alert alert-error'>Please enter valid usernames.</div>"):""===message_txt?$("#composeMessageResponse").html("<div class ='alert alert-error'>Please enter message.</div>"):$.ajax({type:"POST",url:"/message/messages/createUserMessage",data:{user_ids:user_ids,message:message_txt},dataType:"json",
beforeSend:function(){},success:function(a){!0===a.success?($("#compose_message").val(""),$("#composeMessageResponse").html(""),$("#composeMessage").modal("hide"),$.notify("Your messages have been successfully sent",{className:"success",autoHide:!0,position:"bottom left",arrowSize:0}),$("#composeMessageResponse").html("<div class ='alert alert-success'>"+a.message+"</div>")):!0===a.error&&$("#composeMessageResponse").html("<div class ='alert alert-error'>"+a.message+"</div>")}})}
function replyMessage(){user_id=$.trim($("#other_user_id").val());message_txt=$.trim($("#reply_message").val());current_page=$.trim($("#message_page").val());$(".reply_message_response").html("");""===user_id?$(".reply_message_response").html("<div class ='alert alert-error'>Please enter valid usernames.</div>"):""===message_txt?$(".reply_message_response").html("<div class ='alert alert-error'>Please enter message.</div>"):$.ajax({type:"POST",url:"/message/messages/createUserMessage",data:{user_ids:user_id,
message:message_txt},dataType:"json",beforeSend:function(){},success:function(a){!0===a.success?($("#reply_message").val(""),$(".reply_message_response").html("<div class ='alert alert-success'>"+a.message+"</div>")):!0===a.error&&$(".reply_message_response").html("<div class ='alert alert-error'>"+a.message+"</div>");$.ajax({type:"POST",data:{reply_success:!0,current_page:current_page},url:"/message/details/index/"+user_id,success:function(a){$(".message_details_list").html("");$(".message_details_list").append(a);
$("#message_select_box").addClass("hide");ajaxifyNextPageLink();$(".message_details_list").slimScroll({destroy:true});showMessageDetailScrollBar()}});setTimeout("$('.reply_message_response').html('');",5E3)}})}
function showMessageDetailScrollBar(a){a=a||0;if(0<$(".message_details_list").length){var c=$("#last_msg_top");$(".message_details_list").slimScroll({color:"#BBDAEC",railColor:"#EBF5F7",size:"12px",height:"auto",railVisible:!0,start:c,disableFadeOut:!0});a||$("#reply_message").focus();scrollToReplyBox()}}function scrollToReplyBox(){600<$(window).height()?$("html, body").animate({scrollTop:$(".messages").offset().top},100):window.scrollTo(0,190)}
(function(a){a.fn.extend({facelist:function(c,d){var e="string"==typeof c,d=a.extend({},a.Autocompleter.defaults,{url:e?c:null,data:e?null:c,delay:e?a.Autocompleter.defaults.delay:10,max:d?10:150,intro_text:"Type in the box"},d);d.highlight=d.highlight||function(a){return a};return this.each(function(){new a.Autocompleter(this,d)})},result:function(a){return this.bind("result",a)},search:function(a){return this.trigger("search",[a])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(a){return this.trigger("setOptions",
[a])},unautocomplete:function(){return this.trigger("unautocomplete")}});a.Autocompleter=function(c,d){function e(c){d.data+=","+c;d.data=(new String(c)).split(",").sort().toString();y.find("#bit-"+(new String(c)).replace(/ /g,"_")).remove();a("#"+d.result_field).val(new String(a("#"+d.result_field).val().replace(c,"")));h();return!1}function f(){var f=s.selected();if(f&&""!=m.find("ul").get()&&""==m.find("ul#no_result").get()){var g=f.data;list_users=(new String(d.data)).replace(/ /g,"_");d.data=
list_users.replace(g[1],"");a("#"+d.result_field).val(a("#"+d.result_field).val()+","+g[1]);h();var i=f.data;a(".token").removeClass("token_selected");elemLI=a('<li id="bit-'+(new String(i[1])).replace(/ /g,"_")+'" class="token"><span><span><span><span>'+i[0]+"</span></span></span></span></li>").click(function(){a(".token").removeClass("token_selected");a(this).addClass("token_selected")},function(){a(this).removeClass("token_selected")});elemA=a('<span class="x"> .x</span>').click(function(){e(i[1]);
0===a(".token").length&&a(c).attr("placeholder",a(c).data("placeholder"));return!1});a(elemLI).append(elemA);m.find("ul").remove();k.parent(".token-input").before(elemLI);k.val("");""!==a(c).attr("placeholder")&&a(c).data("placeholder",a(c).attr("placeholder"));a(c).attr("placeholder","");k.focus();return!0}return!1}function h(){for(var e=a("#"+d.result_field).val(),e=e.split(","),f=0,g="",f=0;f<e.length;f++)""!=e[f]&&(g+=e[f],g+=",");a("#"+d.result_field).val(g);a("#"+d.result_field).trigger("change");
""!==g&&a(c).closest(".form-group-col").find("span.help-block").remove()}function i(c){1==c?valor=k.val().substring(0,k.val().length-1):valor=k.val();var e=valor.toLowerCase(),c=n,f=g,e=e.toLowerCase(),h=F.load(e);m.html('<div class="default">Searching...</div>');"string"==typeof d.url?(c=-1==d.url.indexOf("?")?"?":"&",c=d.url+c+"q="+encodeURI(e),q&&q.abort(),q=a.get(c,function(c){for(var f=[],c=c.split("\n"),g=0;g<c.length;g++){var h=a.trim(c[g]);h&&(h=h.split("|",2),f[f.length]={data:h,value:h[0],
result:d.formatResult&&d.formatResult(h,h[0])||h[0]})}c=f;F.add(e,c);n(e,c);0==c.length&&(m.html('<div class="default">No Results Found</div>'),a("#"+d.result_field).prev().val(""))})):(h=F.load(e))&&h.length?c(e,h):f(e)}function g(){a(".default").remove();m.find("ul").remove();m.append('<ul id="no_result"><li>'+d.no_result+"</li></ul>")}function n(a,c){""!=a&&c&&c.length&&w?(s.display(c,a),s.show()):m.find("ul").remove()}var k=a(c).attr("autocomplete","off"),y=a(c).closest(".facelist"),m=y.next(".result_list"),
q;k.click(function(){a(".default").remove();""!==a(c).attr("placeholder")&&a(c).data("placeholder",a(c).attr("placeholder"));a(c).attr("placeholder","");m.append('<div class="default">'+d.intro_text+"</div>");m.css("display","")});a("body").click(function(){a(".result_list ul").remove()});y.click(function(){k.focus()});k.focusout(function(){0===a(".token").length&&a(c).attr("placeholder",a(c).data("placeholder"));a(".default").remove()});var u,F=a.Autocompleter.Cache(d),w=0,s=a.Autocompleter.Select(d,
c,f,{mouseDownOnSelect:!0});k.keydown(function(g){switch(g.keyCode){case 38:g.preventDefault();s.visible()?s.prev():i(0,!0);break;case 40:g.preventDefault();s.visible()?s.next():i(0,!0);break;case 33:g.preventDefault();s.visible()?s.pageUp():i(0,!0);break;case 34:g.preventDefault();s.visible()?s.pageDown():i(0,!0);break;case 9:case 13:f()&&g.preventDefault();break;case 8:arr_user=a("#"+d.result_field).val().split(",");data_tag=new String(arr_user[arr_user.length-2]);""==k.val()&&y.find("#bit-"+data_tag)&&
"token token_selected"==y.find("#bit-"+data_tag).attr("class")?e(arr_user[arr_user.length-2]):""==k.val()&&y.find("#bit-"+arr_user[arr_user.length-2])&&"token token_selected"!=y.find("#bit-"+arr_user[arr_user.length-2]).attr("class")?(a(".token").removeClass("token_selected"),y.find("#bit-"+data_tag).addClass("token_selected")):1==k.val().length?(m.find("ul").remove(),m.find("div").remove(),""!==a(c).attr("placeholder")&&a(c).attr("placeholder",a(c).data("placeholder")),m.append('<div class="default">'+
d.intro_text+"</div>")):i(1,!0);break;case 27:s.hide();m.find("ul").remove();k.val("");k.blur();a("#composeMessage").modal("hide");break;default:clearTimeout(u),u=setTimeout(i,d.delay)}}).keypress(function(){}).focus(function(){w++}).blur(function(){w=0}).click(function(){1<w++&&!s.visible()&&i(0,!0)}).bind("search",function(){}).bind("flushCache",function(){F.flush()}).bind("setOptions",function(c,e){a.extend(d,e);"data"in e&&F.populate()}).bind("unautocomplete",function(){s.unbind();k.unbind()})};
a.Autocompleter.defaults={minChars:1,delay:400,cacheLength:1,max:100,selectFirst:!0,width:0,highlight:function(a,d){return a.replace(RegExp("(?![^&;]+;)(?!<[^<>]*)("+d+")(?![^<>]*>)(?![^&;]+;)","gi"),"<em>$1</em>")},intro_text:"Type in the box",result_field:"to_users",no_result:"No user result"};a.Autocompleter.Cache=function(c){function d(a,d){i>c.cacheLength&&f();h[a]||i++;h[a]=d}function e(){if(!c.data)return!1;var e={},f=0;c.url||(c.cacheLength=1);e[""]=[];for(var h=0,i=c.data.length;h<i;h++){var m=
c.data[h],m="string"==typeof m?[m]:m,q=new String(m);if(!1!==q){var u=q.charAt(0).toLowerCase();e[u]||(e[u]=[]);m={value:q,data:m,result:c.formatResult&&c.formatResult(m)||q};e[u].push(m);f++<c.max&&e[""].push(m)}}a.each(e,function(a,e){c.cacheLength++;d(a,e)})}function f(){h={};i=0}var h={},i=0;setTimeout(e,25);return{flush:f,add:d,populate:e,load:function(d){if(!c.cacheLength||!i)return null;var e=[],f;for(f in h)0<f.length&&a.each(h[f],function(a,c){var f=c.value.toLowerCase().indexOf(d);-1!=f&&
e.push(c)});return e}}};a.Autocompleter.Select=function(c,d,e,f){function h(a){for(a=a.target;a&&"LI"!=a.tagName;)a=a.parentNode;return!a?[]:a}function i(a){n.slice(k,k+1).removeClass();k+=a;0>k?k=n.size()-1:k>=n.size()&&(k=0);n.slice(k,k+1).addClass(g.ACTIVE)}var g={ACTIVE:"auto-focus"},n,k=-1,y,m="",q=a(d).closest(".facelist").next(".result_list"),u;return{display:function(i,w){q.find("ul").remove();u=a("<ul>").appendTo(q).mouseover(function(c){h(c).nodeName&&"LI"==h(c).nodeName.toUpperCase()&&
(k=a("li",u).removeClass().index(h(c)),a(h(c)).addClass(g.ACTIVE))}).click(function(c){a(h(c)).addClass(g.ACTIVE);e();d.focus();return!1}).mousedown(function(){f.mouseDownOnSelect=!0}).mouseup(function(){f.mouseDownOnSelect=!1});0<c.width&&q.css("width",c.width);y=i;m=w;u.empty();a(".default").remove();var s=c.max&&c.max<y.length?c.max:y.length;lista=new String(c.data);new String(a("#"+c.result_field).val());for(var C=!1,G=a("#"+c.result_field).val(),G=G.split(","),H=0;H<s;H++){for(var t=!1,z=0,z=
0;z<G.length;z++)G[z]==y[H].data[1]&&(t=!0,z=G.length);!0!=t&&y[H]&&(t=new String(y[H].data[0]),!1!==t&&(C=a("<li>").html(c.highlight(t,m)).appendTo(u)[0],lista=new String(c.data),a.data(C,"ac_data",y[H]),C=!0))}!1==C&&q.html('<div class="default">No Results Found</div>');n=u.find("li");c.selectFirst&&(n.slice(0,1).addClass(g.ACTIVE),k=0)},next:function(){i(1)},prev:function(){i(-1)},pageUp:function(){0!=k&&0>k-8?i(-k):i(-8)},pageDown:function(){k!=n.size()-1&&k+8>n.size()?i(n.size()-1-k):i(8)},hide:function(){q&&
q.hide();k=-1},visible:function(){return q&&q.is(":visible")},current:function(){return this.visible()&&(n.filter("."+g.ACTIVE)[0]||c.selectFirst&&n[0])},show:function(){a(d).offset();q.css({}).show()},selected:function(){return n&&a.data(n.filter("."+g.ACTIVE)[0],"ac_data")},unbind:function(){q&&q.remove()}}};a.Autocompleter.Selection=function(a,d,e){if(a.createTextRange){var f=a.createTextRange();f.collapse(!0);f.moveStart("character",d);f.moveEnd("character",e);f.select()}else a.setSelectionRange?
a.setSelectionRange(d,e):a.selectionStart&&(a.selectionStart=d,a.selectionEnd=e);a.focus()}})(jQuery);var io="undefined"===typeof module?{}:module.exports;
(function(){var a=this,c="object"===typeof module?module.exports:this.io={};c.version="0.9.16";c.protocol=1;c.transports=[];c.j=[];c.sockets={};c.connect=function(D,K){var d=c.util.parseUri(D),e,f;a&&a.location&&(d.protocol=d.protocol||a.location.protocol.slice(0,-1),d.host=d.host||(a.document?a.document.domain:a.location.hostname),d.port=d.port||a.location.port);e=c.util.uniqueUri(d);var j={host:d.host,secure:"https"==d.protocol,port:d.port||("https"==d.protocol?443:80),query:d.query||""};c.util.merge(j,
K);if(j["force new connection"]||!c.sockets[e])f=new c.Socket(j);!j["force new connection"]&&f&&(c.sockets[e]=f);f=f||c.sockets[e];return f.of(1<d.path.length?d.path:"")};var d=this,e=("undefined"!=typeof io?io:module.exports).util={},f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,h="source protocol authority userInfo user password host port relative path directory file query anchor".split(" ");
e.parseUri=function(a){for(var a=f.exec(a||""),c={},d=14;d--;)c[h[d]]=a[d]||"";return c};e.uniqueUri=function(a){var c=a.protocol,e=a.host,a=a.port;"document"in d?(e=e||document.domain,a=a||("https"==c&&"https:"!==document.location.protocol?443:document.location.port)):(e=e||"localhost",!a&&"https"==c&&(a=443));return(c||"http")+"://"+e+":"+(a||80)};e.query=function(a,c){var d=e.chunkQuery(a||""),N=[];e.merge(d,e.chunkQuery(c||""));for(var f in d)d.hasOwnProperty(f)&&N.push(f+"="+d[f]);return N.length?
"?"+N.join("&"):""};e.chunkQuery=function(a){for(var c={},a=a.split("&"),d=0,e=a.length,f;d<e;++d)f=a[d].split("="),f[0]&&(c[f[0]]=f[1]);return c};var i=!1;e.load=function(a){if("document"in d&&"complete"===document.readyState||i)return a();e.on(d,"load",a,!1)};e.on=function(a,c,d,e){a.attachEvent?a.attachEvent("on"+c,d):a.addEventListener&&a.addEventListener(c,d,e)};e.request=function(a){if(a&&"undefined"!=typeof XDomainRequest&&!e.ua.hasCORS)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&
(!a||e.ua.hasCORS))return new XMLHttpRequest;if(!a)try{return new (window[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(c){}return null};"undefined"!=typeof window&&e.load(function(){i=!0});e.defer=function(a){if(!e.ua.webkit||"undefined"!=typeof importScripts)return a();e.load(function(){setTimeout(a,100)})};e.merge=function(a,c,d,N){var N=N||[],d="undefined"==typeof d?2:d,f;for(f in c)c.hasOwnProperty(f)&&0>e.indexOf(N,f)&&("object"!==typeof a[f]||!d?(a[f]=c[f],N.push(c[f])):
e.merge(a[f],c[f],d-1,N));return a};e.mixin=function(a,c){e.merge(a.prototype,c.prototype)};e.inherit=function(a,c){function d(){}d.prototype=c.prototype;a.prototype=new d};e.isArray=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};e.intersect=function(a,c){for(var d=[],N=a.length>c.length?a:c,f=a.length>c.length?c:a,j=0,g=f.length;j<g;j++)~e.indexOf(N,f[j])&&d.push(f[j]);return d};e.indexOf=function(a,c,d){for(var e=a.length,d=0>d?0>d+e?0:d+e:d||0;d<e&&a[d]!==
c;d++);return e<=d?-1:d};e.toArray=function(a){for(var c=[],d=0,e=a.length;d<e;d++)c.push(a[d]);return c};e.ua={};var g=e.ua,n;if(n="undefined"!=typeof XMLHttpRequest)a:{try{var k=new XMLHttpRequest}catch(y){n=!1;break a}n=void 0!=k.withCredentials}g.hasCORS=n;e.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent);e.ua.iDevice="undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent);var m="undefined"!=typeof io?io:module.parent.exports,g=function(){};("undefined"!=
typeof io?io:module.exports).EventEmitter=g;g.prototype.on=function(a,c){this.$events||(this.$events={});this.$events[a]?m.util.isArray(this.$events[a])?this.$events[a].push(c):this.$events[a]=[this.$events[a],c]:this.$events[a]=c;return this};g.prototype.addListener=g.prototype.on;g.prototype.once=function(a,c){function d(){e.removeListener(a,d);c.apply(this,arguments)}var e=this;d.listener=c;this.on(a,d);return this};g.prototype.removeListener=function(a,c){if(this.$events&&this.$events[a]){var d=
this.$events[a];if(m.util.isArray(d)){for(var e=-1,f=0,j=d.length;f<j;f++)if(d[f]===c||d[f].listener&&d[f].listener===c){e=f;break}if(0>e)return this;d.splice(e,1);d.length||delete this.$events[a]}else(d===c||d.listener&&d.listener===c)&&delete this.$events[a]}return this};g.prototype.removeAllListeners=function(a){if(void 0===a)return this.$events={},this;this.$events&&this.$events[a]&&(this.$events[a]=null);return this};g.prototype.listeners=function(a){this.$events||(this.$events={});this.$events[a]||
(this.$events[a]=[]);m.util.isArray(this.$events[a])||(this.$events[a]=[this.$events[a]]);return this.$events[a]};g.prototype.emit=function(a){if(!this.$events)return!1;var c=this.$events[a];if(!c)return!1;var d=Array.prototype.slice.call(arguments,1);if("function"==typeof c)c.apply(this,d);else if(m.util.isArray(c))for(var c=c.slice(),e=0,f=c.length;e<f;e++)c[e].apply(this,d);else return!1;return!0};(function(a,c){function d(a){return 10>a?"0"+a:a}function e(a){h.lastIndex=0;return h.test(a)?'"'+
a.replace(h,function(a){var c=i[a];return"string"===typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function f(a,c){var D,K,j,g,h=o,R,i=c[a];i instanceof Date&&(i=isFinite(a.valueOf())?a.getUTCFullYear()+"-"+d(a.getUTCMonth()+1)+"-"+d(a.getUTCDate())+"T"+d(a.getUTCHours())+":"+d(a.getUTCMinutes())+":"+d(a.getUTCSeconds())+"Z":null);"function"===typeof x&&(i=x.call(c,a,i));switch(typeof i){case "string":return e(i);case "number":return isFinite(i)?String(i):"null";
case "boolean":case "null":return String(i);case "object":if(!i)return"null";o+=E;R=[];if("[object Array]"===Object.prototype.toString.apply(i)){g=i.length;for(D=0;D<g;D+=1)R[D]=f(D,i)||"null";j=0===R.length?"[]":o?"[\n"+o+R.join(",\n"+o)+"\n"+h+"]":"["+R.join(",")+"]";o=h;return j}if(x&&"object"===typeof x){g=x.length;for(D=0;D<g;D+=1)"string"===typeof x[D]&&(K=x[D],(j=f(K,i))&&R.push(e(K)+(o?": ":":")+j))}else for(K in i)Object.prototype.hasOwnProperty.call(i,K)&&(j=f(K,i))&&R.push(e(K)+(o?": ":
":")+j);j=0===R.length?"{}":o?"{\n"+o+R.join(",\n"+o)+"\n"+h+"}":"{"+R.join(",")+"}";o=h;return j}}if(c&&c.parse)return a.JSON={parse:c.parse,stringify:c.stringify};var j=a.JSON={},g=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o,E,i={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},x;
j.stringify=function(a,c,D){var d;E=o="";if("number"===typeof D)for(d=0;d<D;d+=1)E+=" ";else"string"===typeof D&&(E=D);if((x=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==typeof c.length))throw Error("JSON.stringify");return f("",{"":a})};j.parse=function(a,c){function D(a,d){var e,K,W=a[d];if(W&&"object"===typeof W)for(e in W)Object.prototype.hasOwnProperty.call(W,e)&&(K=D(W,e),void 0!==K?W[e]=K:delete W[e]);return c.call(a,d,W)}var d,a=String(a);g.lastIndex=0;g.test(a)&&(a=a.replace(g,
function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return d=eval("("+a+")"),"function"===typeof c?D({"":d},""):d;throw new SyntaxError("JSON.parse");}})("undefined"!=typeof io?io:module.exports,"undefined"!==typeof JSON?JSON:void 0);var g="undefined"!=typeof io?io:module.parent.exports,
q=("undefined"!=typeof io?io:module.exports).parser={},u=q.packets="disconnect connect heartbeat message json event ack error noop".split(" "),F=q.reasons=["transport not supported","client not handshaken","unauthorized"],w=q.advice=["reconnect"],s=g.JSON,C=g.util.indexOf;q.encodePacket=function(a){var c=C(u,a.type),d=a.id||"",e=a.endpoint||"",f=a.ack,j=null;switch(a.type){case "error":var g=a.reason?C(F,a.reason):"",a=a.advice?C(w,a.advice):"";if(""!==g||""!==a)j=g+(""!==a?"+"+a:"");break;case "message":""!==
a.data&&(j=a.data);break;case "event":j={name:a.name};a.args&&a.args.length&&(j.args=a.args);j=s.stringify(j);break;case "json":j=s.stringify(a.data);break;case "connect":a.qs&&(j=a.qs);break;case "ack":j=a.ackId+(a.args&&a.args.length?"+"+s.stringify(a.args):"")}c=[c,d+("data"==f?"+":""),e];null!==j&&void 0!==j&&c.push(j);return c.join(":")};q.encodePayload=function(a){var c="";if(1==a.length)return a[0];for(var d=0,e=a.length;d<e;d++)c+="\ufffd"+a[d].length+"\ufffd"+a[d];return c};var G=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;
q.decodePacket=function(a){var c=a.match(G);if(!c)return{};var d=c[2]||"",a=c[5]||"",e={type:u[c[1]],endpoint:c[4]||""};d&&(e.id=d,e.ack=c[3]?"data":!0);switch(e.type){case "error":c=a.split("+");e.reason=F[c[0]]||"";e.advice=w[c[1]]||"";break;case "message":e.data=a||"";break;case "event":try{var f=s.parse(a);e.name=f.name;e.args=f.args}catch(j){}e.args=e.args||[];break;case "json":try{e.data=s.parse(a)}catch(g){}break;case "connect":e.qs=a||"";break;case "ack":if(c=a.match(/^([0-9]+)(\+)?(.*)/))if(e.ackId=
c[1],e.args=[],c[3])try{e.args=c[3]?s.parse(c[3]):[]}catch(h){}}return e};q.decodePayload=function(a){if("\ufffd"==a.charAt(0)){for(var c=[],d=1,e="";d<a.length;d++)"\ufffd"==a.charAt(d)?(c.push(q.decodePacket(a.substr(d+1).substr(0,e))),d+=Number(e)+1,e=""):e+=a.charAt(d);return c}return[q.decodePacket(a)]};var H="undefined"!=typeof io?io:module.parent.exports,g=function(a,c){this.socket=a;this.sessid=c};("undefined"!=typeof io?io:module.exports).Transport=g;H.util.mixin(g,H.EventEmitter);g.prototype.heartbeats=
function(){return!0};g.prototype.onData=function(a){this.clearCloseTimeout();(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout();if(""!==a&&(a=H.parser.decodePayload(a))&&a.length)for(var c=0,d=a.length;c<d;c++)this.onPacket(a[c]);return this};g.prototype.onPacket=function(a){this.socket.setHeartbeatTimeout();if("heartbeat"==a.type)return this.onHeartbeat();if("connect"==a.type&&""==a.endpoint)this.onConnect();"error"==a.type&&"reconnect"==a.advice&&(this.isOpen=
!1);this.socket.onPacket(a);return this};g.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var a=this;this.closeTimeout=setTimeout(function(){a.onDisconnect()},this.socket.closeTimeout)}};g.prototype.onDisconnect=function(){this.isOpen&&this.close();this.clearTimeouts();this.socket.onDisconnect();return this};g.prototype.onConnect=function(){this.socket.onConnect();return this};g.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=
null)};g.prototype.clearTimeouts=function(){this.clearCloseTimeout();this.reopenTimeout&&clearTimeout(this.reopenTimeout)};g.prototype.packet=function(a){this.send(H.parser.encodePacket(a))};g.prototype.onHeartbeat=function(){this.packet({type:"heartbeat"})};g.prototype.onOpen=function(){this.isOpen=!0;this.clearCloseTimeout();this.socket.onOpen()};g.prototype.onClose=function(){this.isOpen=!1;this.socket.onClose();this.onDisconnect()};g.prototype.prepareUrl=function(){var a=this.socket.options;return this.scheme()+
"://"+a.host+":"+a.port+"/"+a.resource+"/"+H.protocol+"/"+this.name+"/"+this.sessid};g.prototype.ready=function(a,c){c.call(this)};var t="undefined"!=typeof io?io:module.parent.exports,z=this,g=function(a){this.options={port:80,secure:!1,document:"document"in z?document:!1,resource:"socket.io",transports:t.transports,"connect timeout":1E4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":Infinity,"reopen delay":3E3,"max reconnection attempts":10,"sync disconnect on unload":!1,
"auto connect":!0,"flash policy port":10843,manualFlush:!1};t.util.merge(this.options,a);this.reconnecting=this.connecting=this.open=this.connected=!1;this.namespaces={};this.buffer=[];this.doBuffer=!1;if(this.options["sync disconnect on unload"]&&(!this.isXDomain()||t.util.ua.hasCORS)){var c=this;t.util.on(z,"beforeunload",function(){c.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()},da=function(){};("undefined"!=typeof io?io:module.exports).Socket=g;t.util.mixin(g,t.EventEmitter);
g.prototype.of=function(a){this.namespaces[a]||(this.namespaces[a]=new t.SocketNamespace(this,a),""!==a&&this.namespaces[a].packet({type:"connect"}));return this.namespaces[a]};g.prototype.publish=function(){this.emit.apply(this,arguments);var a,c;for(c in this.namespaces)this.namespaces.hasOwnProperty(c)&&(a=this.of(c),a.$emit.apply(a,arguments))};g.prototype.handshake=function(a){function c(e){e instanceof Error?(d.connecting=!1,d.onError(e.message)):a.apply(null,e.split(":"))}var d=this,e=this.options,
e=["http"+(e.secure?"s":"")+":/",e.host+":"+e.port,e.resource,t.protocol,t.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()&&!t.util.ua.hasCORS){var f=document.getElementsByTagName("script")[0],j=document.createElement("script");j.src=e+"&jsonp="+t.j.length;f.parentNode.insertBefore(j,f);t.j.push(function(a){c(a);j.parentNode.removeChild(j)})}else{var g=t.util.request();g.open("GET",e,!0);this.isXDomain()&&(g.withCredentials=!0);g.onreadystatechange=function(){if(g.readyState==
4){g.onreadystatechange=da;if(g.status==200)c(g.responseText);else if(g.status==403)d.onError(g.responseText);else{d.connecting=false;!d.reconnecting&&d.onError(g.responseText)}}};g.send(null)}};g.prototype.getTransport=function(a){for(var a=a||this.transports,c=0,d;d=a[c];c++)if(t.Transport[d]&&t.Transport[d].check(this)&&(!this.isXDomain()||t.Transport[d].xdomainCheck(this)))return new t.Transport[d](this,this.sessionid);return null};g.prototype.connect=function(a){if(this.connecting)return this;
var c=this;c.connecting=!0;this.handshake(function(d,e,f,j){function g(a){c.transport&&c.transport.clearTimeouts();c.transport=c.getTransport(a);if(!c.transport)return c.publish("connect_failed");c.transport.ready(c,function(){c.connecting=!0;c.publish("connecting",c.transport.name);c.transport.open();c.options["connect timeout"]&&(c.connectTimeoutTimer=setTimeout(function(){if(!c.connected&&(c.connecting=!1,c.options["try multiple transports"])){for(var a=c.transports;0<a.length&&a.splice(0,1)[0]!=
c.transport.name;);a.length?g(a):c.publish("connect_failed")}},c.options["connect timeout"]))})}c.sessionid=d;c.closeTimeout=1E3*f;c.heartbeatTimeout=1E3*e;c.transports||(c.transports=c.origTransports=j?t.util.intersect(j.split(","),c.options.transports):c.options.transports);c.setHeartbeatTimeout();g(c.transports);c.once("connect",function(){clearTimeout(c.connectTimeoutTimer);a&&typeof a=="function"&&a()})});return this};g.prototype.setHeartbeatTimeout=function(){clearTimeout(this.heartbeatTimeoutTimer);
if(!this.transport||this.transport.heartbeats()){var a=this;this.heartbeatTimeoutTimer=setTimeout(function(){a.transport.onClose()},this.heartbeatTimeout)}};g.prototype.packet=function(a){this.connected&&!this.doBuffer?this.transport.packet(a):this.buffer.push(a);return this};g.prototype.setBuffer=function(a){this.doBuffer=a;!a&&(this.connected&&this.buffer.length)&&(this.options.manualFlush||this.flushBuffer())};g.prototype.flushBuffer=function(){this.transport.payload(this.buffer);this.buffer=[]};
g.prototype.disconnect=function(){if(this.connected||this.connecting)this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted");return this};g.prototype.disconnectSync=function(){var a=t.util.request(),c=["http"+(this.options.secure?"s":"")+":/",this.options.host+":"+this.options.port,this.options.resource,t.protocol,"",this.sessionid].join("/")+"/?disconnect=1";a.open("GET",c,!1);a.send(null);this.onDisconnect("booted")};g.prototype.isXDomain=function(){var a=z.location.port||
("https:"==z.location.protocol?443:80);return this.options.host!==z.location.hostname||this.options.port!=a};g.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))};g.prototype.onOpen=function(){this.open=!0};g.prototype.onClose=function(){this.open=!1;clearTimeout(this.heartbeatTimeoutTimer)};g.prototype.onPacket=function(a){this.of(a.endpoint).onPacket(a)};g.prototype.onError=function(a){if(a&&a.advice&&"reconnect"===
a.advice&&(this.connected||this.connecting))this.disconnect(),this.options.reconnect&&this.reconnect();this.publish("error",a&&a.reason?a.reason:a)};g.prototype.onDisconnect=function(a){var c=this.connected,d=this.connecting;this.open=this.connecting=this.connected=!1;if(c||d)this.transport.close(),this.transport.clearTimeouts(),c&&(this.publish("disconnect",a),"booted"!=a&&(this.options.reconnect&&!this.reconnecting)&&this.reconnect())};g.prototype.reconnect=function(){function a(){if(d.connected){for(var e in d.namespaces)d.namespaces.hasOwnProperty(e)&&
""!==e&&d.namespaces[e].packet({type:"connect"});d.publish("reconnect",d.transport.name,d.reconnectionAttempts)}clearTimeout(d.reconnectionTimer);d.removeListener("connect_failed",c);d.removeListener("connect",c);d.reconnecting=!1;delete d.reconnectionAttempts;delete d.reconnectionDelay;delete d.reconnectionTimer;delete d.redoTransports;d.options["try multiple transports"]=f}function c(){if(d.reconnecting){if(d.connected)return a();if(d.connecting&&d.reconnecting)return d.reconnectionTimer=setTimeout(c,
1E3);d.reconnectionAttempts++>=e?d.redoTransports?(d.publish("reconnect_failed"),a()):(d.on("connect_failed",c),d.options["try multiple transports"]=!0,d.transports=d.origTransports,d.transport=d.getTransport(),d.redoTransports=!0,d.connect()):(d.reconnectionDelay<j&&(d.reconnectionDelay*=2),d.connect(),d.publish("reconnecting",d.reconnectionDelay,d.reconnectionAttempts),d.reconnectionTimer=setTimeout(c,d.reconnectionDelay))}}this.reconnecting=!0;this.reconnectionAttempts=0;this.reconnectionDelay=
this.options["reconnection delay"];var d=this,e=this.options["max reconnection attempts"],f=this.options["try multiple transports"],j=this.options["reconnection limit"];this.options["try multiple transports"]=!1;this.reconnectionTimer=setTimeout(c,this.reconnectionDelay);this.on("connect",c)};var J="undefined"!=typeof io?io:module.parent.exports,g=function(a,c){this.socket=a;this.name=c||"";this.flags={};this.json=new A(this,"json");this.ackPackets=0;this.acks={}},A=function(a,c){this.namespace=a;
this.name=c};("undefined"!=typeof io?io:module.exports).SocketNamespace=g;J.util.mixin(g,J.EventEmitter);g.prototype.$emit=J.EventEmitter.prototype.emit;g.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)};g.prototype.packet=function(a){a.endpoint=this.name;this.socket.packet(a);this.flags={};return this};g.prototype.send=function(a,c){var d={type:this.flags.json?"json":"message",data:a};"function"==typeof c&&(d.id=++this.ackPackets,d.ack=!0,this.acks[d.id]=c);return this.packet(d)};
g.prototype.emit=function(a){var c=Array.prototype.slice.call(arguments,1),d=c[c.length-1],e={type:"event",name:a};"function"==typeof d&&(e.id=++this.ackPackets,e.ack="data",this.acks[e.id]=d,c=c.slice(0,c.length-1));e.args=c;return this.packet(e)};g.prototype.disconnect=function(){""===this.name?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect"));return this};g.prototype.onPacket=function(a){function c(){d.packet({type:"ack",args:J.util.toArray(arguments),ackId:a.id})}
var d=this;switch(a.type){case "connect":this.$emit("connect");break;case "disconnect":if(""===this.name)this.socket.onDisconnect(a.reason||"booted");else this.$emit("disconnect",a.reason);break;case "message":case "json":var e=["message",a.data];"data"==a.ack?e.push(c):a.ack&&this.packet({type:"ack",ackId:a.id});this.$emit.apply(this,e);break;case "event":e=[a.name].concat(a.args);"data"==a.ack&&e.push(c);this.$emit.apply(this,e);break;case "ack":this.acks[a.ackId]&&(this.acks[a.ackId].apply(this,
a.args),delete this.acks[a.ackId]);break;case "error":if(a.advice)this.socket.onError(a);else"unauthorized"==a.reason?this.$emit("connect_failed",a.reason):this.$emit("error",a.reason)}};A.prototype.send=function(){this.namespace.flags[this.name]=!0;this.namespace.send.apply(this.namespace,arguments)};A.prototype.emit=function(){this.namespace.flags[this.name]=!0;this.namespace.emit.apply(this.namespace,arguments)};var j="undefined"!=typeof io?io:module.parent.exports,o=this,g=function(a){j.Transport.apply(this,
arguments)};("undefined"!=typeof io?io.Transport:module.exports).websocket=g;j.util.inherit(g,j.Transport);g.prototype.name="websocket";g.prototype.open=function(){var a=j.util.query(this.socket.options.query),c=this,d;d||(d=o.MozWebSocket||o.WebSocket);this.websocket=new d(this.prepareUrl()+a);this.websocket.onopen=function(){c.onOpen();c.socket.setBuffer(!1)};this.websocket.onmessage=function(a){c.onData(a.data)};this.websocket.onclose=function(){c.onClose();c.socket.setBuffer(!0)};this.websocket.onerror=
function(a){c.onError(a)};return this};g.prototype.send=j.util.ua.iDevice?function(a){var c=this;setTimeout(function(){c.websocket.send(a)},0);return this}:function(a){this.websocket.send(a);return this};g.prototype.payload=function(a){for(var c=0,d=a.length;c<d;c++)this.packet(a[c]);return this};g.prototype.close=function(){this.websocket.close();return this};g.prototype.onError=function(a){this.socket.onError(a)};g.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"};g.check=
function(){return"WebSocket"in o&&!("__addTask"in WebSocket)||"MozWebSocket"in o};g.xdomainCheck=function(){return!0};j.transports.push("websocket");var E="undefined"!=typeof io?io:module.parent.exports,x=function(){E.Transport.websocket.apply(this,arguments)};("undefined"!=typeof io?io.Transport:module.exports).flashsocket=x;E.util.inherit(x,E.Transport.websocket);x.prototype.name="flashsocket";x.prototype.open=function(){var a=this,c=arguments;WebSocket.__addTask(function(){E.Transport.websocket.prototype.open.apply(a,
c)});return this};x.prototype.send=function(){var a=this,c=arguments;WebSocket.__addTask(function(){E.Transport.websocket.prototype.send.apply(a,c)});return this};x.prototype.close=function(){WebSocket.__tasks.length=0;E.Transport.websocket.prototype.close.call(this);return this};x.prototype.ready=function(a,c){function d(){var f=a.options,j=f["flash policy port"],g=["http"+(f.secure?"s":"")+":/",f.host+":"+f.port,f.resource,"static/flashsocket","WebSocketMain"+(a.isXDomain()?"Insecure":"")+".swf"];
x.loaded||("undefined"===typeof WEB_SOCKET_SWF_LOCATION&&(WEB_SOCKET_SWF_LOCATION=g.join("/")),843!==j&&WebSocket.loadFlashPolicyFile("xmlsocket://"+f.host+":"+j),WebSocket.__initialize(),x.loaded=!0);c.call(e)}var e=this;if(document.body)return d();E.util.load(d)};x.check=function(){return"undefined"==typeof WebSocket||!("__initialize"in WebSocket)||!X?!1:10<=X.getFlashPlayerVersion().major};x.xdomainCheck=function(){return!0};"undefined"!=typeof window&&(WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=!0);
E.transports.push("flashsocket");if("undefined"!=typeof window){var X,ea=function(){if(!ba){try{var a=r.getElementsByTagName("body")[0].appendChild(r.createElement("span"));a.parentNode.removeChild(a)}catch(c){return}ba=!0;for(var a=ka.length,d=0;d<a;d++)ka[d]()}},Ca=function(a){ba?a():ka[ka.length]=a},g=function(a){if(typeof O.addEventListener!=B)O.addEventListener("load",a,!1);else if(typeof r.addEventListener!=B)r.addEventListener("load",a,!1);else if(typeof O.attachEvent!=B){var c=O;c.attachEvent("onload",
a);fa[fa.length]=[c,"onload",a]}else if("function"==typeof O.onload){var d=O.onload;O.onload=function(){d();a()}}else O.onload=a},ua=function(){var a=Y.length;if(0<a)for(var c=0;c<a;c++){var d=Y[c].id,e=Y[c].callbackFn,f={success:!1,id:d};if(0<l.pv[0]){var j=I(d);if(j)if(la(Y[c].swfVersion)&&!(l.wk&&312>l.wk))P(d,!0),e&&(f.success=!0,f.ref=ra(d),e(f));else if(Y[c].expressInstall&&sa()){f={};f.data=Y[c].expressInstall;f.width=j.getAttribute("width")||"0";f.height=j.getAttribute("height")||"0";j.getAttribute("class")&&
(f.styleclass=j.getAttribute("class"));j.getAttribute("align")&&(f.align=j.getAttribute("align"));for(var g={},j=j.getElementsByTagName("param"),h=j.length,o=0;o<h;o++)"movie"!=j[o].getAttribute("name").toLowerCase()&&(g[j[o].getAttribute("name")]=j[o].getAttribute("value"));ta(f,g,d,e)}else La(j),e&&e(f)}else if(P(d,!0),e){if((d=ra(d))&&typeof d.SetVariable!=B)f.success=!0,f.ref=d;e(f)}}},ra=function(a){var c=null;if((a=I(a))&&"OBJECT"==a.nodeName)typeof a.SetVariable!=B?c=a:(a=a.getElementsByTagName(T)[0])&&
(c=a);return c},sa=function(){return!ma&&la("6.0.65")&&(l.win||l.mac)&&!(l.wk&&312>l.wk)},ta=function(a,c,d,e){ma=!0;va=e||null;Da={success:!1,id:d};var f=I(d);if(f){"OBJECT"==f.nodeName?(ia=wa(f),na=null):(ia=f,na=d);a.id=Ea;if(typeof a.width==B||!/%$/.test(a.width)&&310>parseInt(a.width,10))a.width="310";if(typeof a.height==B||!/%$/.test(a.height)&&137>parseInt(a.height,10))a.height="137";r.title=r.title.slice(0,47)+" - Flash Player Installation";e=l.ie&&l.win?["Active"].concat("").join("X"):"PlugIn";
e="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+e+"&MMdoctitle="+r.title;c.flashvars=typeof c.flashvars!=B?c.flashvars+("&"+e):e;l.ie&&(l.win&&4!=f.readyState)&&(e=r.createElement("div"),d+="SWFObjectNew",e.setAttribute("id",d),f.parentNode.insertBefore(e,f),f.style.display="none",function(){f.readyState==4?f.parentNode.removeChild(f):setTimeout(arguments.callee,10)}());xa(a,c,d)}},La=function(a){if(l.ie&&l.win&&4!=a.readyState){var c=r.createElement("div");a.parentNode.insertBefore(c,
a);c.parentNode.replaceChild(wa(a),c);a.style.display="none";(function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)})()}else a.parentNode.replaceChild(wa(a),a)},wa=function(a){var c=r.createElement("div");if(l.win&&l.ie)c.innerHTML=a.innerHTML;else if(a=a.getElementsByTagName(T)[0])if(a=a.childNodes)for(var d=a.length,e=0;e<d;e++)!(1==a[e].nodeType&&"PARAM"==a[e].nodeName)&&8!=a[e].nodeType&&c.appendChild(a[e].cloneNode(!0));return c},xa=function(a,c,d){var e,f=I(d);
if(l.wk&&312>l.wk)return e;if(f)if(typeof a.id==B&&(a.id=d),l.ie&&l.win){var j="",g;for(g in a)a[g]!=Object.prototype[g]&&("data"==g.toLowerCase()?c.movie=a[g]:"styleclass"==g.toLowerCase()?j+=' class="'+a[g]+'"':"classid"!=g.toLowerCase()&&(j+=" "+g+'="'+a[g]+'"'));g="";for(var h in c)c[h]!=Object.prototype[h]&&(g+='<param name="'+h+'" value="'+c[h]+'" />');f.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+j+">"+g+"</object>";oa[oa.length]=a.id;e=I(a.id)}else{h=r.createElement(T);
h.setAttribute("type",pa);for(var o in a)a[o]!=Object.prototype[o]&&("styleclass"==o.toLowerCase()?h.setAttribute("class",a[o]):"classid"!=o.toLowerCase()&&h.setAttribute(o,a[o]));for(j in c)c[j]!=Object.prototype[j]&&"movie"!=j.toLowerCase()&&(a=h,g=j,o=c[j],d=r.createElement("param"),d.setAttribute("name",g),d.setAttribute("value",o),a.appendChild(d));f.parentNode.replaceChild(h,f);e=h}return e},Fa=function(a){var c=I(a);c&&"OBJECT"==c.nodeName&&(l.ie&&l.win?(c.style.display="none",function(){if(4==
c.readyState){var d=I(a);if(d){for(var e in d)"function"==typeof d[e]&&(d[e]=null);d.parentNode.removeChild(d)}}else setTimeout(arguments.callee,10)}()):c.parentNode.removeChild(c))},I=function(a){var c=null;try{c=r.getElementById(a)}catch(d){}return c},la=function(a){var c=l.pv,a=a.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return c[0]>a[0]||c[0]==a[0]&&c[1]>a[1]||c[0]==a[0]&&c[1]==a[1]&&c[2]>=a[2]?!0:!1},ca=function(a,c,d,e){if(!l.ie||!l.mac){var f=r.getElementsByTagName("head")[0];
if(f){d=d&&"string"==typeof d?d:"screen";e&&(ya=U=null);if(!U||ya!=d)e=r.createElement("style"),e.setAttribute("type","text/css"),e.setAttribute("media",d),U=f.appendChild(e),l.ie&&(l.win&&typeof r.styleSheets!=B&&0<r.styleSheets.length)&&(U=r.styleSheets[r.styleSheets.length-1]),ya=d;l.ie&&l.win?U&&typeof U.addRule==T&&U.addRule(a,c):U&&typeof r.createTextNode!=B&&U.appendChild(r.createTextNode(a+" {"+c+"}"))}}},P=function(a,c){if(Ga){var d=c?"visible":"hidden";ba&&I(a)?I(a).style.visibility=d:ca("#"+
a,"visibility:"+d)}},Ha=function(a){return null!=/[\\\"<>\.;]/.exec(a)&&typeof encodeURIComponent!=B?encodeURIComponent(a):a},B="undefined",T="object",pa="application/x-shockwave-flash",Ea="SWFObjectExprInst",O=window,r=document;n=navigator;var Ia=!1,ka=[function(){if(Ia){var a=r.getElementsByTagName("body")[0],c=r.createElement(T);c.setAttribute("type",pa);var d=a.appendChild(c);if(d){var e=0;(function(){if(typeof d.GetVariable!=B){var f=d.GetVariable("$version");f&&(f=f.split(" ")[1].split(","),
l.pv=[parseInt(f[0],10),parseInt(f[1],10),parseInt(f[2],10)])}else if(10>e){e++;setTimeout(arguments.callee,10);return}a.removeChild(c);d=null;ua()})()}else ua()}else ua()}],Y=[],oa=[],fa=[],ia,na,va,Da,ba=!1,ma=!1,U,ya,Ga=!0,l,k=typeof r.getElementById!=B&&typeof r.getElementsByTagName!=B&&typeof r.createElement!=B,ga=n.userAgent.toLowerCase(),ha=n.platform.toLowerCase(),Ma=ha?/win/.test(ha):/win/.test(ga),ha=ha?/mac/.test(ha):/mac/.test(ga),ga=/webkit/.test(ga)?parseFloat(ga.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,
"$1")):!1,za=!+"\v1",ja=[0,0,0],L=null;if(typeof n.plugins!=B&&typeof n.plugins["Shockwave Flash"]==T){if((L=n.plugins["Shockwave Flash"].description)&&!(typeof n.mimeTypes!=B&&n.mimeTypes[pa]&&!n.mimeTypes[pa].enabledPlugin))Ia=!0,za=!1,L=L.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),ja[0]=parseInt(L.replace(/^(.*)\..*$/,"$1"),10),ja[1]=parseInt(L.replace(/^.*\.(.*)\s.*$/,"$1"),10),ja[2]=/[a-zA-Z]/.test(L)?parseInt(L.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}else if(typeof O[["Active"].concat("Object").join("X")]!=
B)try{var v=new (window[["Active"].concat("Object").join("X")])("ShockwaveFlash.ShockwaveFlash");if(v&&(L=v.GetVariable("$version")))za=!0,L=L.split(" ")[1].split(","),ja=[parseInt(L[0],10),parseInt(L[1],10),parseInt(L[2],10)]}catch(Oa){}l={w3:k,pv:ja,wk:ga,ie:za,win:Ma,mac:ha};l.w3&&((typeof r.readyState!=B&&"complete"==r.readyState||typeof r.readyState==B&&(r.getElementsByTagName("body")[0]||r.body))&&ea(),ba||(typeof r.addEventListener!=B&&r.addEventListener("DOMContentLoaded",ea,!1),l.ie&&l.win&&
(r.attachEvent("onreadystatechange",function(){"complete"==r.readyState&&(r.detachEvent("onreadystatechange",arguments.callee),ea())}),O==top&&function(){if(!ba){try{r.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}ea()}}()),l.wk&&function(){ba||(/loaded|complete/.test(r.readyState)?ea():setTimeout(arguments.callee,0))}(),g(ea)));l.ie&&l.win&&window.attachEvent("onunload",function(){for(var a=fa.length,c=0;c<a;c++)fa[c][0].detachEvent(fa[c][1],fa[c][2]);a=oa.length;
for(c=0;c<a;c++)Fa(oa[c]);for(var d in l)l[d]=null;l=null;for(var e in X)X[e]=null;X=null});X={registerObject:function(a,c,d,e){if(l.w3&&a&&c){var f={};f.id=a;f.swfVersion=c;f.expressInstall=d;f.callbackFn=e;Y[Y.length]=f;P(a,false)}else e&&e({success:false,id:a})},getObjectById:function(a){if(l.w3)return ra(a)},embedSWF:function(a,c,d,e,f,j,g,h,o,E){var i={success:false,id:c};if(l.w3&&!(l.wk&&l.wk<312)&&a&&c&&d&&e&&f){P(c,false);Ca(function(){d=d+"";e=e+"";var x={};if(o&&typeof o===T)for(var k in o)x[k]=
o[k];x.data=a;x.width=d;x.height=e;k={};if(h&&typeof h===T)for(var l in h)k[l]=h[l];if(g&&typeof g===T)for(var m in g)k.flashvars=typeof k.flashvars!=B?k.flashvars+("&"+m+"="+g[m]):m+"="+g[m];if(la(f)){l=xa(x,k,c);x.id==c&&P(c,true);i.success=true;i.ref=l}else{if(j&&sa()){x.data=j;ta(x,k,c,E);return}P(c,true)}E&&E(i)})}else E&&E(i)},switchOffAutoHideShow:function(){Ga=false},ua:l,getFlashPlayerVersion:function(){return{major:l.pv[0],minor:l.pv[1],release:l.pv[2]}},hasFlashPlayerVersion:la,createSWF:function(a,
c,d){if(l.w3)return xa(a,c,d)},showExpressInstall:function(a,c,d,e){l.w3&&sa()&&ta(a,c,d,e)},removeSWF:function(a){l.w3&&Fa(a)},createCSS:function(a,c,d,e){l.w3&&ca(a,c,d,e)},addDomLoadEvent:Ca,addLoadEvent:g,getQueryParamValue:function(a){var c=r.location.search||r.location.hash;if(c){/\?/.test(c)&&(c=c.split("?")[1]);if(a==null)return Ha(c);for(var c=c.split("&"),d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return Ha(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(ma){var a=
I(Ea);if(a&&ia){a.parentNode.replaceChild(ia,a);if(na){P(na,true);if(l.ie&&l.win)ia.style.display="block"}va&&va(Da)}ma=false}}}}if(!("undefined"==typeof window||window.WebSocket)){var Q=window.console;if(!Q||!Q.log||!Q.error)Q={log:function(){},error:function(){}};X.hasFlashPlayerVersion("10.0.0")?("file:"==location.protocol&&Q.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://..."),WebSocket=function(a,
c,d,e,f){var j=this;j.__id=WebSocket.__nextId++;WebSocket.__instances[j.__id]=j;j.readyState=WebSocket.CONNECTING;j.bufferedAmount=0;j.__events={};c?"string"==typeof c&&(c=[c]):c=[];setTimeout(function(){WebSocket.__addTask(function(){WebSocket.__flash.create(j.__id,a,c,d||null,e||0,f||null)})},0)},WebSocket.prototype.send=function(a){if(this.readyState==WebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";a=WebSocket.__flash.send(this.__id,encodeURIComponent(a));
if(0>a)return!0;this.bufferedAmount+=a;return!1},WebSocket.prototype.close=function(){this.readyState==WebSocket.CLOSED||this.readyState==WebSocket.CLOSING||(this.readyState=WebSocket.CLOSING,WebSocket.__flash.close(this.__id))},WebSocket.prototype.addEventListener=function(a,c){a in this.__events||(this.__events[a]=[]);this.__events[a].push(c)},WebSocket.prototype.removeEventListener=function(a,c){if(a in this.__events)for(var d=this.__events[a],e=d.length-1;0<=e;--e)if(d[e]===c){d.splice(e,1);break}},
WebSocket.prototype.dispatchEvent=function(a){for(var c=this.__events[a.type]||[],d=0;d<c.length;++d)c[d](a);(c=this["on"+a.type])&&c(a)},WebSocket.prototype.__handleEvent=function(a){"readyState"in a&&(this.readyState=a.readyState);"protocol"in a&&(this.protocol=a.protocol);if("open"==a.type||"error"==a.type)a=this.__createSimpleEvent(a.type);else if("close"==a.type)a=this.__createSimpleEvent("close");else if("message"==a.type)a=decodeURIComponent(a.message),a=this.__createMessageEvent("message",
a);else throw"unknown event type: "+a.type;this.dispatchEvent(a)},WebSocket.prototype.__createSimpleEvent=function(a){if(document.createEvent&&window.Event){var c=document.createEvent("Event");c.initEvent(a,!1,!1);return c}return{type:a,bubbles:!1,cancelable:!1}},WebSocket.prototype.__createMessageEvent=function(a,c){if(document.createEvent&&window.MessageEvent&&!window.opera){var d=document.createEvent("MessageEvent");d.initMessageEvent("message",!1,!1,c,null,null,window,null);return d}return{type:a,
data:c,bubbles:!1,cancelable:!1}},WebSocket.CONNECTING=0,WebSocket.OPEN=1,WebSocket.CLOSING=2,WebSocket.CLOSED=3,WebSocket.__flash=null,WebSocket.__instances={},WebSocket.__tasks=[],WebSocket.__nextId=0,WebSocket.loadFlashPolicyFile=function(a){WebSocket.__addTask(function(){WebSocket.__flash.loadManualPolicyFile(a)})},WebSocket.__initialize=function(){if(!WebSocket.__flash)if(WebSocket.__swfLocation&&(window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation),window.WEB_SOCKET_SWF_LOCATION){var a=document.createElement("div");
a.id="webSocketContainer";a.style.position="absolute";WebSocket.__isFlashLite()?(a.style.left="0px",a.style.top="0px"):(a.style.left="-100px",a.style.top="-100px");var c=document.createElement("div");c.id="webSocketFlash";a.appendChild(c);document.body.appendChild(a);X.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:!0,swliveconnect:!0,allowScriptAccess:"always"},null,function(a){a.success||Q.error("[WebSocket] swfobject.embedSWF failed")})}else Q.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf")},
WebSocket.__onFlashInitialized=function(){setTimeout(function(){WebSocket.__flash=document.getElementById("webSocketFlash");WebSocket.__flash.setCallerUrl(location.href);WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var a=0;a<WebSocket.__tasks.length;++a)WebSocket.__tasks[a]();WebSocket.__tasks=[]},0)},WebSocket.__onFlashEvent=function(){setTimeout(function(){try{for(var a=WebSocket.__flash.receiveEvents(),c=0;c<a.length;++c)WebSocket.__instances[a[c].webSocketId].__handleEvent(a[c])}catch(d){Q.error(d)}},
0);return!0},WebSocket.__log=function(a){Q.log(decodeURIComponent(a))},WebSocket.__error=function(a){Q.error(decodeURIComponent(a))},WebSocket.__addTask=function(a){WebSocket.__flash?a():WebSocket.__tasks.push(a)},WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes)return!1;var a=window.navigator.mimeTypes["application/x-shockwave-flash"];return!a||!a.enabledPlugin||!a.enabledPlugin.filename?!1:a.enabledPlugin.filename.match(/flashlite/i)?!0:!1},window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION||
(window.addEventListener?window.addEventListener("load",function(){WebSocket.__initialize()},!1):window.attachEvent("onload",function(){WebSocket.__initialize()}))):Q.error("Flash Player >= 10.0.0 is required.")}var Z="undefined"!=typeof io?io:module.parent.exports,qa=this,M=function(a){a&&(Z.Transport.apply(this,arguments),this.sendBuffer=[])},Ja=function(){};("undefined"!=typeof io?io.Transport:module.exports).XHR=M;Z.util.inherit(M,Z.Transport);M.prototype.open=function(){this.socket.setBuffer(!1);
this.onOpen();this.get();this.setCloseTimeout();return this};M.prototype.payload=function(a){for(var c=[],d=0,e=a.length;d<e;d++)c.push(Z.parser.encodePacket(a[d]));this.send(Z.parser.encodePayload(c))};M.prototype.send=function(a){this.post(a);return this};M.prototype.post=function(a){function c(){if(4==this.readyState)if(this.onreadystatechange=Ja,e.posting=!1,200==this.status)e.socket.setBuffer(!1);else e.onClose()}function d(){this.onload=Ja;e.socket.setBuffer(!1)}var e=this;this.socket.setBuffer(!0);
this.sendXHR=this.request("POST");qa.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=d:this.sendXHR.onreadystatechange=c;this.sendXHR.send(a)};M.prototype.close=function(){this.onClose();return this};M.prototype.request=function(a){var c=Z.util.request(this.socket.isXDomain()),d=Z.util.query(this.socket.options.query,"t="+ +new Date);c.open(a||"GET",this.prepareUrl()+d,!0);if("POST"==a)try{c.setRequestHeader?c.setRequestHeader("Content-type","text/plain;charset=UTF-8"):
c.contentType="text/plain"}catch(e){}return c};M.prototype.scheme=function(){return this.socket.options.secure?"https":"http"};M.check=function(a,c){try{var d=Z.util.request(c),e=qa.XDomainRequest&&d instanceof XDomainRequest,f=a&&a.options&&a.options.secure?"https:":"http:",j=qa.location&&f!=qa.location.protocol;if(d&&(!e||!j))return!0}catch(g){}return!1};M.xdomainCheck=function(a){return M.check(a,!0)};var aa="undefined"!=typeof io?io:module.parent.exports,v=function(a){aa.Transport.XHR.apply(this,
arguments)};("undefined"!=typeof io?io.Transport:module.exports).htmlfile=v;aa.util.inherit(v,aa.Transport.XHR);v.prototype.name="htmlfile";v.prototype.get=function(){this.doc=new (window[["Active"].concat("Object").join("X")])("htmlfile");this.doc.open();this.doc.write("<html></html>");this.doc.close();this.doc.parentWindow.s=this;var a=this.doc.createElement("div");a.className="socketio";this.doc.body.appendChild(a);this.iframe=this.doc.createElement("iframe");a.appendChild(this.iframe);var c=this,
a=aa.util.query(this.socket.options.query,"t="+ +new Date);this.iframe.src=this.prepareUrl()+a;aa.util.on(window,"unload",function(){c.destroy()})};v.prototype._=function(a,c){a=a.replace(/\\\//g,"/");this.onData(a);try{var d=c.getElementsByTagName("script")[0];d.parentNode.removeChild(d)}catch(e){}};v.prototype.destroy=function(){if(this.iframe){try{this.iframe.src="about:blank"}catch(a){}this.doc=null;this.iframe.parentNode.removeChild(this.iframe);this.iframe=null;CollectGarbage()}};v.prototype.close=
function(){this.destroy();return aa.Transport.XHR.prototype.close.call(this)};v.check=function(a){if("undefined"!=typeof window&&["Active"].concat("Object").join("X")in window)try{return new (window[["Active"].concat("Object").join("X")])("htmlfile")&&aa.Transport.XHR.check(a)}catch(c){}return!1};v.xdomainCheck=function(){return!1};aa.transports.push("htmlfile");var V="undefined"!=typeof io?io:module.parent.exports,Na=this,v=function(){V.Transport.XHR.apply(this,arguments)},Aa=function(){};("undefined"!=
typeof io?io.Transport:module.exports)["xhr-polling"]=v;V.util.inherit(v,V.Transport.XHR);V.util.merge(v,V.Transport.XHR);v.prototype.name="xhr-polling";v.prototype.heartbeats=function(){return!1};v.prototype.open=function(){V.Transport.XHR.prototype.open.call(this);return!1};v.prototype.get=function(){function a(){if(4==this.readyState)if(this.onreadystatechange=Aa,200==this.status)e.onData(this.responseText),e.get();else e.onClose()}function c(){this.onerror=this.onload=Aa;e.retryCounter=1;e.onData(this.responseText);
e.get()}function d(){e.retryCounter++;if(!e.retryCounter||3<e.retryCounter)e.onClose();else e.get()}if(this.isOpen){var e=this;this.xhr=this.request();Na.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=c,this.xhr.onerror=d):this.xhr.onreadystatechange=a;this.xhr.send(null)}};v.prototype.onClose=function(){V.Transport.XHR.prototype.onClose.call(this);if(this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=Aa;try{this.xhr.abort()}catch(a){}this.xhr=null}};v.prototype.ready=
function(a,c){var d=this;V.util.defer(function(){c.call(d)})};V.transports.push("xhr-polling");var S="undefined"!=typeof io?io:module.parent.exports,Ba=this,v=function(a){S.Transport["xhr-polling"].apply(this,arguments);this.index=S.j.length;var c=this;S.j.push(function(a){c._(a)})},Ka=Ba.document&&"MozAppearance"in Ba.document.documentElement.style;("undefined"!=typeof io?io.Transport:module.exports)["jsonp-polling"]=v;S.util.inherit(v,S.Transport["xhr-polling"]);v.prototype.name="jsonp-polling";
v.prototype.post=function(a){function c(){d();e.socket.setBuffer(!1)}function d(){e.iframe&&e.form.removeChild(e.iframe);try{o=document.createElement('<iframe name="'+e.iframeId+'">')}catch(a){o=document.createElement("iframe"),o.name=e.iframeId}o.id=e.iframeId;e.form.appendChild(o);e.iframe=o}var e=this,f=S.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);if(!this.form){var j=document.createElement("form"),g=document.createElement("textarea"),h=this.iframeId="socketio_iframe_"+
this.index,o;j.className="socketio";j.style.position="absolute";j.style.top="0px";j.style.left="0px";j.style.display="none";j.target=h;j.method="POST";j.setAttribute("accept-charset","utf-8");g.name="d";j.appendChild(g);document.body.appendChild(j);this.form=j;this.area=g}this.form.action=this.prepareUrl()+f;d();this.area.value=S.JSON.stringify(a);try{this.form.submit()}catch(E){}this.iframe.attachEvent?o.onreadystatechange=function(){"complete"==e.iframe.readyState&&c()}:this.iframe.onload=c;this.socket.setBuffer(!0)};
v.prototype.get=function(){var a=this,c=document.createElement("script"),d=S.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);this.script&&(this.script.parentNode.removeChild(this.script),this.script=null);c.async=!0;c.src=this.prepareUrl()+d;c.onerror=function(){a.onClose()};d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d);this.script=c;Ka&&setTimeout(function(){var a=document.createElement("iframe");document.body.appendChild(a);document.body.removeChild(a)},
100)};v.prototype._=function(a){this.onData(a);this.isOpen&&this.get();return this};v.prototype.ready=function(a,c){var d=this;if(!Ka)return c.call(this);S.util.load(function(){c.call(d)})};v.check=function(){return"document"in Ba};v.xdomainCheck=function(){return!0};S.transports.push("jsonp-polling");"function"===typeof define&&define.amd&&define([],function(){return io})})();
$(function(){try{socket=io.connect(app.socket_url);var a="user_room_"+parseInt(app.loggedInUserId);socket.emit("create",a);socket.on("user_blocked",function(){window.location.href="/logout?blocked=true"});socket.on("user_notified",function(a){updateNotificationCount(a);1==parseInt(app.play_notification_sound)&&0<a.notification_count&&playNotificationMusic()});$("#PostPostedIn").length&&(0<$("#PostNewsFeedUrl").length?socket.emit("create",$("#PostNewsFeedUrl").val()):socket.emit("create",$("#PostPostedInRoom").val()),
socket.on("post_added",function(a){incNewPostCount(a.postId)}),socket.on("post_deleted",function(a){decNewPostCount(a.postId)}),socket.on("question_added",function(a){incNewQuestionCount(a.postId)}),socket.on("question_deleted",function(a){decNewQuestionCount(a.postId)}),socket.on("comment_added",function(a){updateNewComment(a)}),socket.on("comment_deleted",function(a){$("#comment_"+a.commentId).remove();setTimeout(function(){applyTimeAgo()},6E4);$("#comment_count_"+a.postId).html(a.commentCount)}),
socket.on("answer_added",function(a){updateNewAnswer(a)}),socket.on("answer_deleted",function(a){deleteAnswer(a.answerId)}),socket.on("poll_voted",function(a){userId=app.loggedInUserId;attendedUsers=a.attendedUsers;attendedUserCount=attendedUsers.length;-1!==$.inArray(userId,attendedUsers)?($(".poll_"+a.pollId).replaceWith(a.content),setTimeout(function(){applyTimeAgo()},6E4)):1==attendedUserCount?$("#user_count_"+a.pollId).html(attendedUserCount+" person voted"):$("#user_count_"+a.pollId).html(attendedUserCount+
" people voted")}),socket.on("post_liked",function(a){if(a.username===app.loggedInUserName){var c=$("#post_"+a.postId).find("a.like_btn");c.removeClass("like_btn").addClass("unlike_btn");c.html("Unlike")}updateLikedUsersList(a)}),socket.on("post_unliked",function(a){if(a.username===app.loggedInUserName){var c=$("#post_"+a.postId).find("a.unlike_btn");c.removeClass("unlike_btn").addClass("like_btn");c.html("Like")}updateLikedUsersList(a)}));var c=$("#graphUpdatedInRoom").val();c&&(socket.emit("create",
c),socket.on("my_health_updated",function(a){getMyHealthGraphData(a.type)}))}catch(d){alert(d),console.error('Sorry, the web socket at "%s" is un-available',url)}});
function updateLikedUsersList(a){var c=a.postId,d=a.likeCount,e=$("#liked_users_list_"+c);if(0<d){var a=a.lastLikedUsers,f=a.length,h=d-f,i="",g=app.loggedInUserName,d=$.inArray(g,a);0<$("#post_"+c).find("a.unlike_btn").length&&-1===d?(a.unshift(g),a.pop()):0<d&&(a.splice(d,1),a.unshift(g));$.each(a,function(a,c){i=c===g?i+'<span class="liker">You</span>':i+getUserElement(c);a===0&&f>1&&(i=i+(h>0?'<span class="comma">, </span>':'<span class="and"> and </span>'))});0<h&&(i+='<span class="and"> and </span>',
i+='<a data-post_id="'+c+'" class="owner view_likes">'+(h+" other"+(1<h?"s":""))+"</a>");i+="<span> like this</span>";e.removeClass("hide");e.find("span").html(i)}else e.addClass("hide")}function getUserElement(a){return'<span class="liker"><a href="/profile/'+encodeURIComponent(a)+'" class="owner" data-hovercard="'+a+'">'+a+"</a></span>"}
(function(a,c,d,e){var f,h,i,g,n,k,y,m,q,u,F,w,s,C,G,H,t,z,da,J=[].indexOf||function(a){for(var c=0,d=this.length;c<d;c++)if(c in this&&this[c]===a)return c;return-1};G={t:"top",m:"middle",b:"bottom",l:"left",c:"center",r:"right"};y=["l","c","r"];da=["t","m","b"];F=["t","b","l","r"];w={t:"b",m:null,b:"t",l:"r",c:null,r:"l"};s=function(a){var c;c=[];d.each(a.split(/\W+/),function(a,d){var e;e=d.toLowerCase().charAt(0);if(G[e])return c.push(e)});return c};z={};t={"border-radius":["-webkit-","-moz-"]};
u=function(a){var c;c=f("style");c.attr("type","text/css");d("head").append(c);try{c.html(a)}catch(e){c[0].styleSheet.cssText=a}return c};g=function(a,c,e){var f;"html"!==a&&(a="text");f="data-notify-"+a;return i(c,"["+f+"]").each(function(){var c;(c=d(this).attr(f))||(c="notify!blank");return e[c]=a})};i=function(a,c){return a.is(c)?a:a.find(c)};C={clickToHide:!0,autoHide:!0,autoHideDelay:5E3,arrowShow:!0,arrowSize:5,breakNewLines:!0,elementPosition:"bottom",globalPosition:"top right",style:"bootstrap",
className:"error",showAnimation:"slideDown",showDuration:400,hideAnimation:"slideUp",hideDuration:200,gap:5};q=function(a,c){var e;e=function(){};e.prototype=a;return d.extend(!0,new e,c)};f=function(a){return d("<"+a+"></"+a+">")};k={};n=function(a){var c;a.is("[type=radio]")&&(c=a.parents("form:first").find("[type=radio]").filter(function(c,e){return d(e).attr("name")===a.attr("name")}),a=c.first());return a};m=function(a,c,d){var f;if("string"===typeof d)d=parseInt(d,10);else if("number"!==typeof d)return;
if(!isNaN(d))return f=G[w[c.charAt(0)]],a[f]!==e&&(c=G[f.charAt(0)],d=-d),a[c]=a[c]===e?d:a[c]+d,null};H=function(a,c,d){if("l"===a||"t"===a)return 0;if("c"===a||"m"===a)return d/2-c/2;if("r"===a||"b"===a)return d-c;throw"Invalid alignment";};h=function(a){h.e=h.e||f("div");return h.e.text(a).html()};var A=function(a,c,e){"string"===typeof e&&(e={className:e});this.options=q(C,d.isPlainObject(e)?e:{});this.loadHTML();this.wrapper=d('<div class="notifyjs-wrapper">\n  <div class="notifyjs-arrow"></div>\n  <div class="notifyjs-container"></div>\n</div>');
this.options.clickToHide&&this.wrapper.addClass("notifyjs-hidable");this.wrapper.data("notifyjs",this);this.arrow=this.wrapper.find(".notifyjs-arrow");this.container=this.wrapper.find(".notifyjs-container");this.container.append(this.userContainer);a&&a.length&&(this.elementType=a.attr("type"),this.originalElement=a,this.elem=n(a),this.elem.data("notifyjs",this),this.elem.before(this.wrapper));this.container.hide();this.run(c)};A.prototype.loadHTML=function(){var a;a=this.getStyle();this.userContainer=
d(a.html);return this.userFields=a.fields};A.prototype.show=function(a,c){var d,e,f,g,h=this;e=function(){!a&&!h.elem&&h.destroy();if(c)return c()};g=0<this.container.parent().parents(":hidden").length;f=this.container.add(this.arrow);d=[];if(g&&a)g="show";else if(g&&!a)g="hide";else if(!g&&a)g=this.options.showAnimation,d.push(this.options.showDuration);else if(!g&&!a)g=this.options.hideAnimation,d.push(this.options.hideDuration);else return e();d.push(e);return f[g].apply(f,d)};A.prototype.setGlobalPosition=
function(){var a,c,e,g;a=this.getPosition();c=a[0];e=a[1];g=G[c];a=G[e];e=c+"|"+e;c=k[e];c||(c=k[e]=f("div"),e={},e[g]=0,"middle"===a?e.top="45%":"center"===a?e.left="45%":e[a]=0,c.css(e).addClass("notifyjs-corner"),d("body").append(c));return c.prepend(this.wrapper)};A.prototype.setElementPosition=function(){var a,c,e,f,g,h,i,k,n,q,s,t,u,z,A,I,C,ca,P;g=this.getPosition();I=g[0];A=g[1];f=this.elem.position();k=this.elem.outerHeight();s=this.elem.outerWidth();n=this.elem.innerHeight();q=this.elem.innerWidth();
u=this.wrapper.position();g=this.container.height();h=this.container.width();t=G[I];z=w[I];a=G[z];i={};i[a]="b"===I?k:"r"===I?s:0;m(i,"top",f.top-u.top);m(i,"left",f.left-u.left);P=["top","left"];C=0;for(ca=P.length;C<ca;C++)f=P[C],(u=parseInt(this.elem.css("margin-"+f),10))&&m(i,f,u);f=Math.max(0,this.options.gap-(this.options.arrowShow?e:0));m(i,a,f);if(this.options.arrowShow){e=this.options.arrowSize;c=d.extend({},i);a=this.userContainer.css("border-color")||this.userContainer.css("background-color")||
"white";C=0;for(ca=F.length;C<ca;C++)f=F[C],u=G[f],f!==z&&(f=u===t?a:"transparent",c["border-"+u]=""+e+"px solid "+f);m(i,G[z],e);0<=J.call(F,A)&&m(c,G[A],2*e)}else this.arrow.hide();0<=J.call(da,I)?(m(i,"left",H(A,h,s)),c&&m(c,"left",H(A,e,q))):0<=J.call(y,I)&&(m(i,"top",H(A,g,k)),c&&m(c,"top",H(A,e,n)));this.container.is(":visible")&&(i.display="block");this.container.removeAttr("style").css(i);if(c)return this.arrow.removeAttr("style").css(c)};A.prototype.getPosition=function(){var a,c,d,e,f,g,
h;a=s(this.options.position||(this.elem?this.options.elementPosition:this.options.globalPosition));0===a.length&&(a[0]="b");if(c=a[0],0>J.call(F,c))throw"Must be one of ["+F+"]";if(1===a.length||(d=a[0],0<=J.call(da,d))&&(e=a[1],0>J.call(y,e))||(f=a[0],0<=J.call(y,f))&&(g=a[1],0>J.call(da,g)))a[1]=(h=a[0],0<=J.call(y,h))?"m":"l";2===a.length&&(a[2]=a[1]);return a};A.prototype.getStyle=function(a){var c;a||(a=this.options.style);a||(a="default");c=z[a];if(!c)throw"Missing style: "+a;return c};A.prototype.updateClasses=
function(){var a,c;a=["base"];d.isArray(this.options.className)?a=a.concat(this.options.className):this.options.className&&a.push(this.options.className);c=this.getStyle();a=d.map(a,function(a){return"notifyjs-"+c.name+"-"+a}).join(" ");return this.userContainer.attr("class",a)};A.prototype.run=function(a,c){var e,f,g,k,m,n=this;d.isPlainObject(c)?d.extend(this.options,c):"string"===d.type(c)&&(this.options.className=c);if(this.container&&!a)this.show(!1);else if(this.container||a){f={};d.isPlainObject(a)?
f=a:f["notify!blank"]=a;for(g in f)if(e=f[g],k=this.userFields[g])"text"===k&&(e=h(e),this.options.breakNewLines&&(e=e.replace(/\n/g,"<br/>"))),m="notify!blank"===g?"":"="+g,i(this.userContainer,"[data-notify-"+k+m+"]").html(e);this.updateClasses();this.elem?this.setElementPosition():this.setGlobalPosition();this.show(!0);if(this.options.autoHide)return clearTimeout(this.autohideTimer),this.autohideTimer=setTimeout(function(){return n.show(false)},this.options.autoHideDelay)}};A.prototype.destroy=
function(){return this.wrapper.remove()};d.notify=function(a,c,e){a&&a.nodeName||a.jquery?d(a).notify(c,e):(e=c,new A(null,a,e));return a};d.fn.notify=function(a,c){d(this).each(function(){var e;return(e=n(d(this)).data("notifyjs"))?e.run(a,c):new A(d(this),a,c)});return this};d.extend(d.notify,{defaults:function(a){return d.extend(C,a)},addStyle:function(c,e){var f,h,i;if(!c)throw"Missing Style name";if(!e)throw"Missing Style definition";if(!e.html)throw"Missing Style HTML";if(null!=(h=z[c])&&h.cssElem)a.console&&
console.warn("notify: overwriting style '"+c+"'"),z[c].cssElem.remove();e.name=c;z[c]=e;f="";e.classes&&d.each(e.classes,function(a,c){f+=".notifyjs-"+e.name+"-"+a+" {\n";d.each(c,function(a,c){t[a]&&d.each(t[a],function(d,e){return f+="  "+e+a+": "+c+";\n"});return f+="  "+a+": "+c+";\n"});return f+="}\n"});e.css&&(f+="/* styles for "+e.name+" */\n"+e.css);f&&(e.cssElem=u(f),e.cssElem.attr("id","notify-"+e.name));i={};h=d(e.html);g("html",h,i);g("text",h,i);return e.fields=i},pluginOptions:C,getStyle:function(a){return z[a]},
insertCSS:u});d(function(){u(".notifyjs-corner {\n  position: fixed;\n  margin: 5px;\n  z-index: 1050;\n}\n\n.notifyjs-corner .notifyjs-wrapper,\n.notifyjs-corner .notifyjs-container {\n  position: relative;\n  display: block;\n  height: inherit;\n  width: inherit;\n  margin: 3px;\n}\n\n.notifyjs-wrapper {\n  z-index: 1;\n  position: absolute;\n  display: inline-block;\n  height: 0;\n  width: 0;\n}\n\n.notifyjs-container {\n  display: none;\n  z-index: 1;\n  position: absolute;\n}\n\n.notifyjs-hidable {\n  cursor: pointer;\n}\n\n[data-notify-text],[data-notify-html] {\n  position: relative;\n}\n\n.notifyjs-arrow {\n  position: absolute;\n  z-index: 2;\n  width: 0;\n  height: 0;\n}").attr("id",
"core-notify");d(c).on("click",".notifyjs-hidable",function(){return d(this).trigger("notify-hide")});return d(c).on("notify-hide",".notifyjs-wrapper",function(){var a;return null!=(a=d(this).data("notifyjs"))?a.show(!1):void 0})})})(window,document,jQuery);
$.notify.addStyle("bootstrap",{html:"<div>\n<span data-notify-text></span>\n</div>",classes:{base:{"font-weight":"bold",padding:"8px 15px 8px 14px","text-shadow":"0 1px 0 rgba(255, 255, 255, 0.5)","background-color":"#fcf8e3",border:"1px solid #fbeed5","border-radius":"4px","white-space":"nowrap","padding-left":"25px","background-repeat":"no-repeat","background-position":"3px 7px"},error:{color:"#B94A48","background-color":"#F2DEDE","border-color":"#EED3D7","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAtRJREFUeNqkVc1u00AQHq+dOD+0poIQfkIjalW0SEGqRMuRnHos3DjwAH0ArlyQeANOOSMeAA5VjyBxKBQhgSpVUKKQNGloFdw4cWw2jtfMOna6JOUArDTazXi/b3dm55socPqQhFka++aHBsI8GsopRJERNFlY88FCEk9Yiwf8RhgRyaHFQpPHCDmZG5oX2ui2yilkcTT1AcDsbYC1NMAyOi7zTX2Agx7A9luAl88BauiiQ/cJaZQfIpAlngDcvZZMrl8vFPK5+XktrWlx3/ehZ5r9+t6e+WVnp1pxnNIjgBe4/6dAysQc8dsmHwPcW9C0h3fW1hans1ltwJhy0GxK7XZbUlMp5Ww2eyan6+ft/f2FAqXGK4CvQk5HueFz7D6GOZtIrK+srupdx1GRBBqNBtzc2AiMr7nPplRdKhb1q6q6zjFhrklEFOUutoQ50xcX86ZlqaZpQrfbBdu2R6/G19zX6XSgh6RX5ubyHCM8nqSID6ICrGiZjGYYxojEsiw4PDwMSL5VKsC8Yf4VRYFzMzMaxwjlJSlCyAQ9l0CW44PBADzXhe7xMdi9HtTrdYjFYkDQL0cn4Xdq2/EAE+InCnvADTf2eah4Sx9vExQjkqXT6aAERICMewd/UAp/IeYANM2joxt+q5VI+ieq2i0Wg3l6DNzHwTERPgo1ko7XBXj3vdlsT2F+UuhIhYkp7u7CarkcrFOCtR3H5JiwbAIeImjT/YQKKBtGjRFCU5IUgFRe7fF4cCNVIPMYo3VKqxwjyNAXNepuopyqnld602qVsfRpEkkz+GFL1wPj6ySXBpJtWVa5xlhpcyhBNwpZHmtX8AGgfIExo0ZpzkWVTBGiXCSEaHh62/PoR0p/vHaczxXGnj4bSo+G78lELU80h1uogBwWLf5YlsPmgDEd4M236xjm+8nm4IuE/9u+/PH2JXZfbwz4zw1WbO+SQPpXfwG/BBgAhCNZiSb/pOQAAAAASUVORK5CYII=)"},
success:{color:"#468847","background-color":"#DFF0D8","border-color":"#D6E9C6","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAutJREFUeNq0lctPE0Ecx38zu/RFS1EryqtgJFA08YCiMZIAQQ4eRG8eDGdPJiYeTIwHTfwPiAcvXIwXLwoXPaDxkWgQ6islKlJLSQWLUraPLTv7Gme32zoF9KSTfLO7v53vZ3d/M7/fIth+IO6INt2jjoA7bjHCJoAlzCRw59YwHYjBnfMPqAKWQYKjGkfCJqAF0xwZjipQtA3MxeSG87VhOOYegVrUCy7UZM9S6TLIdAamySTclZdYhFhRHloGYg7mgZv1Zzztvgud7V1tbQ2twYA34LJmF4p5dXF1KTufnE+SxeJtuCZNsLDCQU0+RyKTF27Unw101l8e6hns3u0PBalORVVVkcaEKBJDgV3+cGM4tKKmI+ohlIGnygKX00rSBfszz/n2uXv81wd6+rt1orsZCHRdr1Imk2F2Kob3hutSxW8thsd8AXNaln9D7CTfA6O+0UgkMuwVvEFFUbbAcrkcTA8+AtOk8E6KiQiDmMFSDqZItAzEVQviRkdDdaFgPp8HSZKAEAL5Qh7Sq2lIJBJwv2scUqkUnKoZgNhcDKhKg5aH+1IkcouCAdFGAQsuWZYhOjwFHQ96oagWgRoUov1T9kRBEODAwxM2QtEUl+Wp+Ln9VRo6BcMw4ErHRYjH4/B26AlQoQQTRdHWwcd9AH57+UAXddvDD37DmrBBV34WfqiXPl61g+vr6xA9zsGeM9gOdsNXkgpEtTwVvwOklXLKm6+/p5ezwk4B+j6droBs2CsGa/gNs6RIxazl4Tc25mpTgw/apPR1LYlNRFAzgsOxkyXYLIM1V8NMwyAkJSctD1eGVKiq5wWjSPdjmeTkiKvVW4f2YPHWl3GAVq6ymcyCTgovM3FzyRiDe2TaKcEKsLpJvNHjZgPNqEtyi6mZIm4SRFyLMUsONSSdkPeFtY1n0mczoY3BHTLhwPRy9/lzcziCw9ACI+yql0VLzcGAZbYSM5CCSZg1/9oc/nn7+i8N9p/8An4JMADxhH+xHfuiKwAAAABJRU5ErkJggg==)"},
info:{color:"#3A87AD","background-color":"#D9EDF7","border-color":"#BCE8F1","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QYFAhkSsdes/QAAA8dJREFUOMvVlGtMW2UYx//POaWHXg6lLaW0ypAtw1UCgbniNOLcVOLmAjHZolOYlxmTGXVZdAnRfXQm+7SoU4mXaOaiZsEpC9FkiQs6Z6bdCnNYruM6KNBw6YWewzl9z+sHImEWv+vz7XmT95f/+3/+7wP814v+efDOV3/SoX3lHAA+6ODeUFfMfjOWMADgdk+eEKz0pF7aQdMAcOKLLjrcVMVX3xdWN29/GhYP7SvnP0cWfS8caSkfHZsPE9Fgnt02JNutQ0QYHB2dDz9/pKX8QjjuO9xUxd/66HdxTeCHZ3rojQObGQBcuNjfplkD3b19Y/6MrimSaKgSMmpGU5WevmE/swa6Oy73tQHA0Rdr2Mmv/6A1n9w9suQ7097Z9lM4FlTgTDrzZTu4StXVfpiI48rVcUDM5cmEksrFnHxfpTtU/3BFQzCQF/2bYVoNbH7zmItbSoMj40JSzmMyX5qDvriA7QdrIIpA+3cdsMpu0nXI8cV0MtKXCPZev+gCEM1S2NHPvWfP/hL+7FSr3+0p5RBEyhEN5JCKYr8XnASMT0xBNyzQGQeI8fjsGD39RMPk7se2bd5ZtTyoFYXftF6y37gx7NeUtJJOTFlAHDZLDuILU3j3+H5oOrD3yWbIztugaAzgnBKJuBLpGfQrS8wO4FZgV+c1IxaLgWVU0tMLEETCos4xMzEIv9cJXQcyagIwigDGwJgOAtHAwAhisQUjy0ORGERiELgG4iakkzo4MYAxcM5hAMi1WWG1yYCJIcMUaBkVRLdGeSU2995TLWzcUAzONJ7J6FBVBYIggMzmFbvdBV44Corg8vjhzC+EJEl8U1kJtgYrhCzgc/vvTwXKSib1paRFVRVORDAJAsw5FuTaJEhWM2SHB3mOAlhkNxwuLzeJsGwqWzf5TFNdKgtY5qHp6ZFf67Y/sAVadCaVY5YACDDb3Oi4NIjLnWMw2QthCBIsVhsUTU9tvXsjeq9+X1d75/KEs4LNOfcdf/+HthMnvwxOD0wmHaXr7ZItn2wuH2SnBzbZAbPJwpPx+VQuzcm7dgRCB57a1uBzUDRL4bfnI0RE0eaXd9W89mpjqHZnUI5Hh2l2dkZZUhOqpi2qSmpOmZ64Tuu9qlz/SEXo6MEHa3wOip46F1n7633eekV8ds8Wxjn37Wl63VVa+ej5oeEZ/82ZBETJjpJ1Rbij2D3Z/1trXUvLsblCK0XfOx0SX2kMsn9dX+d+7Kf6h8o4AIykuffjT8L20LU+w4AZd5VvEPY+XpWqLV327HR7DzXuDnD8r+ovkBehJ8i+y8YAAAAASUVORK5CYII=)"},
warn:{color:"#C09853","background-color":"#FCF8E3","border-color":"#FBEED5","background-image":"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAABJlBMVEXr6eb/2oD/wi7/xjr/0mP/ykf/tQD/vBj/3o7/uQ//vyL/twebhgD/4pzX1K3z8e349vK6tHCilCWbiQymn0jGworr6dXQza3HxcKkn1vWvV/5uRfk4dXZ1bD18+/52YebiAmyr5S9mhCzrWq5t6ufjRH54aLs0oS+qD751XqPhAybhwXsujG3sm+Zk0PTwG6Shg+PhhObhwOPgQL4zV2nlyrf27uLfgCPhRHu7OmLgAafkyiWkD3l49ibiAfTs0C+lgCniwD4sgDJxqOilzDWowWFfAH08uebig6qpFHBvH/aw26FfQTQzsvy8OyEfz20r3jAvaKbhgG9q0nc2LbZxXanoUu/u5WSggCtp1anpJKdmFz/zlX/1nGJiYmuq5Dx7+sAAADoPUZSAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfdBgUBGhh4aah5AAAAlklEQVQY02NgoBIIE8EUcwn1FkIXM1Tj5dDUQhPU502Mi7XXQxGz5uVIjGOJUUUW81HnYEyMi2HVcUOICQZzMMYmxrEyMylJwgUt5BljWRLjmJm4pI1hYp5SQLGYxDgmLnZOVxuooClIDKgXKMbN5ggV1ACLJcaBxNgcoiGCBiZwdWxOETBDrTyEFey0jYJ4eHjMGWgEAIpRFRCUt08qAAAAAElFTkSuQmCC)"}}});