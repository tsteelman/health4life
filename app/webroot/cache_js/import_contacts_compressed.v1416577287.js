(function(b){jQuery.fn.extend({slimScroll:function(e){var a=b.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:0.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:0.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200},e);this.each(function(){function q(f){if(o){var f=f||window.event,d=0;f.wheelDelta&&(d=-f.wheelDelta/
120);f.detail&&(d=f.detail/3);b(f.target||f.srcTarget||f.srcElement).closest("."+a.wrapperClass).is(c.parent())&&h(d,!0);f.preventDefault&&!l&&f.preventDefault();l||(f.returnValue=!1)}}function h(b,e,i){var g=b,h=c.outerHeight()-d.outerHeight();e&&(g=parseInt(d.css("top"))+b*parseInt(a.wheelStep)/100*d.outerHeight(),g=Math.min(Math.max(g,0),h),g=0<b?Math.ceil(g):Math.floor(g),d.css({top:g+"px"}));j=parseInt(d.css("top"))/(c.outerHeight()-d.outerHeight());g=j*(c[0].scrollHeight-c.outerHeight());i&&
(g=b,b=g/c[0].scrollHeight*c.outerHeight(),b=Math.min(Math.max(b,0),h),d.css({top:b+"px"}));c.scrollTop(g);c.trigger("slimscrolling",~~g);r();m()}function y(){window.addEventListener?(this.addEventListener("DOMMouseScroll",q,!1),this.addEventListener("mousewheel",q,!1)):document.attachEvent("onmousewheel",q)}function s(){p=Math.max(c.outerHeight()/c[0].scrollHeight*c.outerHeight(),z);d.css({height:p+"px"});var a=p==c.outerHeight()?"none":"block";d.css({display:a})}function r(){s();clearTimeout(v);
j==~~j?(l=a.allowPageScroll,w!=j&&c.trigger("slimscroll",0==~~j?"top":"bottom")):l=!1;w=j;p>=c.outerHeight()?l=!0:(d.stop(!0,!0).fadeIn("fast"),a.railVisible&&i.stop(!0,!0).fadeIn("fast"))}function m(){a.alwaysVisible||(v=setTimeout(function(){if((!a.disableFadeOut||!o)&&!t&&!u)d.fadeOut("slow"),i.fadeOut("slow")},1E3))}var o,t,u,v,x,p,j,w,z=30,l=!1,c=b(this);if(c.parent().hasClass(a.wrapperClass)){var k=c.scrollTop(),d=c.parent().find("."+a.barClass),i=c.parent().find("."+a.railClass);s();if(b.isPlainObject(e)){if("height"in
e&&"auto"==e.height){c.parent().css("height","auto");c.css("height","auto");var n=c.parent().parent().height();c.parent().css("height",n);c.css("height",n)}if("scrollTo"in e)k=parseInt(a.scrollTo);else if("scrollBy"in e)k+=parseInt(a.scrollBy);else if("destroy"in e){d.remove();i.remove();c.unwrap();return}h(k,!1,!0)}}else a.height="auto"==a.height?c.parent().height():a.height,k=b("<div></div>").addClass(a.wrapperClass).css({position:"relative",overflow:"hidden",width:a.width,height:a.height}),c.css({overflow:"hidden",
width:a.width,height:a.height}),i=b("<div></div>").addClass(a.railClass).css({width:a.size,height:"100%",position:"absolute",top:0,display:a.alwaysVisible&&a.railVisible?"block":"none","border-radius":a.size,background:a.railColor,opacity:a.railOpacity,zIndex:90}),d=b("<div></div>").addClass(a.barClass).css({background:a.color,width:a.size,position:"absolute",top:0,opacity:a.opacity,display:a.alwaysVisible?"block":"none","border-radius":a.size,BorderRadius:a.size,MozBorderRadius:a.size,WebkitBorderRadius:a.size,
zIndex:99}),n="right"==a.position?{right:a.distance}:{left:a.distance},i.css(n),d.css(n),c.wrap(k),c.parent().append(d),c.parent().append(i),a.railDraggable&&b.ui&&"function"==typeof b.ui.draggable&&d.draggable({axis:"y",containment:"parent",start:function(){u=!0},stop:function(){u=!1;m()},drag:function(){h(0,b(this).position().top,!1)}}),i.hover(function(){r()},function(){m()}),d.hover(function(){t=!0},function(){t=!1}),c.hover(function(){o=!0;r();m()},function(){o=!1;m()}),c.bind("touchstart",function(a){a.originalEvent.touches.length&&
(x=a.originalEvent.touches[0].pageY)}),c.bind("touchmove",function(b){b.originalEvent.preventDefault();b.originalEvent.touches.length&&h((x-b.originalEvent.touches[0].pageY)/a.touchScrollStep,!0)}),"bottom"===a.start?(d.css({top:c.outerHeight()-d.outerHeight()}),h(0,!0)):"top"!==a.start&&(h(b(a.start).position().top,null,!0),a.alwaysVisible||d.hide()),y(),s()});return this}});jQuery.fn.extend({slimscroll:jQuery.fn.slimScroll})})(jQuery);
$(document).on("click","#import_contacts_wizard #skip_step_1",function(){showStep2()});function showStep2(){$("#import_contact_step_1").addClass("hide");$("#import_contact_step_2").removeClass("hide");var b=$("#import_contacts_wizard ul.steps li");b.eq(0).removeClass("active");b.eq(1).addClass("active")}$(document).on("click","#import_contacts_wizard #skip_step_2",function(){$("#import_contact_step_2").addClass("hide");doRedirectAfterStep2()});
function doRedirectAfterStep2(){window.location.href="/profile"}var existingContactsCheckBoxList,newContactsCheckBoxList;$(document).ready(function(){existingContactsCheckBoxList=$('input[name="existing_contacts[]"]');newContactsCheckBoxList=$('input[name="new_contacts[]"]');$(".slim-scroll").each(function(){$(this).slimScroll({color:"#BBDAEC",railColor:"#EBF5F7",size:"12px",height:"300px",railVisible:!0})})});
$(document).on("change","#select_all_existing_contacts",function(){var b=$("#import_contact_step_1 .contact_persons");$(this).is(":checked")?(existingContactsCheckBoxList.prop("checked",!0),b.addClass("active")):(existingContactsCheckBoxList.prop("checked",!1),b.removeClass("active"));handleExistingContactsCheckboxChange()});
$(document).on("change","#select_all_new_contacts",function(){var b=$("#import_contact_step_2 .indvdl_people");$(this).is(":checked")?(newContactsCheckBoxList.prop("checked",!0),b.addClass("active")):(newContactsCheckBoxList.prop("checked",!1),b.removeClass("active"));handleNewContactsCheckboxChange()});
$(document).on("change",'input[name="existing_contacts[]"]',function(){handleExistingContactsCheckboxChange();var b=$(this).closest(".contact_persons");$(this).is(":checked")?b.addClass("active"):b.removeClass("active")});$(document).on("change",'input[name="new_contacts[]"]',function(){handleNewContactsCheckboxChange();var b=$(this).closest(".indvdl_people");$(this).is(":checked")?b.addClass("active"):b.removeClass("active")});
function handleExistingContactsCheckboxChange(){var b=$('input[name="existing_contacts[]"]:checked').length;$("#selected_existing_contacts_count").html(b);var e=$("#add_existing_connections");0<b?e.prop("disabled",!1):e.prop("disabled",!0)}function handleNewContactsCheckboxChange(){var b=$('input[name="new_contacts[]"]:checked').length;$("#selected_new_contacts_count").html(b);var e=$("#add_new_connections");0<b?e.prop("disabled",!1):e.prop("disabled",!0)}
$(document).on("click","#add_existing_connections",function(){var b=$(this),e=existingContactsCheckBoxList.serialize();$.ajax({url:"/user/friends/addExistingConnections",data:e,method:"POST",dataType:"json",beforeSend:function(){b.prop("disabled",!0)},success:function(a){""!==a.message?($("#import_contact_message").removeClass("hide"),$("#import_contact_message .message").html(a.message),!0===a.success?($("#import_contact_message").removeClass("alert-error").addClass("alert-success"),showStep2()):
!0===a.error&&(b.prop("disabled",!1),$("#import_contact_message").removeClass("alert-success").addClass("alert-error")),window.scrollTo(0,0)):($("#import_contact_message").addClass("hide"),$("#import_contact_message .message").html(""))}})});
$(document).on("click","#add_new_connections",function(){var b=$(this),e=newContactsCheckBoxList.serialize();$.ajax({url:"/user/friends/addNewConnections",data:e,method:"POST",dataType:"json",beforeSend:function(){b.prop("disabled",!0)},success:function(a){$("#import_contact_message").addClass("hide");$("#import_contact_message .message").html("");!0===a.success?doRedirectAfterStep2():!0===a.error&&(b.prop("disabled",!1),$("#import_contact_message").removeClass("hide"),$("#import_contact_message .message").html(a.message),
$("#import_contact_message").removeClass("alert-success").addClass("alert-error"),window.scrollTo(0,0))}})});$(document).on("click","#import_contact_step_1 .contact_persons, #import_contact_step_2 .indvdl_people",function(b){$(b.target).is('input[type="checkbox"]')||$(this).find('input[type="checkbox"]').trigger("click")});